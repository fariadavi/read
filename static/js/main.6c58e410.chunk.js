(this["webpackJsonpunirio-ged-app-frontend"]=this["webpackJsonpunirio-ged-app-frontend"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),r=a.n(s),c=a(31),i=a.n(c),o=a(57),l=a(45),u={"en-US":{translation:{yes:"Yes",no:"No",none:"None",document:"Document",document_plural:"Documents",category:"Category",category_plural:"Categories",department:"Department",department_plural:"Departments",user:"User",user_plural:"Users","table.actions":"Actions","loginWithGoogle.buttonText":"Sign in with Google","pageNotFound.title":"404","pageNotFound.subtitle":"Oops! Seems like this webpage doesn't exist...","pageNotFound.message":"Either the link you have is broken or this page refers to a content that has been moved or deleted.","pageNotFound.home":"Click here to go to the homepage","pageNotFound.contactUs":"If you believe that should be something here, please contact system administration.","navbar.documents":"$t(document_plural)","navbar.documents.add":"Add New","navbar.documents.search":"Search","navbar.department":"$t(department)","navbar.department.category":"$t(category_plural)","navbar.department.users":"$t(user_plural)","navbar.system":"System","navbar.system.department":"$t(department_plural)","navbar.system.users":"$t(user_plural)","navbar.language":"Language","navbar.language.en-US.shortName":"English","navbar.language.en-US.fullName":"American English","navbar.language.pt-BR.shortName":"Portuguese","navbar.language.pt-BR.fullName":"Brazilian Portuguese","navbar.logout":"Logout","document.title":"Title","document.status":"Status","document.summary":"Summary","document.category":"$t(category)","document.registeredBy":"Registered by","document.date":"Document Date","document.form.add.title":"New Document","document.form.edit.title":"Edit Document","document.form.summary.mutedText":"A brief description of the document being uploaded.","document.form.category.choose":"Choose a category...","document.form.category.zeroOptions":"No categories on current department","document.form.file":"File","document.form.file.choose":"Choose file","document.form.file.placeholder":"No file selected","document.form.deleteButton":"Delete","document.form.updateButton":"Update","document.form.submitButton":"Submit","document.form.validation.fileRequired":"You must attach a file","document.form.validation.invalidFileType":"File selected does not have a valid type","document.form.validation.titleRequired":"Title is required","document.form.validation.categoryRequired":"You must select a category","searchBar.filters.category":"$t(category)","searchBar.filters.date.from":"Date from","searchBar.filters.date.until":"until","searchBar.searchButton":"Search Documents","searchBar.moreFiltersButton":"More filters","searchBar.lessFiltersButton":"Less filters","searchBar.filters.registeredByMe":"Only documents registered by me","search.noResultFound.message.p1":"No results found","search.noResultFound.message.p2":" for ","search.noResultFound.message.p3":" with the specified filters.","search.noResultFound.searchTips.title":"Suggestions:","search.noResultFound.searchTips.item1":"Make sure all words are spelled correctly.","search.noResultFound.searchTips.item2":"Try using different/fewer keywords.","search.noResultFound.searchTips.item3":"Make sure all the optional filters are correctly filled up.","search.noResultFound.searchTips.item4":"Try removing the filters and re-add them gradually.","search.error":"There was an error performing the requested search. Please try again later.","user.name":"User Name","user.email":"Email","user.management.title":"Manage Users","user.management.invite.title":"Invite User","user.management.department-permissions.title":"Manage Department Permissions","user.management.system-permissions.title":"Manage System Permissions","user.management.invite.placeholder":"Enter user mail","user.management.invite.validation.invalidEmailFormat":"Invalid email format","user.management.invite.validation.invalidDomain":"Email must belong to @uniriotec.br or @edu.unirio.br","user.management.invite.button":"Send Invite","user.table.headers.status":"Status","user.table.headers.username":"$t(user.name)","user.table.headers.email":"$t(user.email)","user.table.headers.permission.search_docs":"Search documents","user.table.headers.permission.add_docs":"Add documents","user.table.headers.permission.edit_docs_others":"Edit other users' documents","user.table.headers.permission.delete_docs_others":"Delete other users' documents","user.table.headers.permission.invite_users":"Invite users","user.table.headers.permission.manage_categories":"Manage categories","user.table.headers.permission.manage_dept_perm":"Manage department permissions","user.table.headers.permission.manage_system_perm":"Manage system permissions","user.table.headers.permission.manage_departments":"Manage departments","user.table.filters.text.username":"Filter by user name","user.table.filters.text.email":"Filter by email","user.table.filters.boolean.y":"$t(yes)","user.table.filters.boolean.n":"$t(no)","user.table.filters.status.y":"Active","user.table.filters.status.n":"Pending","user.table.headers.buttons.invite":"Invite user","user.table.headers.buttons.filter":"Filter users","user.table.headers.buttons.permissions.batch_edit":"Edit users permissions in batch","user.table.headers.buttons.permissions.batch_edit.confirm":"Confirm","user.table.headers.buttons.permissions.batch_edit.cancel":"Cancel","user.table.filters.buttons.clear":"Clear all filters","user.table.data.status.y":"Active","user.table.data.status.n":"Pending","user.table.data.buttons.permissions.edit":"Edit user permissions","user.table.data.buttons.permissions.edit.confirm":"Confirm","user.table.data.buttons.permissions.edit.cancel":"Cancel","user.table.data.buttons.user.delete":"Remove user from this department"}},"pt-BR":{translation:{yes:"Sim",no:"N\xe3o",none:"Nenhuma",document:"Documento",document_plural:"Documentos",category:"Categoria",category_plural:"Categorias",department:"Departmento",department_plural:"Departmentos",user:"Usu\xe1rio",user_plural:"Usu\xe1rios","table.actions":"A\xe7\xf5es","loginWithGoogle.buttonText":"Entre com Google","pageNotFound.title":"404","pageNotFound.subtitle":"Oops! Parece que essa p\xe1gina n\xe3o existe...","pageNotFound.message":"O link que voc\xea possui est\xe1 errado ou esta p\xe1gina se refere a um conte\xfado que foi movido ou exclu\xeddo.","pageNotFound.home":"Clique aqui para voltar a p\xe1gina inicial","pageNotFound.contactUs":"Se voc\xea acredita que deveria haver algo aqui, entre em contato com os administradores do sistema.","navbar.documents":"$t(document_plural)","navbar.documents.add":"Adicionar","navbar.documents.search":"Pesquisar","navbar.department":"$t(department)","navbar.department.category":"$t(category_plural)","navbar.department.users":"$t(user_plural)","navbar.system":"Sistema","navbar.system.department":"$t(department_plural)","navbar.system.users":"$t(user_plural)","navbar.language":"Linguagem","navbar.language.en-US.shortName":"Ingl\xeas","navbar.language.en-US.fullName":"Ingl\xeas Americano","navbar.language.pt-BR.shortName":"Portugu\xeas","navbar.language.pt-BR.fullName":"Portugu\xeas Brasileiro","navbar.logout":"Sair","document.title":"T\xedtulo","document.status":"Status","document.summary":"Resumo","document.category":"$t(category)","document.registeredBy":"Cadastrado por","document.date":"Data do Documento","document.form.add.title":"Novo Documento","document.form.edit.title":"Editar Documento","document.form.summary.mutedText":"Uma breve descri\xe7\xe3o do documento sendo enviado.","document.form.category.choose":"Escolha uma categoria...","document.form.category.zeroOptions":"Nenhuma categoria no departamento atual","document.form.file":"Arquivo","document.form.file.choose":"Escolha o arquivo","document.form.file.placeholder":"Nenhum arquivo selecionado","document.form.deleteButton":"Excluir","document.form.updateButton":"Atualizar","document.form.submitButton":"Enviar","document.form.validation.fileRequired":"Deve anexar um arquivo","document.form.validation.invalidFileType":"O tipo de arquivo enviado n\xe3o \xe9 v\xe1lido","document.form.validation.titleRequired":"Titulo \xe9 obrigat\xf3rio","document.form.validation.categoryRequired":"Deve selecionar uma categoria","searchBar.filters.category":"$t(category)","searchBar.filters.date.from":"Data de","searchBar.filters.date.until":"at\xe9","searchBar.searchButton":"Pesquisar documentos","searchBar.moreFiltersButton":"Mais filtros","searchBar.lessFiltersButton":"Menos filtros","searchBar.filters.registeredByMe":"Apenas documentos cadastrados por mim","search.noResultFound.message.p1":"Nenhum resultado encontrado","search.noResultFound.message.p2":" para ","search.noResultFound.message.p3":" com os filtros especificados.","search.noResultFound.searchTips.title":"Sugest\xf5es:","search.noResultFound.searchTips.item1":"Certifique-se de que todas as palavras est\xe3o escritas corretamente.","search.noResultFound.searchTips.item2":"Tente usar outras/menos palavras-chave.","search.noResultFound.searchTips.item3":"Certifique-se de que todas os filtros opcionais est\xe3o preenchidos corretamente.","search.noResultFound.searchTips.item4":"Tente remover os filtros e readicion\xe1-los gradualmente.","search.error":"Houve um erro realizando a busca desejada. Por favor, tente novamente mais tarde.","user.name":"Nome de usu\xe1rio","user.email":"Email","user.management.title":"Gerenciar Usu\xe1rios","user.management.invite.title":"Convidar Usu\xe1rio","user.management.department-permissions.title":"Gerenciar Permiss\xf5es de Departamento","user.management.system-permissions.title":"Gerenciar Permiss\xf5es de Sistema","user.management.invite.placeholder":"Entre com o email do usu\xe1rio","user.management.invite.validation.invalidEmailFormat":"Email com formato inv\xe1lido","user.management.invite.validation.invalidDomain":"Email deve pertencer \xe0s organiza\xe7\xf5es @uniriotec.br ou @edu.unirio.br","user.management.invite.button":"Enviar convite","user.table.headers.status":"Status","user.table.headers.username":"$t(user.name)","user.table.headers.email":"$t(user.email)","user.table.headers.permission.search_docs":"Procurar documentos","user.table.headers.permission.add_docs":"Adicionar documentos","user.table.headers.permission.edit_docs_others":"Editar documentos de outros usu\xe1rios","user.table.headers.permission.delete_docs_others":"Excluir documentos de outros usu\xe1rios","user.table.headers.permission.invite_users":"Convidar usu\xe1rios","user.table.headers.permission.manage_categories":"Gerenciar categorias","user.table.headers.permission.manage_dept_perm":"Gerenciar permiss\xf5es de departamento","user.table.headers.permission.manage_system_perm":"Gerenciar permiss\xf5es de sistema","user.table.headers.permission.manage_departments":"Gerenciar departamentos","user.table.filters.text.username":"Filtrar por nome de usu\xe1rio","user.table.filters.text.email":"Filtrar por email","user.table.filters.boolean.y":"$t(yes)","user.table.filters.boolean.n":"$t(no)","user.table.filters.status.y":"Ativo","user.table.filters.status.n":"Pendente","user.table.headers.buttons.invite":"Convidar usu\xe1rio","user.table.headers.buttons.filter":"Filtrar usu\xe1rios","user.table.headers.buttons.permissions.batch_edit":"Editar permiss\xf5es dos usu\xe1rios","user.table.headers.buttons.permissions.batch_edit.confirm":"Confirmar","user.table.headers.buttons.permissions.batch_edit.cancel":"Cancelar","user.table.filters.buttons.clear":"Limpar todos os filtros","user.table.data.status.y":"Ativo","user.table.data.status.n":"Pendente","user.table.data.buttons.permissions.edit":"Editar permiss\xf5es do usu\xe1rio","user.table.data.buttons.permissions.edit.confirm":"Confirmar","user.table.data.buttons.permissions.edit.cancel":"Cancelar","user.table.data.buttons.user.delete":"Remover usu\xe1rio deste departamento"}}};o.a.use(l.e).init({resources:u,lng:"en-US",keySeparator:!1,interpolation:{escapeValue:!1}});o.a;var d=a(12),m=a.n(d),b=a(17),j=a(7),h="@gedapp-auth-token",p=function(){return localStorage.getItem(h)},O=function(e){return localStorage.setItem(h,e)};function f(e,t){return x.apply(this,arguments)}function x(){return(x=Object(b.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=p())&&(a.headers||(a.headers={}),a.headers.Authorization="Bearer ".concat(n)),e.abrupt("return",fetch("".concat("https://unirio-ged-app.herokuapp.com").concat(t),a));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=Object(s.createContext)();function v(e){var t=e.children,a=Object(s.useState)(p()),r=Object(j.a)(a,2),c=r[0],i=r[1],o=Object(s.useState)(!1),l=Object(j.a)(o,2),u=l[0],d=l[1],x=Object(s.useCallback)((function(){d(!0),i(null),localStorage.removeItem(h),d(!1)}),[]),v=function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,f("/api/auth/google/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.tokenId});case 4:if((a=e.sent).ok){e.next=7;break}throw new Error(a.status);case 7:return e.next=9,a.text();case 9:n=e.sent,O(n),i(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),x();case 17:d(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(g.Provider,{value:{authenticated:null!==c,token:c,authLoading:u,handleAuthentication:v,handleAuthLogout:x},children:t})}var y=Object(s.createContext)();function N(e){var t=e.children,a=Object(s.useContext)(g),r=a.token,c=a.handleAuthLogout,i=Object(s.useState)(),o=Object(j.a)(i,2),l=o[0],u=o[1],d=Object(s.useState)(!1),h=Object(j.a)(d,2),p=h[0],O=h[1],x=Object(s.useCallback)(Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,f("/users/loggedUserInfo",{method:"GET"});case 4:if(t=e.sent,O(!1),t.ok){e.next=8;break}throw new Error(t.status);case 8:return e.t0=u,e.next=11,t.json();case 11:e.t1=e.sent,(0,e.t0)(e.t1),e.next=19;break;case 15:throw e.prev=15,e.t2=e.catch(1),c(),new Error(e.t2);case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),[c]),v=function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,f("/users/".concat(l.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentDepartment:{id:t}})});case 3:if(a=e.sent,O(!1),a.ok){e.next=7;break}throw new Error(a.status);case 7:x();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){!l&&r&&x()}),[l,r,x]),Object(n.jsx)(y.Provider,{value:{user:l,department:null===l||void 0===l?void 0:l.currentDepartment,userLoading:p,checkPermission:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.some((function(e){return l.permissions.includes(e)}))},setLoggedUserInfo:x,changeDepartment:v,logoutUser:function(){O(!0),u(null),c(),O(!1)}},children:t})}var C=a(16),k=a(13),E=a(11),S=a(30);function T(e){var t=e.component,a=Object(S.a)(e,["component"]),r=Object(s.useContext)(y),c=r.user,i=r.logoutUser;return Object(s.useContext)(g).token?c?Object(n.jsx)(k.b,Object(E.a)(Object(E.a)({},a),{},{component:t})):Object(n.jsx)("h1",{children:"Loading User..."}):(c&&i(),Object(n.jsx)(k.a,{to:"/login"}))}var w=a(119),F=a(64),D=a.n(F),_=a(111);function R(){var e=Object(w.a)().t,t=Object(s.useContext)(g),a=t.authLoading,r=t.authenticated,c=t.handleAuthentication,i=t.handleAuthLogout;return a?Object(n.jsx)("h1",{children:"Loading..."}):r?Object(n.jsx)(k.a,{to:"/"}):Object(n.jsx)(_.a,{className:"d-flex align-item justify-content-center",style:{minHeight:"100vh"},children:Object(n.jsxs)("div",{className:"d-flex flex-column align-item justify-content-center",children:[Object(n.jsx)("h1",{children:"UNIRIO GED App"}),Object(n.jsx)("div",{className:"d-flex align-item justify-content-center",children:Object(n.jsx)(D.a,{clientId:"363171374429-j2ucgraghs57fudoi2e8qml1ji1dv4n8.apps.googleusercontent.com",buttonText:e("loginWithGoogle.buttonText"),onSuccess:c,onFailure:function(e,t){i(),console.log("login failed")},cookiePolicy:"single_host_origin"})})]})})}var P=a(15),B=a(116),A=a(118),I=a(115),U="@user_lang",G=a(8),L=a(9);a(91);function M(){var e=Object(w.a)(),t=e.t,a=e.i18n,r=Object(s.useContext)(y),c=r.user,i=r.department,o=r.checkPermission,l=r.changeDepartment,u=r.logoutUser,d=Object(s.useState)(localStorage.getItem(U)),m=Object(j.a)(d,2),b=m[0],h=m[1],p=Object.keys(a.store.data);Object(s.useEffect)((function(){var e;a.changeLanguage(b),e=b||navigator.language||navigator.userLanguage,localStorage.setItem(U,e)}),[a,b]);return Object(n.jsxs)(B.a,{fixed:"top",bg:"dark",variant:"dark",expand:"sm",children:[Object(n.jsx)(B.a.Brand,{children:Object(n.jsxs)(C.b,{to:"/",children:[Object(n.jsx)("img",{height:"28px",alt:"",src:"/unirio-ged-app-frontend/images/logo_unirio.svg",style:{margin:"-6px 6px 0 0"}}),"UNIRIO GED App"]})}),Object(n.jsxs)(A.a,{className:"mr-auto",children:[o("ADD_DOCS","SEARCH_DOCS")&&Object(n.jsxs)(I.a,{title:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(G.a,{icon:L.k}),Object(n.jsx)("span",{children:t("navbar.documents")})]}),children:[o("ADD_DOCS")&&Object(n.jsxs)(C.b,{to:"/documents/",className:"dropdown-item",children:[Object(n.jsx)(G.a,{className:"icon",icon:L.r}),t("navbar.documents.add")]}),o("SEARCH_DOCS")&&Object(n.jsxs)(C.b,{to:"/",className:"dropdown-item",children:[Object(n.jsx)(G.a,{className:"icon",icon:L.t}),t("navbar.documents.search")]})]}),o("MANAGE_CATEGORIES","INVITE_USERS","MANAGE_DEPT_PERM")&&Object(n.jsxs)(I.a,{title:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(G.a,{icon:L.g}),Object(n.jsx)("span",{children:t("navbar.department")})]}),children:[o("MANAGE_CATEGORIES")&&Object(n.jsxs)(C.b,{to:"/categories",className:"dropdown-item",children:[Object(n.jsx)(G.a,{className:"icon",icon:L.v}),t("navbar.department.category")]}),o("INVITE_USERS","MANAGE_DEPT_PERM")&&Object(n.jsxs)(C.b,{to:"/users/department",className:"dropdown-item",children:[Object(n.jsx)(G.a,{className:"icon",icon:L.z}),t("navbar.department.users")]})]}),o("MANAGE_DEPARTMENTS","MANAGE_SYSTEM_PERM")&&Object(n.jsxs)(I.a,{title:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(G.a,{icon:L.g}),Object(n.jsx)("span",{children:t("navbar.system")})]}),children:[o("MANAGE_DEPARTMENTS")&&Object(n.jsxs)(C.b,{to:"/departments",className:"dropdown-item",children:[Object(n.jsx)(G.a,{className:"icon",icon:L.n}),t("navbar.system.department")]}),o("MANAGE_SYSTEM_PERM")&&Object(n.jsxs)(C.b,{to:"/users/system",className:"dropdown-item",children:[Object(n.jsx)(G.a,{className:"icon",icon:L.z}),t("navbar.system.users")]})]})]}),Object(n.jsx)(B.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsxs)(B.a.Collapse,{id:"basic-navbar-nav",children:[Object(n.jsx)(A.a,{className:"ml-auto",children:Object(n.jsxs)("div",{className:"nav-link menu-user-box",children:[Object(n.jsx)("span",{"data-tip":null===c||void 0===c?void 0:c.email,children:"".concat(null===c||void 0===c?void 0:c.firstName," ").concat(null===c||void 0===c?void 0:c.surname)}),Object(n.jsx)(P.a,{}),Object(n.jsx)(G.a,{icon:L.y})]})}),Object(n.jsx)(A.a,{children:Object(n.jsx)(I.a,{title:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{children:t("navbar.language")}),Object(n.jsx)(G.a,{icon:L.o})]}),children:p.map((function(e,a){return Object(n.jsxs)(I.a.Item,{onClick:function(){var t;(t=e)!==b&&h(t)},className:"".concat(b===e?"active":""),children:[Object(n.jsx)("img",{className:"icon flag",alt:t("language.".concat(e,".fullName")),src:"/unirio-ged-app-frontend/images/".concat(e,".svg")}),Object(n.jsx)("span",{children:t("navbar.language.".concat(e,".shortName"))})]},a)}))})}),Object(n.jsx)(A.a,{children:Object(n.jsx)(I.a,{title:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("span",{children:"".concat(t("navbar.department"),": ").concat(null===i||void 0===i?void 0:i.acronym)}),Object(n.jsx)(G.a,{icon:L.j})]}),children:(c?c.departments:[]).map((function(e){var t;return Object(n.jsx)(I.a.Item,{onClick:function(){l(e.id)},className:"".concat(e.id===(null===c||void 0===c||null===(t=c.currentDepartment)||void 0===t?void 0:t.id)?"active":""),children:"".concat(e.name," (").concat(e.acronym,")")},e.id)}))})}),Object(n.jsx)(A.a,{children:Object(n.jsxs)(A.a.Link,{onClick:u,children:[Object(n.jsx)("span",{children:t("navbar.logout")}),Object(n.jsx)(G.a,{icon:L.u})]})})]})]})}var q=a(32),$=a(25),z=a(117),V=a(68),H=a(36),Y=(a(94),function(e){var t=e.className,a=void 0===t?"":t,s=e.name,r=e.label,c=e.min,i=e.max,o=e.value,l=e.onChange;return Object(n.jsxs)("div",{className:"custom-date-picker ".concat(a),children:[r?Object(n.jsx)(z.a.Label,{children:r}):"",Object(n.jsxs)("div",{className:"date-wrapper",children:[Object(n.jsx)(z.a.Control,{type:"date",name:s,required:!0,onChange:function(e){return l(s,e.target.value)},min:c,max:i,value:o}),Object(n.jsx)("span",{className:"clear-input",onClick:function(){return l(s,"")},children:Object(n.jsx)(G.a,{icon:H.c})})]})]})}),J=(a(95),function(e){var t=e.className,a=e.label,s=e.name,r=e.placeholder,c=e.value,i=e.onChange,o=e.options,l=e.noOptionsLabel,u=e.textProperty,d=e.idProperty,m=void 0===d?"id":d,b=e.required,j=e.isValid,h=e.isInvalid,p=e.children;return Object(n.jsxs)("div",{className:"".concat(t," select-wrapper"),children:[a?Object(n.jsx)(z.a.Label,{children:a}):"",Object(n.jsxs)(z.a.Control,{as:"select",custom:!0,required:b,name:s,onChange:function(e){return i(s,e.target.value)},isValid:j,isInvalid:h,value:c,children:[Object(n.jsx)("option",{style:{display:o.length?"none":""},children:o.length?r:l},0),o.length&&o.sort((function(e,t){return e[u].localeCompare(t[u])})).map((function(e){return Object(n.jsx)("option",{value:e[m],children:e[u]},e[m])}))]}),Object(n.jsx)("input",{type:"checkbox",className:"select-has-value",checked:c&&c>0,readOnly:!0}),Object(n.jsx)("span",{className:"clear-input",onClick:function(){return i(s,0)},children:Object(n.jsx)(G.a,{icon:H.c})}),p]})}),W=function(e){var t=e.className,a=void 0===t?"":t,r=e.label,c=e.onChange,i=e.isValid,o=e.isInvalid,l=e.validationMessage,u=e.value,d=Object(w.a)().t,m=Object(s.useContext)(y).department,b=Object(s.useState)([]),h=Object(j.a)(b,2),p=h[0],O=h[1];return Object(s.useEffect)((function(){f("/categories",{method:"GET"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return O(e)}))}),[m]),Object(n.jsx)(J,{className:a,label:r,name:"category",isValid:i,isInvalid:o,onChange:c,options:p,placeholder:d("document.form.category.choose"),noOptionsLabel:d("document.form.category.zeroOptions"),textProperty:"fullName",value:u,children:o?Object(n.jsx)(z.a.Control.Feedback,{type:"invalid",children:l}):""})},K=a(112),Q=function(e){var t=e.disabled,a=e.value,s=e.onChange,r=e.onSubmit;return Object(n.jsxs)(K.a,{children:[Object(n.jsx)(K.a.Prepend,{children:Object(n.jsx)(K.a.Text,{id:"inputGroupPrepend",children:Object(n.jsx)(G.a,{icon:L.t})})}),Object(n.jsx)(z.a.Control,{id:"textInput",disabled:t,onChange:function(e){return s("text",e.target.value)},onKeyPress:function(e){return t||"Enter"!==e.code?null:r(e)},value:a,type:"text"})]})},Z=function(e){var t=e.label,a=e.onChange,s=e.value;return Object(n.jsx)(W,{className:"custom-input-group category-filter",label:t,onChange:a,value:s})},X=function(e){var t=e.labelFromDate,a=e.labelUntilDate,s=e.onChange,r=e.minDateValue,c=e.maxDateValue;return Object(n.jsxs)("div",{className:"custom-input-group date-filter",children:[Object(n.jsx)(Y,{name:"minDate",label:t,onChange:s,max:c,value:r}),Object(n.jsx)(Y,{name:"maxDate",label:a,onChange:s,min:r,value:c})]})},ee=function(e){var t=e.label,a=e.value,s=e.onClick;return Object(n.jsx)("div",{className:"custom-input-group user-filter",children:Object(n.jsx)(z.a.Check,{type:"checkbox",name:"myDocuments",custom:!0,id:"filterMyDocuments",onClick:function(e){return s("myDocuments",e.target.value)},label:t,value:a})})};a(96);function te(e){var t=e.isSearching,a=e.onSearch,r=Object(w.a)().t,c=Object(s.useContext)(y).department,i=Object(s.useState)(!1),o=Object(j.a)(i,2),l=o[0],u=o[1],d=Object(s.useState)({text:"",minDate:"",maxDate:"",category:"",myDocuments:!1}),m=Object(j.a)(d,2),b=m[0],h=m[1],p=function(e,t){"category"===e&&"-1"===t?t=0:"myDocuments"===e&&(t="false"===t),h(Object(E.a)(Object(E.a)({},b),{},Object($.a)({},e,t)))},O=function(e){if(e.preventDefault(),(r=b).text.trim().length>0||r.category||r.minDate||r.maxDate||r.myDocuments){var t=b.text,n=Object(S.a)(b,["text"]),s=t.trim();a(s,n),h(Object(E.a)(Object(E.a)({},b),{},{text:s}))}else window.alert("fill at least one input");var r};return Object(s.useEffect)((function(){return h((function(e){return Object(E.a)(Object(E.a)({},e),{},{category:0})}))}),[c]),Object(n.jsxs)(z.a,{className:"search-bar-form",noValidate:!0,onSubmit:O,children:[Object(n.jsx)(z.a.Group,{className:"search-form-group text-input-group",children:Object(n.jsx)(Q,{value:b.text,onChange:p,onSubmit:O})}),Object(n.jsxs)(z.a.Group,{className:"search-form-group filters-group ".concat(l?"":"hide"),children:[Object(n.jsx)(Z,{label:r("searchBar.filters.category"),onChange:p,value:b.category,placeholder:r("document.form.category.choose"),unselectOptionLabel:r("none")}),Object(n.jsx)(X,{labelFromDate:r("searchBar.filters.date.from"),labelUntilDate:r("searchBar.filters.date.until"),onChange:p,minDateValue:b.minDate,maxDateValue:b.maxDate}),Object(n.jsx)(ee,{label:r("searchBar.filters.registeredByMe"),onClick:p,value:b.myDocuments})]}),Object(n.jsxs)(z.a.Group,{className:"search-form-group search-actions-group",children:[Object(n.jsx)("div",{className:"search-filters-toggle-box",children:Object(n.jsxs)(V.a,{className:"color-blue",onClick:function(){return u(!l)},variant:"link",children:["".concat(r("searchBar.".concat(l?"less":"more","FiltersButton"))," (").concat(Object.entries(b).filter((function(e){var t=Object(j.a)(e,2),a=t[0],n=t[1];return"text"!==a&&n})).length,")"),Object(n.jsx)(G.a,{className:"append",icon:l?L.b:L.a})]})}),Object(n.jsx)(V.a,{className:"search-btn border-color-blue bg-color-blue",disabled:t,variant:"primary",type:"submit",children:t?Object(n.jsx)(G.a,{icon:L.f,className:"faSpin"}):r("searchBar.searchButton")})]})]})}var ae=a(120);function ne(e){var t=e.numPages,a=e.activePage,r=e.onSearch,c=Object(s.useState)([]),i=Object(j.a)(c,2),o=i[0],l=i[1];return Object(s.useEffect)((function(){var e=[],s=a-2,c=a+2;c>t&&(c=t,s=t-4),s<=1&&(s=1),e.push(Object(n.jsx)(ae.a.First,{onClick:function(){return r(1)},disabled:1===a},"first")),e.push(Object(n.jsx)(ae.a.Prev,{onClick:function(){return r(a-1)},disabled:1===a},"-"));for(var i=function(t){e.push(Object(n.jsx)(ae.a.Item,{onClick:function(){t!==a&&r(t)},active:t===a,children:t},t))},o=s;o<=c;o++)i(o);e.push(Object(n.jsx)(ae.a.Next,{onClick:function(){return r(a+1)},disabled:a===t},"+")),e.push(Object(n.jsx)(ae.a.Last,{onClick:function(){return r(t)},disabled:a===t},"last")),l(e)}),[t,a,r]),Object(n.jsx)(ae.a,{className:"tablePagination justify-content-end",children:o})}var se=a(113),re=function(e){var t;switch(e=e||""){case"SUCCESS":t="success";break;case"FAILED":t="danger";break;case"PROCESSING":t="info";break;default:case"NOT_PROCESSED":t="secondary"}return Object(n.jsx)(se.a,{className:"capitalize",variant:t,children:e.toLowerCase()})},ce=a(114);a(97);function ie(e){var t=e.refProp,a=e.documents,s=e.currentPage,r=e.numPages,c=e.deleteDocument,i=e.onSearch,o=e.expandResult,l=Object(w.a)().t,u=function(e){switch(e){case"application/pdf":return L.l;default:case"text/plain":return L.k}},d=function(e,t,a){f("/documents/".concat(e,"/download"),{method:"GET"}).then((function(e){if(e.ok)return e.blob()})).then((function(e){var n=window.URL.createObjectURL(e);if(a){var s=document.createElement("a");s.download=t,s.target="_blank",s.href=n,s.click()}else window.open(n,"_blank");window.URL.revokeObjectURL(n)}))};return Object(n.jsxs)("div",{ref:t,className:"docs-table",children:[Object(n.jsxs)(ce.a,{striped:!0,bordered:!0,hover:!0,children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"center",children:l("table.actions")})}),Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"center",children:l("document.title")})}),Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"center",children:l("document.summary")})}),Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"center",children:l("document.category")})}),Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"center",children:l("document.date")})}),Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"center",children:l("document.status")})}),Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"center",children:l("document.registeredBy")})})]})}),Object(n.jsx)("tbody",{children:a.map((function(e){return Object(n.jsxs)("tr",{className:e.expand?"":"truncated",children:[Object(n.jsx)("td",{className:"actions",children:Object(n.jsxs)("div",{className:"center",children:[Object(n.jsx)("span",{onClick:function(){return o(e.id)},children:Object(n.jsx)(G.a,{className:"icon",icon:e.expand?H.b:H.a})}),Object(n.jsx)("span",{onClick:function(){return d(e.id,e.fileName,!1)},children:Object(n.jsx)(G.a,{className:"icon",icon:u(e.mediaType)})}),Object(n.jsx)("span",{onClick:function(){return d(e.id,e.fileName,!0)},children:Object(n.jsx)(G.a,{className:"icon",icon:L.h})}),Object(n.jsx)(C.b,{to:"/documents/".concat(e.id),children:Object(n.jsx)(G.a,{className:"icon",icon:L.i})}),Object(n.jsx)("span",{onClick:function(){return c(e.id)},children:Object(n.jsx)(G.a,{className:"icon",icon:L.x})})]})}),Object(n.jsx)("td",{className:"title",children:Object(n.jsx)("p",{children:e.title})}),Object(n.jsx)("td",{className:"summary",children:Object(n.jsx)("p",{children:e.summary})}),Object(n.jsx)("td",{className:"category",children:Object(n.jsx)("p",{className:"center",children:e.fullCategoryHierarchy})}),Object(n.jsx)("td",{className:"date",children:Object(n.jsx)("p",{className:"center",children:e.formattedDate})}),Object(n.jsx)("td",{className:"status",children:Object(n.jsx)("p",{className:"center",children:re(e.status)})}),Object(n.jsx)("td",{className:"user",children:Object(n.jsx)("p",{className:"center",children:e.registeredBy})})]},e.id)}))})]}),Object(n.jsx)(ne,{numPages:r,activePage:s,onSearch:i})]})}var oe=function(e){var t=e.currentQueryString,a=Object(w.a)().t;return Object(n.jsxs)("div",{className:"no-result-message-box",children:[Object(n.jsxs)("p",{children:[a("search.noResultFound.message.p1"),t.length?a("search.noResultFound.message.p2"):"",Object(n.jsx)("b",{style:{display:t.length?"inline-block":"none"},children:t}),a("search.noResultFound.message.p3")]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{style:{marginBottom:0},children:a("search.noResultFound.searchTips.title")}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:a("search.noResultFound.searchTips.item1")}),Object(n.jsx)("li",{children:a("search.noResultFound.searchTips.item2")}),Object(n.jsx)("li",{children:a("search.noResultFound.searchTips.item3")}),Object(n.jsx)("li",{children:a("search.noResultFound.searchTips.item4")})]})]})]})};a(98);function le(){var e=Object(w.a)().t,t=Object(s.useRef)(null),a=Object(s.useContext)(y).department,r=Object(s.useState)(!1),c=Object(j.a)(r,2),i=c[0],o=c[1],l=Object(s.useState)(!1),u=Object(j.a)(l,2),d=u[0],m=u[1],b=Object(s.useState)([]),h=Object(j.a)(b,2),p=h[0],O=h[1],x=Object(s.useState)(""),g=Object(j.a)(x,2),v=g[0],N=g[1],C=Object(s.useState)(""),k=Object(j.a)(C,2),E=k[0],S=k[1],T=Object(s.useState)(1),F=Object(j.a)(T,2),D=F[0],_=F[1],R=Object(s.useState)(10),P=Object(j.a)(R,1)[0],B=Object(s.useState)(0),A=Object(j.a)(B,2),I=A[0],U=A[1];return Object(s.useEffect)((function(){O([]),o(null),m(!1)}),[a]),Object(n.jsxs)("div",{className:"search-page",children:[Object(n.jsx)("div",{className:"search-result ".concat(d?"active":""),children:Object(n.jsx)("div",{children:d&&p.length?Object(n.jsx)(ie,{refProp:t,documents:p,currentPage:D,numPages:Math.ceil(I/P),deleteDocument:function(e){f("/documents/".concat(e),{method:"DELETE"}).then((function(t){t.ok&&(window.alert("Document '".concat(e,"' deleted")),O(p.filter((function(t){return t.id!==e}))))}))},onSearch:function(a){o(!0),f("".concat(v,"&page=").concat(a,"&pageSize=").concat(P),{method:"GET"}).then((function(e){if(e.ok)return e.json();window.alert("Error searching documents")})).then((function(e){e&&(_(e.page||0),U(e.totalHits||0),O(e.results||[]),m(!0),e.totalHits&&t.current.scrollIntoView({block:"start",behavior:"smooth"}))})).catch((function(t){m(!1),window.alert(e("search.error"))})).finally((function(){return o(!1)}))},expandResult:function(e){var t=p.find((function(t){return t.id===e}));t.expand=!t.expand,O(Object(q.a)(p))}}):d&&!p.length?Object(n.jsx)(oe,{currentQueryString:E}):""})}),Object(n.jsx)("div",{className:"search-bar",children:Object(n.jsx)(te,{isSearching:i,onSearch:function(a,n){S(a),o(!0);var s="/documents/search?";for(var r in n){var c=n[r];c&&(s+="".concat(r,"=").concat(encodeURI(c),"&"))}f(s+="q=".concat(encodeURI(a)),{method:"GET"}).then((function(e){if(e.ok)return N(s),e.json();window.alert("Error searching documents")})).then((function(e){e&&(_(e.page||0),U(e.totalHits||0),O(e.results||[]),m(!0),e.totalHits&&t.current.scrollIntoView({block:"start",behavior:"smooth"}))})).catch((function(t){m(!1),window.alert(e("search.error"))})).finally((function(){return o(!1)}))}})}),Object(n.jsx)("div",{className:"search-header",children:Object(n.jsx)("h1",{children:"UNIRIO GED App"})})]})}a(59);function ue(){var e=Object(w.a)().t;return Object(n.jsxs)("div",{className:"page-not-found",children:[Object(n.jsx)("h1",{children:e("pageNotFound.title")}),Object(n.jsx)("h2",{children:e("pageNotFound.subtitle")}),Object(n.jsx)("p",{className:"message",children:e("pageNotFound.message")}),Object(n.jsx)("a",{href:"/",children:e("pageNotFound.home")}),Object(n.jsx)("p",{className:"contactUs",children:e("pageNotFound.contactUs")})]})}function de(){return Object(n.jsx)("div",{className:"page-not-found",children:Object(n.jsx)("h2",{children:"MANAGE CATEGORIES"})})}var me=Object(s.createContext)(),be=function(e){var t=e.children,a=Object(s.useContext)(y).department,r=Object(s.useState)([]),c=Object(j.a)(r,2),i=c[0],o=c[1],l=function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/users",{method:"GET"});case 2:if((t=e.sent).ok){e.next=5;break}throw Error();case 5:return e.t0=o,e.next=8,t.json();case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){return l()}),[a]);var u=function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/users/invite",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(t)});case 2:if((a=e.sent).ok){e.next=5;break}throw Error(a.statusText);case 5:return e.next=7,a.json();case 7:n=e.sent,o([].concat(Object(q.a)(i),[n]));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/users/".concat(t),{method:"DELETE"});case 2:if((a=e.sent).ok){e.next=5;break}throw Error(a.statusText);case 5:o(Object(q.a)(i.filter((function(e){return e.id!==t}))));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(me.Provider,{value:{users:i,addNewUser:u,loadUsers:l,removeUser:d},children:t})},je=a(70),he=function(e,t){switch(e){case"file":return(n=t)?n.size?n.name.match(/^.*?\.(doc|docx|docm|eml|epub|odf|odt|pdf|rtf|rtx|txt|text)$/gi)?"":"invalidFileType":"emptyContentFile":"fileRequired";case"title":return t.length?"":"titleRequired";case"category":return t<=0?"categoryRequired":"";case"email":return(a=t).match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/g)?["@edu.unirio.br","@uniriotec.br"].some((function(e){return a.includes(e)}))?"":"invalidDomain":"invalidEmailFormat";default:return""}var a,n},pe=function(e){var t=e.disabled,a=(e.hideRow,Object(w.a)().t),r=Object(s.useContext)(me).addNewUser,c=Object(s.useState)(""),i=Object(j.a)(c,2),o=i[0],l=i[1],u=Object(s.useState)(),d=Object(j.a)(u,2),m=d[0],b=d[1];Object(s.useEffect)((function(){return b(he("email",o.trim().toLowerCase()))}),[o]);var h=function(e){return!m&&r(e.trim().toLowerCase())&&l("")};return Object(n.jsxs)("tr",{className:"invite-user-row",children:[Object(n.jsx)("td",{}),Object(n.jsx)("td",{colSpan:8,children:Object(n.jsxs)(z.a.Group,{className:"email-textbox",children:[Object(n.jsx)(z.a.Control,{disabled:t,placeholder:a("user.management.invite.placeholder"),onChange:function(e){return l(e.target.value.replace(/\s+/g,""))},onKeyPress:function(e){return"Enter"===e.code?h(o):null},isValid:o.length>0&&!m,isInvalid:o.length>0&&m,value:o,type:"email",size:"sm"}),Object(n.jsx)(z.a.Control.Feedback,{type:"valid"}),Object(n.jsx)(z.a.Control.Feedback,{type:"invalid",children:a("user.management.invite.validation.".concat(m))})]})}),Object(n.jsx)("td",{children:t?Object(n.jsx)(n.Fragment,{}):Object(n.jsx)("div",{className:"actions center",children:Object(n.jsxs)("span",{"data-for":"sendUserInviteButtonTooltip","data-tip":a("user.management.invite.button"),onClick:function(){return h(o)},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.p}),Object(n.jsx)(P.a,{id:"sendUserInviteButtonTooltip"})]})})})]},"0")},Oe=function(e){var t=e.disabled,a=e.filterType,s=e.value,r=e.onCheck,c=e.labelYes,i=e.labelNo,o=Object(w.a)().t,l=function(e){var c=e.label,i=e.checkBoolType;return Object(n.jsx)(z.a.Check,{custom:!0,type:"checkbox",id:"".concat(a,"-").concat(i),label:c||o("user.table.filters.boolean.".concat(i)),disabled:t||s&&s!==i,onChange:function(e){return r(a,e.currentTarget.checked?i:"")},checked:s===i})};return Object(n.jsx)("div",{className:"center",children:Object(n.jsxs)("div",{className:"boolean-filter",children:[Object(n.jsx)(l,{checkBoolType:"y",label:c}),Object(n.jsx)(l,{checkBoolType:"n",label:i})]})})},fe=function(e){var t=e.disabled,a=e.filterType,s=e.value,r=e.onChange,c=Object(w.a)().t;return Object(n.jsx)("div",{className:"top-margin",children:Object(n.jsx)(z.a.Control,{type:"text",disabled:t,onChange:function(e){return r(a,e.target.value)},placeholder:c("user.table.filters.text.".concat(a)),value:s,size:"sm"})})},xe=function(e){var t=e.disabled,a=e.filterMap,s=e.filterUsers,r=e.permissions,c=Object(w.a)().t;return Object(n.jsxs)("tr",{className:"filter-row",children:[Object(n.jsx)("td",{children:Object(n.jsx)(Oe,{disabled:t,filterType:"status",value:a.status,onCheck:function(e,t){return s(e,t)},labelYes:c("user.table.filters.status.y"),labelNo:c("user.table.filters.status.n")})}),Object(n.jsx)("td",{children:Object(n.jsx)(fe,{disabled:t,filterType:"email",value:a.email,onChange:function(e,t){return s(e,t)}})}),Object(n.jsx)("td",{children:Object(n.jsx)(fe,{disabled:t,filterType:"username",value:a.username,onChange:function(e,t){return s(e,t)}})}),r.map((function(e){return Object(n.jsx)("td",{children:Object(n.jsx)(Oe,{disabled:t,filterType:e,value:a[e],onCheck:function(e,t){return s(e,t)}})},"".concat(e.toLowerCase(),"-filter"))})),Object(n.jsx)("td",{children:t?Object(n.jsx)(n.Fragment,{}):Object(n.jsx)("div",{className:"actions spaced top-margin",children:Object(n.jsxs)("span",{"data-for":"clearFilterTooltip","data-tip":c("user.table.filters.buttons.clear"),onClick:function(){return s()},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.w}),Object(n.jsx)(P.a,{id:"clearFilterTooltip"})]})})})]},"0")},ge=(a(99),function(e){var t=e.permissions,a=e.disableDelete,r=void 0!==a&&a,c=Object(w.a)().t,i=Object(s.useContext)(y),o=i.checkPermission,l=i.department,u=i.user,d=i.setLoggedUserInfo,h=Object(s.useContext)(me),p=h.users,O=h.removeUser,x=Object(s.useState)([]),g=Object(j.a)(x,2),v=g[0],N=g[1],C=Object(s.useState)(!1),k=Object(j.a)(C,2),T=k[0],F=k[1],D=Object(s.useState)(!1),_=Object(j.a)(D,2),R=_[0],B=_[1],A=Object(s.useState)(!1),I=Object(j.a)(A,2),U=I[0],M=I[1],V=Object(s.useState)([]),H=Object(j.a)(V,2),Y=H[0],J=H[1],W=Object(s.useState)({}),K=Object(j.a)(W,2),Q=K[0],Z=K[1],X=Object(s.useState)(10),ee=Object(j.a)(X,1)[0],te=Object(s.useState)(1),ae=Object(j.a)(te,2),se=ae[0],re=ae[1];Object(s.useEffect)((function(){return J([])}),[l]),Object(s.useEffect)((function(){if(p.length&&t.length){var e=function(e,t){return!t||e.toLowerCase().includes(t)},a=(se-1)*ee,n=se*ee<p.length?se*ee:p.length;J(p.filter((function(a){return n=a.fullName.trim().length,(!(s=Q.status)||"y"===s&&n||"n"===s&&!n)&&e(a.fullName,Q.username)&&e(a.email,Q.email)&&t.every((function(e){return t=e,n=a.permissions,!Q[t]||"y"===Q[t]&&n&&n.includes(t)||"n"===Q[t]&&(!n||!n.includes(t));var t,n}));var n,s})).sort((function(e,t){return e.email.localeCompare(t.email)})).slice(a,n))}}),[p,Q,t,se,ee]);var ie=function(e,t){return Z(e?t?Object(E.a)(Object(E.a)({},Q),{},Object($.a)({},e,t)):function(){Q[e];return Object(S.a)(Q,[e].map(je.a))}:{})},oe=function(){F(!T),N([])},le=function(){var e=Object(b.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/users/".concat(t,"/permission"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.map((function(e){return e.toUpperCase()})))});case 2:if(e.sent.ok){e.next=5;break}throw Error();case 5:N(v.filter((function(e){return e!==t}))),t===(null===u||void 0===u?void 0:u.id)&&d();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(){var e=Object(b.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},t.map((function(e){return a[e.id]=e.permissions})),e.next=4,f("/users/permission",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if(e.sent.ok){e.next=7;break}throw Error();case 7:F(!1),t.some((function(e){return e.id===(null===u||void 0===u?void 0:u.id)}))&&d();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"users-table-box",children:[Object(n.jsxs)(ce.a,{id:"usersTable",striped:!0,size:"sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{width:"104px",children:Object(n.jsx)("div",{className:"center",children:c("user.table.headers.status")})}),Object(n.jsx)("th",{width:"240px",children:Object(n.jsx)("div",{children:c("user.table.headers.email")})}),Object(n.jsx)("th",{width:"280px",children:Object(n.jsx)("div",{children:c("user.table.headers.username")})}),t.map((function(e){return Object(n.jsx)("th",{children:Object(n.jsx)("div",{className:"center text-bottom",children:c("user.table.headers.permission.".concat(e.toLowerCase()))})},"".concat(e))})),Object(n.jsx)("th",{width:"120px",children:Object(n.jsx)("div",{className:"actions spaced",children:T?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("span",{"data-for":"saveBatchEditTooltip","data-tip":c("user.table.headers.buttons.permissions.batch_edit.confirm"),onClick:function(){return ue(Y)},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.e}),Object(n.jsx)(P.a,{id:"saveBatchEditTooltip"})]}),Object(n.jsxs)("span",{"data-for":"cancelBatchEditTooltip","data-tip":c("user.table.headers.buttons.permissions.batch_edit.cancel"),onClick:function(){return oe()},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.c}),Object(n.jsx)(P.a,{id:"cancelBatchEditTooltip"})]})]}):Object(n.jsxs)(n.Fragment,{children:[o("INVITE_USERS")?Object(n.jsxs)("span",{className:"icon ".concat(U?"active":""),"data-for":"inviteUserTooltip","data-tip":c("user.table.headers.buttons.invite"),onClick:function(){R&&B(!1),M(!U)},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.A}),Object(n.jsx)(P.a,{id:"inviteUserTooltip"})]}):Object(n.jsx)(n.Fragment,{}),o("MANAGE_DEPT_PERM")?Object(n.jsxs)("span",{"data-for":"batchEditUserPermissionsTooltip","data-tip":c("user.table.headers.buttons.permissions.batch_edit"),onClick:function(){return oe()},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.i}),Object(n.jsx)(P.a,{id:"batchEditUserPermissionsTooltip"})]}):Object(n.jsx)(n.Fragment,{}),Object(n.jsxs)("span",{className:"icon ".concat(R?"active":""),"data-for":"filterTableTooltip","data-tip":c("user.table.headers.buttons.filter"),onClick:function(){U&&M(!1),R&&ie(),B(!R)},children:[Object(n.jsx)(P.a,{id:"filterTableTooltip"}),Object(n.jsx)(G.a,{className:"icon",icon:L.m}),Object(n.jsx)("span",{className:"activeFilterCount",children:Object.keys(Q).length?"(".concat(Object.keys(Q).length,")"):""})]})]})})})]})}),Object(n.jsxs)("tbody",{children:[R?Object(n.jsx)(xe,{filterMap:Q,filterUsers:ie,permissions:t,disabled:T||v.length}):"",U?Object(n.jsx)(pe,{disabled:T||v.length}):"",Y.map((function(e){var a=!T&&!v.includes(e.id);return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("div",{className:"center",children:Object(n.jsxs)("span",{"data-for":"user".concat(e.id,"StatusTooltip"),"data-tip":e.fullName.trim().length?c("user.table.data.status.y"):c("user.table.data.status.n"),children:[e.fullName.trim().length?Object(n.jsx)(G.a,{className:"icon",icon:L.d}):Object(n.jsx)(G.a,{className:"icon",icon:L.s}),Object(n.jsx)(P.a,{id:"user".concat(e.id,"StatusTooltip")})]})})}),Object(n.jsx)("td",{children:Object(n.jsx)("div",{children:e.email})}),Object(n.jsx)("td",{children:Object(n.jsx)("div",{children:e.fullName})}),t.map((function(t){return Object(n.jsx)("td",{children:Object(n.jsx)("div",{className:"center",children:Object(n.jsx)(z.a.Check,{className:"check-input",type:"checkbox",id:"".concat(t,"-").concat(e.id),disabled:a,onChange:function(a){return function(e,t,a){var n=e.permissions||[];e.permissions=a?[].concat(Object(q.a)(n),[t]):n.filter((function(e){return e!==t}))}(e,t,a.currentTarget.checked)},defaultChecked:(null===e||void 0===e?void 0:e.permissions)&&e.permissions.includes(t)})})},"".concat(t,"-").concat(e.id))})),Object(n.jsx)("td",{children:Object(n.jsx)("div",{className:"actions spaced",children:T?Object(n.jsx)(n.Fragment,{}):a?Object(n.jsxs)(n.Fragment,{children:[o("MANAGE_DEPT_PERM")?Object(n.jsxs)("span",{"data-for":"editUser".concat(e.id,"PermissionButtonTooltip"),"data-tip":c("user.table.data.buttons.permissions.edit"),onClick:function(){return t=e.id,N([].concat(Object(q.a)(v),[t]));var t},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.q}),Object(n.jsx)(P.a,{id:"editUser".concat(e.id,"PermissionButtonTooltip")})]}):Object(n.jsx)(n.Fragment,{}),!r&&Object(n.jsxs)("span",{"data-for":"deleteUser".concat(e.id,"ButtonTooltip"),"data-tip":c("user.table.data.buttons.user.delete"),onClick:function(){return function(e){O(e.id)}(e)},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.x}),Object(n.jsx)(P.a,{id:"deleteUser".concat(e.id,"ButtonTooltip")})]})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("span",{"data-for":"saveUser".concat(e.id,"PermissionsEditTooltip"),"data-tip":c("user.table.data.buttons.permissions.edit.confirm"),onClick:function(){return le(e.id,e.permissions)},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.e}),Object(n.jsx)(P.a,{id:"saveUser".concat(e.id,"PermissionsEditTooltip")})]}),Object(n.jsxs)("span",{"data-for":"cancelUser".concat(e.id,"PermissionsEditTooltip"),"data-tip":c("user.table.data.buttons.permissions.edit.cancel"),onClick:function(){return t=e.id,N(v.filter((function(e){return e!==t})));var t},children:[Object(n.jsx)(G.a,{className:"icon",icon:L.c}),Object(n.jsx)(P.a,{id:"cancelUser".concat(e.id,"PermissionsEditTooltip")})]})]})})})]},e.id)}))]})]}),Object(n.jsx)("br",{}),Object(n.jsx)(ne,{numPages:Math.ceil(p.length/ee),activePage:se,onSearch:function(e){return re(e)}})]})});a(100);function ve(e){var t=e.permissionType,a=Object(w.a)().t,r=Object(s.useState)([]),c=Object(j.a)(r,2),i=c[0],o=c[1],l=Object(s.useCallback)(Object(b.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/permissions/".concat(t),{method:"GET"});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.t0=o,e.next=7,a.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)}))),[t]);return Object(s.useEffect)((function(){return l()}),[l]),Object(n.jsx)(be,{children:Object(n.jsxs)("div",{className:"manage-users",children:[Object(n.jsx)("h1",{children:a("user.management.title")}),Object(n.jsx)(ge,{permissions:i,disableDelete:!0})]})})}var ye=a(69),Ne=(a(101),function(){var e,t=Object(w.a)().t,a=Object(k.g)().docId,r=Object(s.useContext)(y),c=r.user,i=r.department,o=r.checkPermission,l=Object(s.useState)(null),u=Object(j.a)(l,2),d=u[0],m=u[1],b=Object(s.useState)({}),h=Object(j.a)(b,2),p=h[0],O=h[1],x=Object(s.useMemo)((function(){return{title:"",summary:"",category:0,date:(new Date).toISOString().split("T")[0],file:void 0}}),[]),g=Object(s.useState)(x),v=Object(j.a)(g,2),N=v[0],C=v[1];Object(s.useEffect)((function(){d&&m(null)}),[d]),Object(s.useEffect)((function(){return C((function(e){return Object(E.a)(Object(E.a)({},e),{},{category:0})}))}),[i]),Object(s.useEffect)((function(){a&&a!==N.id?f("/documents/".concat(a),{method:"GET"}).then((function(e){if(e.ok)return e.json();m("/404")})).then((function(e){e&&C(Object(E.a)(Object(E.a)({},e),{},{file:{name:e.fileName,size:-1}}))})):!a&&N.id?(C(x),O({})):N.tenant&&N.tenant!==i.acronym.toLowerCase()&&m("/documents")}),[a,N.id,N.tenant,i,x]);var T=function(e,t){O(Object(E.a)(Object(E.a)({},p),{},Object($.a)({},e,he(e,t)))),C(Object(E.a)(Object(E.a)({},N),{},Object($.a)({},e,t)))},F=function(e){var t=N,a=p,n=e.target.name,s=e.target.value;if("uploadFile"===n){var r=e.target.files;if(!r.length)return;if(n="file",s=r[0],!N.title){var c=r[0].name.replace(/\.\w+?$/g,"");t=Object(E.a)(Object(E.a)({},t),{},{title:c}),a=Object(E.a)(Object(E.a)({},a),{},{title:he("title",c)})}}O(Object(E.a)(Object(E.a)({},a),{},Object($.a)({},n,he(n,s)))),C(Object(E.a)(Object(E.a)({},t),{},Object($.a)({},n,s)))},D=function(){var e=N.file,t=Object(S.a)(N,["file"]);t=Object(E.a)(Object(E.a)({},t),{},{tenant:i.acronym.toLowerCase(),registeredBy:c.id,registeredAt:(new Date).toISOString()}),N.id&&N.file.name===N.fileName&&-1===N.file.size&&(e=void 0),_(t,e,!!N.id)},_=function(e,t,n){var s=new FormData;s.append("file",t),s.append("document",new Blob([JSON.stringify(e)],{type:"application/json"})),f("/documents".concat(n?"/".concat(a):""),{method:n?"PATCH":"POST",headers:{Accept:"application/json"},body:s}).then((function(e){if(e.ok)return e.json()})).then((function(e){e&&m("/documents/".concat(e.id))}))};return d?Object(n.jsx)(k.a,{to:d}):!a&&!o("ADD_DOCS")||a&&N.registeredBy!==c.id&&!o("EDIT_DOCS_OTHERS")?Object(n.jsx)("div",{children:"Unauthorized page here"}):Object(n.jsx)("div",{className:"document-details-page",children:Object(n.jsxs)(z.a,{className:"document-form",noValidate:!0,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),function(e,t){var a={};return Object.entries(e).forEach((function(e){var t=Object(j.a)(e,2),n=t[0],s=t[1];return a[n]=he(n,s)})),t&&t(a),Object.values(a).every((function(e){return!e}))}(N,O)&&D()},children:[Object(n.jsx)("h1",{children:t("document.form.".concat(a?"edit":"add",".title"))}),Object(n.jsx)(z.a.Row,{children:Object(n.jsxs)(z.a.Group,{as:ye.a,controlId:"docForm.fileName",children:[Object(n.jsx)(z.a.Label,{children:t("document.form.file")}),Object(n.jsxs)(z.a.File,{id:"doc",custom:!0,children:[Object(n.jsx)(z.a.File.Input,{name:"uploadFile",required:!0,onChange:F,isInvalid:p.file}),Object(n.jsx)(z.a.File.Label,{"data-browse":t("document.form.file.choose"),children:(null===(e=N.file)||void 0===e?void 0:e.name)||t("document.form.file.placeholder")}),Object(n.jsx)(z.a.Control.Feedback,{type:"invalid",children:t("document.form.validation.".concat(p.file))})]})]})}),Object(n.jsxs)(z.a.Row,{children:[Object(n.jsxs)(z.a.Group,{as:ye.a,controlId:"docForm.title",children:[Object(n.jsx)(z.a.Label,{children:t("document.title")}),Object(n.jsx)(z.a.Control,{type:"text",name:"title",required:!0,onChange:F,isInvalid:p.title,value:N.title}),Object(n.jsx)(z.a.Control.Feedback,{type:"invalid",children:t("document.form.validation.".concat(p.title))})]}),Object(n.jsxs)(z.a.Group,{as:ye.a,xs:2,controlId:"docForm.status",style:{display:N.id?"block":"none"},children:[Object(n.jsx)(z.a.Label,{children:t("document.status")}),Object(n.jsx)(z.a.Text,{as:"p",children:re(N.status)})]})]}),Object(n.jsx)(z.a.Row,{children:Object(n.jsxs)(z.a.Group,{as:ye.a,controlId:"docForm.summary",children:[Object(n.jsx)(z.a.Label,{children:t("document.summary")}),Object(n.jsx)(z.a.Control,{as:"textarea",name:"summary",rows:5,onChange:F,value:N.summary}),Object(n.jsx)(z.a.Text,{className:"text-muted",children:t("document.form.summary.mutedText")})]})}),Object(n.jsxs)(z.a.Row,{children:[Object(n.jsxs)(z.a.Group,{as:ye.a,controlId:"docForm.category",children:[Object(n.jsx)(z.a.Label,{children:t("document.category")}),Object(n.jsx)(W,{onChange:T,isInvalid:p.category,validationMessage:t("document.form.validation.".concat(p.category)),value:N.category})]}),Object(n.jsxs)(z.a.Group,{as:ye.a,controlId:"docForm.date",children:[Object(n.jsx)(z.a.Label,{children:t("document.date")}),Object(n.jsx)(Y,{name:"date",onChange:T,value:N.date})]})]}),Object(n.jsxs)("div",{className:"buttons",children:[Object(n.jsx)(V.a,{variant:"danger",onClick:function(){f("/documents/".concat(a),{method:"DELETE"}).then((function(e){e.ok&&(window.alert("Document '".concat(a,"' deleted")),m("/documents"))}))},style:{display:a?"block":"none"},children:t("document.form.deleteButton")}),Object(n.jsx)(V.a,{className:"border-color-blue bg-color-blue",variant:"primary",type:"submit",children:t("document.form.".concat(a?"updateButton":"submitButton"))})]})]})})});function Ce(){var e=Object(k.h)();return Object(n.jsxs)(k.d,{children:[Object(n.jsx)(k.b,{path:"".concat(e.path,"/:docId"),component:Ne}),Object(n.jsx)(k.b,{path:e.path,component:Ne})]})}function ke(){return Object(n.jsxs)("div",{className:"home-container",children:[Object(n.jsx)(M,{}),Object(n.jsxs)(k.d,{children:[Object(n.jsx)(k.b,{exact:!0,path:"/",children:Object(n.jsx)(le,{})}),Object(n.jsx)(k.b,{path:"/documents",children:Object(n.jsx)(Ce,{})}),Object(n.jsx)(k.b,{path:"/categories",children:Object(n.jsx)(de,{})}),Object(n.jsx)(k.b,{path:"/users/department",children:Object(n.jsx)(ve,{permissionType:"department"})}),Object(n.jsx)(k.b,{path:"/users/system",children:Object(n.jsx)(ve,{permissionType:"system"})}),Object(n.jsx)(k.b,{path:"*",children:Object(n.jsx)(ue,{})})]})]})}a(102);function Ee(){return Object(n.jsx)(v,{children:Object(n.jsx)(N,{children:Object(n.jsxs)(C.a,{children:[Object(n.jsx)(k.b,{path:"/login",component:R}),Object(n.jsx)(T,{path:"*",component:ke})]})})})}a(103);i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(Ee,{})}),document.getElementById("root"))},59:function(e,t,a){},91:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[104,1,2]]]);
//# sourceMappingURL=main.6c58e410.chunk.js.map