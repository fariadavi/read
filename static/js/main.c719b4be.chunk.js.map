{"version":3,"sources":["i18n.js","locale/en_US.js","locale/pt_BR.js","services/auth.js","services/api.js","contexts/AuthContext.js","contexts/UserContext.js","components/PrivateRoute.js","components/Login.js","services/lang.js","components/NavBar.js","components/util/DatePicker.js","components/util/Select.js","components/util/CategorySelect.js","components/search/SearchBarFilters.js","components/search/SearchBar.js","components/util/TablePagination.js","components/util/StatusBadge.js","components/search/SearchResultTable.js","components/search/NoResultMessage.js","components/search/Search.js","components/invalid/PageNotFound.js","components/categories/Categories.js","services/departments/api.js","components/util/CustomButtons.js","components/util/CustomTable/CustomTableActions.js","components/util/Validation.js","components/util/CustomTable/CustomTableFilters.js","components/util/CustomTable/CustomTableExtraRows.js","components/util/CustomTable/CustomTableDataField.js","components/util/CustomIcon.js","components/util/CustomTable/CustomTable.js","components/departments/DepartmentsTable.js","components/departments/Departments.js","services/users/api.js","components/users/UserPermissionsTable.js","components/users/Users.js","components/documents/DocumentDetails.js","components/Home.js","components/App.js","index.js"],"names":["resources","translation","i18n","use","initReactI18next","init","lng","keySeparator","interpolation","escapeValue","TOKEN_KEY","getLocalToken","localStorage","getItem","setLocalToken","token","setItem","rq","url","options","a","headers","Authorization","fetch","process","AuthContext","createContext","AuthProvider","children","useState","setToken","authLoading","setAuthLoading","handleAuthLogout","useCallback","removeItem","handleAuthentication","googleData","method","body","tokenId","res","ok","Error","status","text","localToken","Provider","value","authenticated","UserContext","UserProvider","useContext","user","setUser","userLoading","setUserLoading","setLoggedUserInfo","json","changeDepartment","deptId","id","JSON","stringify","currentDepartment","useEffect","department","checkPermission","permissions","some","p","includes","logoutUser","PrivateRoute","component","to","Login","t","useTranslation","Container","className","style","minHeight","clientId","buttonText","onSuccess","onFailure","err","details","console","log","cookiePolicy","LANG_KEY","NavBar","language","setLanguage","languageList","Object","keys","store","data","lang","changeLanguage","navigator","userLanguage","Navbar","fixed","bg","variant","expand","Brand","height","alt","src","margin","Nav","NavDropdown","title","icon","faFileAlt","faPlusCircle","faSearch","faHome","faStream","faUsersCog","faCogs","faHouseUser","Toggle","aria-controls","Collapse","data-tip","email","firstName","surname","faUserCircle","faLanguage","map","index","Item","onClick","langCode","acronym","context","faExchangeAlt","disabled","departments","length","sort","b","localeCompare","dept","name","Link","faSignOutAlt","DatePicker","label","min","max","onChange","Form","Label","Control","type","required","e","target","faTimesCircle","Select","placeholder","noOptionsLabel","textProperty","idProperty","isValid","isInvalid","as","custom","display","item","checked","readOnly","CategorySelect","validationMessage","categories","setCategories","then","cats","Feedback","TextInputFilter","onSubmit","InputGroup","Prepend","Text","onKeyPress","code","CategoryFilter","MinMaxDateFilter","labelFromDate","labelUntilDate","minDateValue","maxDateValue","UserDocumentsFilter","Check","SearchBar","isSearching","onSearch","expandedOptions","setExpandedOptions","minDate","maxDate","category","myDocuments","filters","setFilters","handleFilterChange","key","handleSubmit","preventDefault","filtersObj","trim","optFilters","textQuery","window","alert","f","noValidate","Group","unselectOptionLabel","entries","filter","faAngleUp","faAngleDown","faCircleNotch","TablePagination","numPages","activePage","paginationItems","setPaginationItems","items","minPagePagination","maxPagePagination","push","Pagination","First","Prev","pageNum","active","Next","Last","getStatusBadge","badgeVariant","Badge","toLowerCase","SearchResultTable","refProp","documents","currentPage","deleteDocument","expandResult","getFileIcon","mediaType","faFilePdf","getDocumentFile","docId","fileName","isDownload","blob","blobUrl","URL","createObjectURL","anchor","document","createElement","download","href","click","open","revokeObjectURL","ref","Table","striped","bordered","hover","faCaretSquareUp","faCaretSquareDown","faDownload","faEdit","faTrash","summary","fullCategoryHierarchy","formattedDate","registeredBy","NoResultMessage","currentQueryString","marginBottom","Search","tableRef","useRef","canSearchDocs","setSearching","isSearchSuccess","setSearchSuccess","docs","setDocs","currentQuery","setCurrentQuery","setCurrentQueryString","setCurrentPage","pageSize","totalResults","setTotalResults","Math","ceil","x","page","result","totalHits","results","current","scrollIntoView","block","behavior","catch","finally","doc","find","queryString","encodeURI","PageNotFound","Categories","getDepartments","insertDepartment","updateDepartment","departmentId","batchUpdateDepartments","departmentList","deleteDepartment","Button","tooltip","append","tooltipId","uuid","data-for","dataId","AddButton","i18nTooltipKey","EditButton","faPen","ConfirmButton","faCheckCircle","CancelButton","faBan","FilterButton","faFilter","activeFilterCount","DeleteButton","ClearButton","faTimes","CustomTableHeaderActions","actions","domain","isAdding","isFiltering","isBatchEditing","onClickAddBtn","onClickEditBtn","onClickCancelEditBtn","onClickConfirmEditBtn","onClickFilterBtn","enableAdd","add","callbackFn","enableBatchEdit","batchEdit","enableFilter","confirm","cancel","CustomTableBodyActions","isEditingRow","onClickDeleteBtn","enableEdit","edit","disabledelete","delete","validateField","field","file","size","match","CustomTableBooleanFilter","property","CustomFormCheck","checkBoolType","currentTarget","CustomTableTextFilter","CustomTableAddRow","columns","addBtnIcon","onAdd","newDataRow","setNewDataRow","newDataRowValidation","setNewDataRowValidation","defaultTextFieldPlaceholder","i18nAddButtonTooltipKey","addNewDataRow","emptyValuesForRequiredFields","config","requiredOnAdd","newDataRowValidationObj","forEach","every","i","arr","isFieldRequiredOnAdd","indexOfPreviousRequiredOnAddField","findIndex","j","v","indexOfNextRequiredOnAddField","colSpanUntilNextRequiredOnAddField","slice","colSpan","class","updateNewRowData","CustomTableFilter","React","customFilterForType","CustomTableFilterRow","clearBtnIcon","filterMap","onFilter","i18nClearButtonTooltipKey","filterable","CustomTableBooleanField","isEditing","disguise","CustomTableTextField","defaultValue","CustomTableDataField","dataFieldForType","Icon","CustomTable","showAddRow","setShowAddRow","showFilterRow","setShowFilterRow","setBatchEditing","editingRows","setEditingRows","filteredRowIds","setFilteredRowIds","setFilterMap","sortProperty","setSortProperty","sortDirection","setSortDirection","columnToSortBy","dataRow","filterEntry","booleanValue","string","evalStringContainsStringFilter","evaluateFilter","toggleEditData","toString","newEditingFields","confirmEditData","dataRowEntries","d","toggleBatchEdit","confirmBatchEdit","dataRows","k","Number","addData","newData","deleteData","filterData","width","toggleSortByColumn","header","faSortAlphaDown","faSortAlphaDownAlt","faSortAmountDown","faSortAmountDownAlt","rowActionIcon","editingRow","editable","setEditData","undefined","DepartmentsTable","canAddDept","canEditDept","canDeleteDept","setDepartments","loadDepartments","addNewDepartment","departmentData","editDepartment","batchEditDepartments","editedDepartmentEntries","deptData","removeDepartment","isCurrentDept","true","faChevronRight","false","Departments","canManageDepts","getUsers","getPermissions","insertUser","updateUserPermissions","userId","permissionsArray","batchUpdateUsersPermissions","permissionsUpdateMap","deleteUser","UserPermissionsTable","canInviteUsers","canEditUserPermissions","canDeleteUsers","users","setUsers","setPermissions","loadUsers","loadPermissions","addNewUser","userData","getSpecificUserPermissions","allUsers","possiblePermissions","u","editUserPermissionsWithNewUserData","userPermissions","userNewData","reduce","array","keyShouldBeInArray","addOrRemoveFromArray","editUserPermissions","batchEditUsersPermissions","editedUserEntries","fromEntries","removeUserFromDepartment","faUserPlus","faPaperPlane","faUserCheck","faQuestion","fullName","perm","Users","permissionType","DocumentForm","useParams","redirect","setRedirect","validation","setValidation","initialDocumentValues","useMemo","date","Date","toISOString","split","setDocument","tenant","setDocumentValue","handleDocChange","val","files","docName","replace","submitDocumentForm","registeredAt","updateDocument","docInfo","isEdit","formData","FormData","Blob","stopPropagation","setValidationState","validationObj","values","validateObject","Row","Col","controlId","File","Input","data-browse","xs","rows","DocumentDetails","useRouteMatch","path","Home","exact","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c719b4be.chunk.js","sourcesContent":["import i18n from 'i18next'\nimport { initReactI18next } from 'react-i18next'\nimport enUS from './locale/en_US'\nimport ptBR from './locale/pt_BR'\n\nconst resources = {\n    'en-US': { translation: enUS },\n    'pt-BR': { translation: ptBR }\n};\n\ni18n\n    .use(initReactI18next)\n    .init({\n        resources,\n        lng: 'en-US',\n        keySeparator: false,\n        interpolation: { escapeValue: false }\n    });\n\nexport default i18n;","const enUS = {\n    // dictionary\n    'yes': 'Yes',\n    'no': 'No',\n    'none': 'None',\n    'document': 'Document',\n    'document_plural': 'Documents',\n    'category': 'Category',\n    'category_plural': 'Categories',\n    'department': 'Department',\n    'department_plural': 'Departments',\n    'user': 'User',\n    'user_plural': 'Users',\n\n    // utils\n    'table.actions': 'Actions',\n    'customButtons.add.tooltip': 'Add',\n    'customButtons.edit.tooltip': 'Edit',\n    'customButtons.confirm.tooltip': 'Confirm',\n    'customButtons.cancel.tooltip': 'Cancel',\n    'customButtons.filter.tooltip': 'Filter',\n    'customButtons.delete.tooltip': 'Delete',\n    'customButtons.clear.tooltip': 'Clear',\n    'customTable.addRow.text.placeholder': 'Enter text',\n    'customTable.addRow.validation.mandatoryField': 'Mandatory field',\n    'customTable.filterRow.text.placeholder': 'Enter text to filter',\n    'customTable.filterRow.boolean.y': '$t(yes)',\n    'customTable.filterRow.boolean.n': '$t(no)',\n    'customTable.filterRow.clearBtn.tooltip': 'Clear all filters',\n\n    // login\n    'loginWithGoogle.buttonText': 'Sign in with Google',\n\n    // pageNotFound\n    'pageNotFound.title': '404',\n    'pageNotFound.subtitle': 'Oops! Seems like this webpage doesn\\'t exist...',\n    'pageNotFound.message': 'Either the link you have is broken or this page refers to a content that has been moved or deleted.',\n    'pageNotFound.home': 'Click here to go to the homepage',\n    'pageNotFound.contactUs': 'If you believe that should be something here, please contact system administration.',\n\n    // navbar\n    'navbar.documents': '$t(document_plural)',\n    'navbar.documents.add': 'Add New',\n    'navbar.documents.search': 'Search',\n    'navbar.department': '$t(department)',\n    'navbar.department.category': '$t(category_plural)',\n    'navbar.department.users': '$t(user_plural)',\n    'navbar.system': 'System',\n    'navbar.system.department': '$t(department_plural)',\n    'navbar.system.users': '$t(user_plural)',\n    'navbar.language': 'Language',\n    'navbar.language.en-US.shortName': 'English',\n    'navbar.language.en-US.fullName': 'American English',\n    'navbar.language.pt-BR.shortName': 'Portuguese',\n    'navbar.language.pt-BR.fullName': 'Brazilian Portuguese',\n    'navbar.logout': 'Logout',\n\n    // document\n    'document.title': 'Title',\n    'document.status': 'Status',\n    'document.summary': 'Summary',\n    'document.category': '$t(category)',\n    'document.registeredBy': 'Registered by',\n    'document.date': 'Document Date',\n\n    // document form\n    'document.form.add.title': 'New Document',\n    'document.form.edit.title': 'Edit Document',\n    'document.form.summary.mutedText': 'A brief description of the document being uploaded.',\n    'document.form.category.choose': 'Choose a category...',\n    'document.form.category.zeroOptions': 'No categories on current department',\n    'document.form.file': 'File',\n    'document.form.file.choose': 'Choose file',\n    'document.form.file.placeholder': 'No file selected',\n    'document.form.deleteButton': 'Delete',\n    'document.form.updateButton': 'Update',\n    'document.form.submitButton': 'Submit',\n    'document.form.validation.fileRequired': 'You must attach a file',\n    'document.form.validation.invalidFileType': 'File selected does not have a valid type',\n    'document.form.validation.titleRequired': 'Title is required',\n    'document.form.validation.categoryRequired': 'You must select a category',\n    \n    // document search\n    'searchBar.filters.category': '$t(category)',\n    'searchBar.filters.date.from': 'Date from',\n    'searchBar.filters.date.until': 'until',\n    'searchBar.searchButton': 'Search Documents',\n    'searchBar.moreFiltersButton': 'More filters',\n    'searchBar.lessFiltersButton': 'Less filters',\n    'searchBar.filters.registeredByMe': 'Only documents registered by me',\n    'search.noResultFound.message.p1': 'No results found',\n    'search.noResultFound.message.p2': ' for ',\n    'search.noResultFound.message.p3': ' with the specified filters.',\n    'search.noResultFound.searchTips.title': 'Suggestions:',\n    'search.noResultFound.searchTips.item1': 'Make sure all words are spelled correctly.',\n    'search.noResultFound.searchTips.item2': 'Try using different/fewer keywords.',\n    'search.noResultFound.searchTips.item3': 'Make sure all the optional filters are correctly filled up.',\n    'search.noResultFound.searchTips.item4': 'Try removing the filters and re-add them gradually.',\n    'search.error': 'There was an error performing the requested search. Please try again later.',\n    \n    // user\n    'user.name': 'User Name',\n    'user.email': 'Email',\n\n    // department management\n    // user permission page\n    'users.department.page.header': 'Department Users',\n\n    // user table\n    // headers\n    'user.table.headers.status': 'Status',\n    'user.table.headers.username': '$t(user.name)',\n    'user.table.headers.email': '$t(user.email)',\n    'user.table.headers.permission.search_docs': 'Search documents',\n    'user.table.headers.permission.add_docs': 'Add documents',\n    'user.table.headers.permission.edit_docs_others': 'Edit other users documents',\n    'user.table.headers.permission.delete_docs_others': 'Delete other users documents',\n    'user.table.headers.permission.invite_users': 'Invite users',\n    'user.table.headers.permission.manage_categories': 'Manage categories',\n    'user.table.headers.permission.manage_dept_perm': 'Manage department permissions',\n    'user.table.headers.permission.manage_system_perm': 'Manage system permissions',\n    'user.table.headers.permission.manage_departments': 'Manage departments',\n\n    // action btn tooltips\n    'userPermissions.customTable.actions.addBtn.tooltip': 'Invite user',\n    'userPermissions.customTable.actions.batchEditBtn.tooltip': 'Edit users permissions',\n    'userPermissions.customTable.actions.filterBtn.tooltip': 'Filter users',\n    'userPermissions.customTable.actions.editBtn.tooltip': 'Edit user permissions',\n    'userPermissions.customTable.actions.deleteBtn.tooltip': 'Remove user from this department',\n\n    // user invite row\n    'userPermissions.customTable.addRow.email.placeholder': 'Enter user mail',\n    'userPermissions.customTable.addRow.validation.invalidEmailFormat': 'Invalid email format',\n    'userPermissions.customTable.addRow.validation.invalidDomain': 'Email must belong to one of the following domains: @uniriotec.br or @edu.unirio.br',\n    'userPermissions.customTable.addRow.addBtn.tooltip': 'Send Invite',\n    \n    // filter row\n    'userPermissions.customTable.filterRow.fullName.placeholder': 'Filter by user name',\n    'userPermissions.customTable.filterRow.email.placeholder': 'Filter by email',\n    'userPermissions.customTable.filterRow.status.y': 'Active',\n    'userPermissions.customTable.filterRow.status.n': 'Pending',\n    \n    // table data\n    'user.table.data.status.y.tooltip': 'Active',\n    'user.table.data.status.n.tooltip': 'Pending',\n\n    // system management\n    // departments page\n    'departments.page.header': 'Departments',\n\n    // departments table\n    // headers\n    'departments.table.headers.acronym': 'Acronym',\n    'departments.table.headers.name': 'Name',\n\n    // action btn tooltips\n\n    // add department row\n    'departments.customTable.addRow.acronym.placeholder': 'Enter acronym for department',\n    'departments.customTable.addRow.name.placeholder': 'Enter department name',\n    'departments.customTable.addRow.addBtn.tooltip': 'Add new department',\n    'departments.customTable.addRow.validation.acronymMaxLength': 'Acronym length must be 5 characters or fewer',\n    'departments.customTable.addRow.validation.cantContainWhitespaces': 'Acronym can\\'t contain whitespaces',\n    \n    // filter row\n    'departments.customTable.filterRow.acronym.placeholder': 'Filter by acronym',\n    'departments.customTable.filterRow.name.placeholder': 'Filter by department name',\n    \n    // table data\n    'departments.table.data.isCurrentDept.y': 'Current department',\n}\n\nexport default enUS;","const ptBR = {\n    // dictionary\n    'yes': 'Sim',\n    'no': 'Não',\n    'none_male': 'Nenhum',\n    'none_female': 'Nenhuma',\n    'document': 'Documento',\n    'document_plural': 'Documentos',\n    'category': 'Categoria',\n    'category_plural': 'Categorias',\n    'department': 'Departmento',\n    'department_plural': 'Departmentos',\n    'user': 'Usuário',\n    'user_plural': 'Usuários',\n\n    // utils\n    'table.actions': 'Ações',\n    'customButtons.add.tooltip': 'Adicionar',\n    'customButtons.edit.tooltip': 'Editar',\n    'customButtons.confirm.tooltip': 'Confirmar',\n    'customButtons.cancel.tooltip': 'Cancelar',\n    'customButtons.filter.tooltip': 'Filtrar',\n    'customButtons.delete.tooltip': 'Excluir',\n    'customButtons.clear.tooltip': 'Limpar',\n    'customTable.addRow.text.placeholder': 'Entre com o texto',\n    'customTable.addRow.validation.mandatoryField': 'Campo obrigatório',\n    'customTable.filterRow.text.placeholder': 'Entre com o texto para filtrar',\n    'customTable.filterRow.boolean.y': '$t(yes)',\n    'customTable.filterRow.boolean.n': '$t(no)',\n    'customTable.filterRow.clearBtn.tooltip': 'Limpar todos os filtros',\n\n    // login\n    'loginWithGoogle.buttonText': 'Entre com Google',\n\n    // pageNotFound\n    'pageNotFound.title': '404',\n    'pageNotFound.subtitle': 'Oops! Parece que essa página não existe...',\n    'pageNotFound.message': 'O link que você possui está errado ou esta página se refere a um conteúdo que foi movido ou excluído.',\n    'pageNotFound.home': 'Clique aqui para voltar a página inicial',\n    'pageNotFound.contactUs': 'Se você acredita que deveria haver algo aqui, entre em contato com os administradores do sistema.',\n\n    // navbar\n    'navbar.documents': '$t(document_plural)',\n    'navbar.documents.add': 'Adicionar',\n    'navbar.documents.search': 'Pesquisar',\n    'navbar.department': '$t(department)',\n    'navbar.department.category': '$t(category_plural)',\n    'navbar.department.users': '$t(user_plural)',\n    'navbar.system': 'Sistema',\n    'navbar.system.department': '$t(department_plural)',\n    'navbar.system.users': '$t(user_plural)',\n    'navbar.language': 'Linguagem',\n    'navbar.language.en-US.shortName': 'Inglês',\n    'navbar.language.en-US.fullName': 'Inglês Americano',\n    'navbar.language.pt-BR.shortName': 'Português',\n    'navbar.language.pt-BR.fullName': 'Português Brasileiro',\n    'navbar.logout': 'Sair',\n\n    // document\n    'document.title': 'Título',\n    'document.status': 'Status',\n    'document.summary': 'Resumo',\n    'document.category': '$t(category)',\n    'document.registeredBy': 'Cadastrado por',\n    'document.date': 'Data do Documento',\n    \n    // document form\n    'document.form.add.title': 'Novo Documento',\n    'document.form.edit.title': 'Editar Documento',\n    'document.form.summary.mutedText': 'Uma breve descrição do documento sendo enviado.',\n    'document.form.category.choose': 'Escolha uma categoria...',\n    'document.form.category.zeroOptions': 'Nenhuma categoria no departamento atual',\n    'document.form.file': 'Arquivo',\n    'document.form.file.choose': 'Escolha o arquivo',\n    'document.form.file.placeholder': 'Nenhum arquivo selecionado',\n    'document.form.deleteButton': 'Excluir',\n    'document.form.updateButton': 'Atualizar',\n    'document.form.submitButton': 'Enviar',\n    'document.form.validation.fileRequired': 'Deve anexar um arquivo',\n    'document.form.validation.invalidFileType': 'O tipo de arquivo enviado não é válido',\n    'document.form.validation.titleRequired': 'Titulo é obrigatório',\n    'document.form.validation.categoryRequired': 'Deve selecionar uma categoria',\n    \n    // document search\n    'searchBar.filters.category': '$t(category)',\n    'searchBar.filters.date.from': 'Data de',\n    'searchBar.filters.date.until': 'até',\n    'searchBar.searchButton': 'Pesquisar documentos',\n    'searchBar.moreFiltersButton': 'Mais filtros',\n    'searchBar.lessFiltersButton': 'Menos filtros',\n    'searchBar.filters.registeredByMe': 'Apenas documentos cadastrados por mim',\n    'search.noResultFound.message.p1': 'Nenhum resultado encontrado',\n    'search.noResultFound.message.p2': ' para ',\n    'search.noResultFound.message.p3': ' com os filtros especificados.',\n    'search.noResultFound.searchTips.title': 'Sugestões:',\n    'search.noResultFound.searchTips.item1': 'Certifique-se de que todas as palavras estão escritas corretamente.',\n    'search.noResultFound.searchTips.item2': 'Tente usar outras/menos palavras-chave.',\n    'search.noResultFound.searchTips.item3': 'Certifique-se de que todas os filtros opcionais estão preenchidos corretamente.',\n    'search.noResultFound.searchTips.item4': 'Tente remover os filtros e readicioná-los gradualmente.',\n    'search.error': 'Houve um erro realizando a busca desejada. Por favor, tente novamente mais tarde.',\n    \n    // user\n    'user.name': 'Nome de usuário',\n    'user.email': 'Email',\n\n    // department management\n    // user permission page\n    'users.department.page.header': 'Usuários do departmento',\n\n    // user table\n    // headers\n    'user.table.headers.status': 'Status',\n    'user.table.headers.username': '$t(user.name)',\n    'user.table.headers.email': '$t(user.email)',\n    'user.table.headers.permission.search_docs': 'Procurar documentos',\n    'user.table.headers.permission.add_docs': 'Adicionar documentos',\n    'user.table.headers.permission.edit_docs_others': 'Editar documentos de outros usuários',\n    'user.table.headers.permission.delete_docs_others': 'Excluir documentos de outros usuários',\n    'user.table.headers.permission.invite_users': 'Convidar usuários',\n    'user.table.headers.permission.manage_categories': 'Gerenciar categorias',\n    'user.table.headers.permission.manage_dept_perm': 'Gerenciar permissões de departamento',\n    'user.table.headers.permission.manage_system_perm': 'Gerenciar permissões de sistema',\n    'user.table.headers.permission.manage_departments': 'Gerenciar departamentos',\n\n    // action btn tooltips\n    'userPermissions.customTable.actions.addBtn.tooltip': 'Convidar usuário',\n    'userPermissions.customTable.actions.batchEditBtn.tooltip': 'Editar permissões dos usuários',\n    'userPermissions.customTable.actions.filterBtn.tooltip': 'Filtrar usuários',\n    'userPermissions.customTable.actions.editBtn.tooltip': 'Editar permissões do usuário',\n    'userPermissions.customTable.actions.deleteBtn.tooltip': 'Remover usuário deste departamento',\n\n    // user invite row\n    'userPermissions.customTable.addRow.email.placeholder': 'Entre com o email do usuário',\n    'userPermissions.customTable.addRow.validation.invalidEmailFormat': 'Email com formato inválido',\n    'userPermissions.customTable.addRow.validation.invalidDomain': 'Email deve pertencer à uma das seguintes organizações: @uniriotec.br ou @edu.unirio.br',\n    'userPermissions.customTable.addRow.addBtn.tooltip': 'Enviar convite',\n    \n    // filter row\n    'userPermissions.customTable.filterRow.fullName.placeholder': 'Filtrar por nome de usuário',\n    'userPermissions.customTable.filterRow.email.placeholder': 'Filtrar por email',\n    'userPermissions.customTable.filterRow.status.y': 'Ativo',\n    'userPermissions.customTable.filterRow.status.n': 'Pendente',\n    \n    // table data\n    'user.table.data.status.y.tooltip': 'Ativo',\n    'user.table.data.status.n.tooltip': 'Pendente',\n\n    // system management\n    // departments page\n    'departments.page.header': 'Departmentos',\n\n    // departments table\n    // headers\n    'departments.table.headers.acronym': 'Sigla',\n    'departments.table.headers.name': 'Nome',\n\n    // action btn tooltips\n\n    // add department row\n    'departments.customTable.addRow.acronym.placeholder': 'Entre a sigla do departamento',\n    'departments.customTable.addRow.name.placeholder': 'Entre o nome do departamento',\n    'departments.customTable.addRow.addBtn.tooltip': 'Adicionar novo departamento',\n    'departments.customTable.addRow.validation.acronymMaxLength': 'Sigla deve ter no máximo 5 caracteres',\n    'departments.customTable.addRow.validation.cantContainWhitespaces': 'Sigla não pode conter espaços em branco',\n    \n    // filter row\n    'departments.customTable.filterRow.acronym.placeholder': 'Filtrar pela sigla',\n    'departments.customTable.filterRow.name.placeholder': 'Filtrar pelo nome do departamento',\n    \n    // table data\n    'departments.table.data.isCurrentDept.y': 'Departmento atual',\n}\n\nexport default ptBR;","const TOKEN_KEY = \"@gedapp-auth-token\";\n\nexport const hasLocalToken = () => localStorage.getItem(TOKEN_KEY) !== null;\nexport const getLocalToken = () => localStorage.getItem(TOKEN_KEY);\nexport const setLocalToken = token => localStorage.setItem(TOKEN_KEY, token);\nexport const removeLocalToken = () => localStorage.removeItem(TOKEN_KEY);","import { getLocalToken } from \"./auth\";\n\nexport default async function rq(url, options) {\n    const token = getLocalToken();\n    \n    if (token) {\n        if (!options.headers)\n            options.headers = {}\n        options.headers.Authorization = `Bearer ${token}`\n    }\n\n    \n    return fetch(`${process.env.REACT_APP_SERVER_URL}${url}`, options)\n};","import React, { useCallback, createContext, useState } from 'react';\nimport { getLocalToken, setLocalToken, removeLocalToken } from '../services/auth'\nimport rq from '../services/api.js'\n\nconst AuthContext = createContext();\n\nfunction AuthProvider({ children }) {\n    const [token, setToken] = useState(getLocalToken());\n    const [authLoading, setAuthLoading] = useState(false);\n\n\tconst handleAuthLogout = useCallback(() => {\n\t\tsetAuthLoading(true);\n\n\t\tsetToken(null);\n\t\tremoveLocalToken();\n\n\t\tsetAuthLoading(false);\n\t}, [])\n\n\tconst handleAuthentication = async googleData => {\n\t\tsetAuthLoading(true);\n\t\t\n\t\ttry {\n\t\t\tconst res = await rq('/api/auth/google/login', {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theaders: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n\t\t\t\tbody: googleData.tokenId\n\t\t\t})\n\t\n\t\t\tif (!res.ok)\n\t\t\t\tthrow new Error(res.status);\n\t\t\t\n\t\t\tconst localToken = await res.text();\n\t\t\tsetLocalToken(localToken);\n\t\t\tsetToken(localToken);\n\t\t} catch (err) {\n\t\t\thandleAuthLogout();\n\t\t}\n\n\t\tsetAuthLoading(false);\n\t}\n\n\treturn (\n\t\t<AuthContext.Provider value={{ authenticated: token !== null, token, authLoading, handleAuthentication, handleAuthLogout }}>\n\t\t\t{children}\n\t\t</AuthContext.Provider>\n\t);\n}\n\nexport { AuthContext, AuthProvider };","import React, { createContext, useCallback, useContext, useEffect, useState } from 'react'\nimport rq from '../services/api.js'\nimport { AuthContext } from '../contexts/AuthContext'\n\nconst UserContext = createContext();\n\nfunction UserProvider({ children }) {\n    const { token, handleAuthLogout } = useContext(AuthContext);\n    const [user, setUser] = useState();\n    const [userLoading, setUserLoading] = useState(false);\n\n    const checkPermission = (...permissions) => permissions.some(p => user.permissions.includes(p));\n\n    const setLoggedUserInfo = useCallback(async () => {\n        setUserLoading(true);\n\n        try {\n            const res = await rq('/users/loggedUserInfo', { method: \"GET\" });\n            \n            setUserLoading(false);\n            \n            if (!res.ok)\n                throw new Error(res.status);\n\n            setUser(await res.json());\n        } catch (err) {\n            handleAuthLogout();\n            throw new Error(err);\n        }\n    }, [handleAuthLogout])\n\n    const changeDepartment = async deptId => {\n        setUserLoading(true);\n\n        const res = await rq(`/users/${user.id}`, {\n            method: \"PATCH\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ currentDepartment: { id: deptId } })\n        });\n\n        setUserLoading(false);\n\n        if (!res.ok)\n            throw new Error(res.status);\n        \n        setLoggedUserInfo();\n    }\n\n    const logoutUser = () => {\n        setUserLoading(true);\n\n        setUser(null);\n        handleAuthLogout();\n        \n        setUserLoading(false);\n    }\n\n    useEffect(() => {\n        if (!user && token)\n            setLoggedUserInfo();\n    }, [user, token, setLoggedUserInfo]);\n\n    return (\n        <UserContext.Provider value={{ user, department: user?.currentDepartment, userLoading, checkPermission, setLoggedUserInfo, changeDepartment, logoutUser }}>\n            {children}\n        </UserContext.Provider>\n    );\n}\n\nexport { UserContext, UserProvider };","import React, { useContext } from 'react'\nimport { Redirect, Route } from 'react-router-dom';\nimport { AuthContext } from '../contexts/AuthContext'\nimport { UserContext } from '../contexts/UserContext'\n\nexport default function PrivateRoute({ component, ...options }) {\n    const { user, logoutUser } = useContext(UserContext);\n    const { token } = useContext(AuthContext);\n\n    if (!token) {\n        if (user)\n            logoutUser();\n        \n        return (<Redirect to=\"/login\" />);\n    }\n\n    if (!user)\n        return <h1>Loading User...</h1>; //TODO replace this with a spinner\n\n    return (<Route {...options} component={component} />);\n}","import React, { useContext } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport GoogleLogin from 'react-google-login'\nimport { Container } from 'react-bootstrap'\nimport { AuthContext } from '../contexts/AuthContext'\nimport { Redirect } from 'react-router-dom'\n\nexport default function Login() {\n    const { t } = useTranslation();\n    const { authLoading, authenticated, handleAuthentication, handleAuthLogout } = useContext(AuthContext);    \n\n\tconst handleAuthenticationFail = (err, details) => {\n\t\thandleAuthLogout();\n\n\t\t// TODO handle failure show error msg to user \n\t\tconsole.log('login failed');\n\t}\n\n    if (authLoading)\n        return <h1>Loading...</h1>; //TODO replace this with a spinner\n\n    if (authenticated)\n        return (<Redirect to=\"/\" />)\n\n    return (\n        <Container\n            className=\"d-flex align-item justify-content-center\"\n            style={{ minHeight: \"100vh\" }}\n        >\n            <div className=\"d-flex flex-column align-item justify-content-center\">\n                <h1>UNIRIO GED App</h1>\n                <div className=\"d-flex align-item justify-content-center\">\n                    <GoogleLogin\n                        clientId={process.env.REACT_APP_GOOGLE_OAUTH_CLIENT_ID}\n                        buttonText={t('loginWithGoogle.buttonText')}\n                        onSuccess={handleAuthentication}\n                        onFailure={handleAuthenticationFail}\n                        cookiePolicy={'single_host_origin'}\n                    />\n                </div>\n            </div>\n        </Container>\n    )\n}","const LANG_KEY = '@user_lang'\n\nexport const getUserLanguage = () => localStorage.getItem(LANG_KEY);\nexport const setUserLanguage = lang => localStorage.setItem(LANG_KEY, lang);","import React, { useContext, useEffect, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { UserContext } from '../contexts/UserContext'\nimport { Link } from 'react-router-dom'\nimport ReactTooltip from 'react-tooltip'\nimport { Navbar, Nav, NavDropdown } from 'react-bootstrap'\nimport { getUserLanguage, setUserLanguage } from '../services/lang'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faHome, faCogs, faExchangeAlt, faFileAlt, faHouseUser, faLanguage, faPlusCircle, faSearch, faStream, faUserCircle, faUsersCog, faSignOutAlt } from '@fortawesome/free-solid-svg-icons'\nimport '../style/NavBar.css'\n\nexport default function NavBar() {\n    const { t, i18n } = useTranslation();\n    const { user, department, checkPermission, changeDepartment, logoutUser } = useContext(UserContext);\n    const [language, setLanguage] = useState(getUserLanguage());\n    const languageList = Object.keys(i18n.store.data)\n\n    useEffect(() => {\n        i18n.changeLanguage(language)\n        setUserLanguage(language || navigator.language || navigator.userLanguage)\n    }, [i18n, language])\n\n    const handleSwitchLanguage = langCode => { if (langCode !== language) setLanguage(langCode) };\n\n    return (\n        <Navbar fixed=\"top\" bg=\"dark\" variant=\"dark\" expand=\"sm\">\n            <Navbar.Brand>\n                <Link to=\"/\">\n                    <img height='28px' alt='' src='/unirio-ged-app-frontend/images/logo_unirio.svg' style={{ margin: '-6px 6px 0 0' }} />\n                    UNIRIO GED App\n                </Link>\n            </Navbar.Brand>\n            <Nav className=\"mr-auto\">\n                {checkPermission('ADD_DOCS', 'SEARCH_DOCS')\n                    && <NavDropdown title={\n                        <>\n                            <FontAwesomeIcon icon={faFileAlt} />\n                            <span>{t('navbar.documents')}</span>\n                        </>\n                    }>\n                        {checkPermission('ADD_DOCS')\n                            && <Link to=\"/documents/\" className=\"dropdown-item\">\n                                <FontAwesomeIcon className=\"icon\" icon={faPlusCircle} />\n                                {t('navbar.documents.add')}\n                            </Link>\n                        }\n                        {checkPermission('SEARCH_DOCS')\n                            && <Link to=\"/\" className=\"dropdown-item\">\n                                <FontAwesomeIcon className=\"icon\" icon={faSearch} />\n                                {t('navbar.documents.search')}\n                            </Link>\n                        }\n                    </NavDropdown>\n                }\n                {checkPermission('MANAGE_CATEGORIES', 'INVITE_USERS', 'MANAGE_DEPT_PERM')\n                    && <NavDropdown title={\n                        <>\n                            <FontAwesomeIcon icon={faHome} />\n                            <span>{t('navbar.department')}</span>\n                        </>\n                    }>\n                        {checkPermission('MANAGE_CATEGORIES')\n                            && <Link to=\"/categories\" className=\"dropdown-item\">\n                                <FontAwesomeIcon className=\"icon\" icon={faStream} />\n                                {t('navbar.department.category')}\n                            </Link>\n                        }\n                        {checkPermission('INVITE_USERS', 'MANAGE_DEPT_PERM')\n                            && <Link to=\"/users/department\" className=\"dropdown-item\">\n                                <FontAwesomeIcon className=\"icon\" icon={faUsersCog} />\n                                {t('navbar.department.users')}\n                            </Link>\n                        }\n                    </NavDropdown>\n                }\n                {checkPermission('MANAGE_DEPARTMENTS', 'MANAGE_SYSTEM_PERM')\n                    && <NavDropdown title={\n                        <>\n                            <FontAwesomeIcon icon={faCogs} />\n                            <span>{t('navbar.system')}</span>\n                        </>\n                    }>\n                        {checkPermission('MANAGE_DEPARTMENTS')\n                            && <Link to=\"/departments\" className=\"dropdown-item\">\n                                <FontAwesomeIcon className=\"icon\" icon={faHouseUser} />\n                                {t('navbar.system.department')}\n                            </Link>\n                        }\n                        {checkPermission('MANAGE_SYSTEM_PERM')\n                            && <Link to=\"/users/system\" className=\"dropdown-item\">\n                                <FontAwesomeIcon className=\"icon\" icon={faUsersCog} />\n                                {t('navbar.system.users')}\n                            </Link>\n                        }\n                    </NavDropdown>\n                }\n            </Nav>\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n                <Nav className=\"ml-auto\">\n                    <div className=\"nav-link menu-user-box\">\n                        <span data-tip={user?.email}>{`${user?.firstName} ${user?.surname}`}</span>\n                        <ReactTooltip />\n                        <FontAwesomeIcon icon={faUserCircle} />\n                    </div>\n                </Nav>\n                <Nav>\n                    <NavDropdown title={\n                        <>\n                            <span>{t('navbar.language')}</span>\n                            <FontAwesomeIcon icon={faLanguage} />\n                        </>\n                    }>\n                        {languageList.map((lang, index) =>\n                            <NavDropdown.Item key={index} onClick={() => { handleSwitchLanguage(lang) }} className={`${language === lang ? 'active' : ''}`}>\n                                <img className=\"icon flag\" alt={t(`language.${lang}.fullName`)} src={`/unirio-ged-app-frontend/images/${lang}.svg`} />\n                                <span>{t(`navbar.language.${lang}.shortName`)}</span>\n                            </NavDropdown.Item>\n                        )}\n                    </NavDropdown>\n                </Nav>\n                <Nav>\n                    <NavDropdown title={\n                        <>\n                            <span>{`${t('navbar.department')}: ${department?.acronym || t('none', { context: 'male' })}`}</span>\n                            <FontAwesomeIcon icon={faExchangeAlt} />\n                        </>\n                    } disabled={!user?.departments.length}>\n                        {(user?.departments?.sort((a, b) => a.acronym.localeCompare(b.acronym)) || []).map(dept =>\n                            <NavDropdown.Item key={dept.id}\n                                onClick={() => { changeDepartment(dept.id) }}\n                                className={`${dept.id === user?.currentDepartment?.id ? 'active' : ''}`}\n                            >\n                                <span className='small-column'>{dept.acronym}</span>\n                                <span>{dept.name}</span>\n                            </NavDropdown.Item>\n                        )}\n                    </NavDropdown>\n                </Nav>\n                <Nav>\n                    <Nav.Link onClick={logoutUser}>\n                        <span>{t('navbar.logout')}</span>\n                        <FontAwesomeIcon icon={faSignOutAlt} />\n                    </Nav.Link>\n                </Nav>\n            </Navbar.Collapse>\n        </Navbar>\n    )\n}\n","import React from 'react'\nimport { Form } from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimesCircle } from '@fortawesome/free-regular-svg-icons'\nimport '../../style/utils/DatePicker.css'\n\nconst DatePicker = ({ className = '', name, label, min, max, value, onChange }) =>\n    <div className={`custom-date-picker ${className}`}>\n        {label ? <Form.Label>{label}</Form.Label> : ''}\n        <div className=\"date-wrapper\">\n            <Form.Control type=\"date\" name={name} required\n                onChange={e => onChange(name, e.target.value)}\n                min={min}\n                max={max}\n                value={value}\n            />\n            <span className=\"clear-input\" onClick={() => onChange(name, '')}>\n                <FontAwesomeIcon icon={faTimesCircle} />\n            </span>\n        </div>\n    </div>\n\nexport default DatePicker;","import React from 'react'\nimport { Form } from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimesCircle } from '@fortawesome/free-regular-svg-icons'\nimport '../../style/utils/Select.css'\n\nconst Select = ({ className, label, name, placeholder, value, onChange, options, noOptionsLabel, textProperty, idProperty = 'id', required, isValid, isInvalid, children }) =>\n    <div className={`${className} select-wrapper`}>\n\n        {label\n            ? <Form.Label>{label}</Form.Label>\n            : ''}\n\n        <Form.Control as=\"select\" custom\n            required={required}\n            name={name}\n            onChange={e => onChange(name, e.target.value)}\n            isValid={isValid}\n            isInvalid={isInvalid}\n            value={value}>\n            <option key={0} style={{ display: options.length ? 'none' : '' }}>\n                {options.length ? placeholder : noOptionsLabel}\n            </option>\n            {options.length\n                && options.sort((a, b) =>\n                    a[textProperty].localeCompare(b[textProperty])\n                ).map(item =>\n                    <option key={item[idProperty]} value={item[idProperty]}>\n                        {item[textProperty]}\n                    </option>\n                )\n            }\n        </Form.Control>\n\n        <input type=\"checkbox\" className=\"select-has-value\" checked={value && value > 0} readOnly />\n\n        <span className=\"clear-input\" onClick={() => onChange(name, 0)}>\n            <FontAwesomeIcon icon={faTimesCircle} />\n        </span>\n\n        {children}\n\n    </div>\n\nexport default Select;","import React, { useContext, useEffect, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { UserContext } from '../../contexts/UserContext'\nimport rq from '../../services/api'\nimport { Form } from 'react-bootstrap'\nimport Select from './Select'\n\nconst CategorySelect = ({ className = '', label, onChange, isValid, isInvalid, validationMessage, value }) => {\n    const { t } = useTranslation();\n    const { department } = useContext(UserContext);\n    const [categories, setCategories] = useState([]);\n\n    useEffect(() => {\n        rq('/categories', { method: 'GET' })\n            .then(res => { if (res.ok) return res.json() })\n            .then(cats => setCategories(cats));\n    }, [department]);\n\n    return <Select\n        className={className}\n        label={label}\n        name=\"category\"\n        isValid={isValid}\n        isInvalid={isInvalid}\n        onChange={onChange}\n        options={categories}\n        placeholder={t('document.form.category.choose')}\n        noOptionsLabel={t('document.form.category.zeroOptions')}\n        textProperty=\"fullName\"\n        value={value}\n    >\n        {isInvalid\n            ? <Form.Control.Feedback type=\"invalid\">\n                {validationMessage}\n            </Form.Control.Feedback>\n            : ''}\n    </Select>\n}\n\nexport default CategorySelect;","import React from 'react'\nimport DatePicker from '../util/DatePicker'\nimport CategorySelect from '../util/CategorySelect'\nimport { Form, InputGroup } from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSearch } from '@fortawesome/free-solid-svg-icons'\n\nexport const TextInputFilter = ({ disabled, value, onChange, onSubmit }) =>\n    <InputGroup>\n        <InputGroup.Prepend>\n            <InputGroup.Text id=\"inputGroupPrepend\">\n                <FontAwesomeIcon icon={faSearch} />\n            </InputGroup.Text>\n        </InputGroup.Prepend>\n        <Form.Control\n            id=\"textInput\"\n            disabled={disabled}\n            onChange={e => onChange('text', e.target.value)}\n            onKeyPress={e => !disabled && e.code === 'Enter' ? onSubmit(e) : null}\n            value={value}\n            type=\"text\"\n        />\n    </InputGroup>\n\nexport const CategoryFilter = ({ label, onChange, value }) => {\n    return (\n        <CategorySelect\n            className=\"custom-input-group category-filter\"\n            label={label}\n            onChange={onChange}\n            value={value}\n        />\n    )\n}\n\nexport const MinMaxDateFilter = ({ labelFromDate, labelUntilDate, onChange, minDateValue, maxDateValue }) =>\n    <div className=\"custom-input-group date-filter\">\n        <DatePicker name=\"minDate\"\n            label={labelFromDate}\n            onChange={onChange}\n            max={maxDateValue}\n            value={minDateValue}\n        />\n        <DatePicker name=\"maxDate\"\n            label={labelUntilDate}\n            onChange={onChange}\n            min={minDateValue}\n            value={maxDateValue}\n        />\n    </div>\n\nexport const UserDocumentsFilter = ({ label, value, onClick }) =>\n    <div className=\"custom-input-group user-filter\">\n        <Form.Check type=\"checkbox\" name=\"myDocuments\" custom\n            id=\"filterMyDocuments\"\n            onClick={e => onClick('myDocuments', e.target.value)}\n            label={label}\n            value={value}\n        />\n    </div>","import React, { useContext, useEffect, useState } from 'react'\nimport { UserContext } from '../../contexts/UserContext'\nimport { useTranslation } from 'react-i18next'\nimport { Button, Form } from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faAngleDown, faAngleUp, faCircleNotch } from '@fortawesome/free-solid-svg-icons'\nimport { CategoryFilter, MinMaxDateFilter, TextInputFilter, UserDocumentsFilter } from './SearchBarFilters'\nimport '../../style/search/SearchBar.css'\n\nexport default function SearchBar({ isSearching, onSearch }) {\n    const { t } = useTranslation();\n    const { department } = useContext(UserContext);\n    const [expandedOptions, setExpandedOptions] = useState(false);\n    const [filters, setFilters] = useState({\n        text: '',\n        minDate: '',\n        maxDate: '',\n        category: '',\n        myDocuments: false\n    });\n\n    const handleFilterChange = (key, value) => {\n        if (key === 'category' && value === '-1')\n            value = 0;\n        else if (key === 'myDocuments')\n            value = value === 'false';\n\n        setFilters({ ...filters, [key]: value });\n    };\n\n    const validateFilters = filtersObj =>\n        filtersObj.text.trim().length > 0 ||\n        filtersObj.category ||\n        filtersObj.minDate ||\n        filtersObj.maxDate ||\n        filtersObj.myDocuments;\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        if (validateFilters(filters)) {\n            let { text, ...optFilters } = filters;\n            let textQuery = text.trim();\n            onSearch(textQuery, optFilters);\n\n            setFilters({ ...filters, text: textQuery });\n        } else {\n            window.alert('fill at least one input')\n        }\n    }\n\n    useEffect(() => setFilters(f => ({ ...f, category: 0 })), [department]);\n\n    return (\n        <Form className=\"search-bar-form\" noValidate={true} onSubmit={handleSubmit}>\n            <Form.Group className=\"search-form-group text-input-group\">\n                <TextInputFilter\n                    value={filters.text}\n                    onChange={handleFilterChange}\n                    onSubmit={handleSubmit}\n                />\n            </Form.Group>\n            <Form.Group className={`search-form-group filters-group ${expandedOptions ? '' : 'hide'}`}>\n                <CategoryFilter\n                    label={t('searchBar.filters.category')}\n                    onChange={handleFilterChange}\n                    value={filters.category}\n                    placeholder={t('document.form.category.choose')}\n                    unselectOptionLabel={t('none', { context: 'female' })}\n                />\n\n                <MinMaxDateFilter\n                    labelFromDate={t('searchBar.filters.date.from')}\n                    labelUntilDate={t('searchBar.filters.date.until')}\n                    onChange={handleFilterChange}\n                    minDateValue={filters.minDate}\n                    maxDateValue={filters.maxDate}\n                />\n\n                <UserDocumentsFilter\n                    label={t('searchBar.filters.registeredByMe')}\n                    onClick={handleFilterChange}\n                    value={filters.myDocuments}\n                />\n            </Form.Group>\n            <Form.Group className=\"search-form-group search-actions-group\">\n                <div className=\"search-filters-toggle-box\">\n                    <Button\n                        className=\"color-blue\"\n                        onClick={() => setExpandedOptions(!expandedOptions)}\n                        variant=\"link\">\n                        {`${t(`searchBar.${expandedOptions ? 'less' : 'more'}FiltersButton`)} (${Object.entries(filters).filter(([key, value]) => key !== 'text' && value).length})`}\n                        <FontAwesomeIcon className=\"append\" icon={expandedOptions ? faAngleUp : faAngleDown} />\n                    </Button>\n                </div>\n                <Button\n                    className=\"search-btn border-color-blue bg-color-blue\"\n                    disabled={isSearching}\n                    variant=\"primary\"\n                    type=\"submit\">\n                    {!isSearching\n                        ? t('searchBar.searchButton')\n                        : <FontAwesomeIcon icon={faCircleNotch} className=\"faSpin\" />}\n                </Button>\n            </Form.Group>\n        </Form>\n    )\n}","import React, { useEffect, useState } from 'react'\nimport { Pagination } from 'react-bootstrap'\n\nexport default function TablePagination({ numPages, activePage, onSearch }) {\n    const [paginationItems, setPaginationItems] = useState([]);\n\n    useEffect(() => {\n        let items = []\n\n        let minPagePagination = activePage - 2;\n        let maxPagePagination = activePage + 2;\n    \n        if (maxPagePagination > numPages) {\n            maxPagePagination = numPages;\n            minPagePagination = numPages - 4;\n        }\n\n        if (minPagePagination <= 1)\n            minPagePagination = 1;\n         \n        items.push(<Pagination.First key={'first'} onClick={() => onSearch(1)} disabled={activePage === 1} />)\n        items.push(<Pagination.Prev key={'-'} onClick={() => onSearch(activePage-1)} disabled={activePage === 1}/>)\n        \n        for (let pageNum = minPagePagination; pageNum <= maxPagePagination; pageNum++) {\n            items.push(\n                <Pagination.Item key={pageNum} onClick={() => { if (pageNum === activePage) return; onSearch(pageNum) }} active={pageNum === activePage}>\n                    {pageNum}\n                </Pagination.Item>\n            );\n        }\n         \n        items.push(<Pagination.Next key={'+'} onClick={() => onSearch(activePage+1)} disabled={activePage >= numPages} />)\n        items.push(<Pagination.Last key={'last'} onClick={() => onSearch(numPages)} disabled={activePage >= numPages}/>)\n\n        setPaginationItems(items);\n    }, [numPages, activePage, onSearch]);\n\n    return (\n        <Pagination className=\"tablePagination justify-content-end\">\n            {paginationItems}\n        </Pagination>\n    );\n}","import { Badge } from 'react-bootstrap'\n\nexport const getStatusBadge = status => {\n    status = status || ''\n\n    let badgeVariant\n    switch (status) {\n        case 'SUCCESS':\n            badgeVariant = 'success'\n            break;\n        case 'FAILED':\n            badgeVariant = 'danger'\n            break;\n        case 'PROCESSING':\n            badgeVariant = 'info'\n            break;\n        default:\n        case 'NOT_PROCESSED':\n            badgeVariant = 'secondary'\n            break;\n    }\n\n    return <Badge className=\"capitalize\" variant={badgeVariant}>{status.toLowerCase()}</Badge>\n}","import React from 'react'\nimport { useTranslation } from 'react-i18next'\nimport rq from '../../services/api'\nimport TablePagination from '../util/TablePagination'\nimport { getStatusBadge } from '../util/StatusBadge'\nimport { Link } from 'react-router-dom'\nimport { Table } from 'react-bootstrap'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faDownload, faEdit, faFilePdf, faFileAlt, faTrash } from '@fortawesome/free-solid-svg-icons'\nimport { faCaretSquareDown, faCaretSquareUp } from '@fortawesome/free-regular-svg-icons'\nimport '../../style/search/SearchResultTable.css'\n\nexport default function SearchResultTable({ refProp, documents, currentPage, numPages, deleteDocument, onSearch, expandResult }) {\n    const { t } = useTranslation();\n\n    const getFileIcon = mediaType => {\n        switch(mediaType) {\n            case 'application/pdf':\n                return faFilePdf;\n            default:\n            case 'text/plain':\n                return faFileAlt;\n        }\n    }\n\n    const getDocumentFile = (docId, fileName, isDownload) => {\n        rq(`/documents/${docId}/download`, { method: 'GET' })\n            .then(res => { if (res.ok) return res.blob(); })\n            .then(blob => {\n                var blobUrl = window.URL.createObjectURL(blob);\n\n                if (isDownload) {\n                    const anchor = document.createElement('a');\n                    anchor.download = fileName;\n                    anchor.target = \"_blank\";\n                    anchor.href = blobUrl;\n                    anchor.click();\n                } else {\n                    window.open(blobUrl, '_blank');\n                }\n\n                window.URL.revokeObjectURL(blobUrl);\n            })\n    }\n\n    return (\n        <div ref={refProp} className=\"docs-table\">\n            <Table striped bordered hover>\n                <thead>\n                    <tr>\n                        <th><div className=\"center\">{t('table.actions')}</div></th>\n                        <th><div className=\"center\">{t('document.title')}</div></th>\n                        <th><div className=\"center\">{t('document.summary')}</div></th>\n                        <th><div className=\"center\">{t('document.category')}</div></th>\n                        <th><div className=\"center\">{t('document.date')}</div></th>\n                        <th><div className=\"center\">{t('document.status')}</div></th>\n                        <th><div className=\"center\">{t('document.registeredBy')}</div></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {documents.map(item => (\n                        <tr key={item.id} className={item['expand'] ? '' : 'truncated'}>\n                            <td className=\"actions\">\n                                <div className=\"center\">\n                                    <span onClick={() => expandResult(item.id)}>\n                                        <FontAwesomeIcon className=\"icon\" icon={item['expand'] ? faCaretSquareUp : faCaretSquareDown} />\n                                    </span>\n                                    <span onClick={() => getDocumentFile(item.id, item.fileName, false)}>\n                                        <FontAwesomeIcon className=\"icon\" icon={getFileIcon(item.mediaType)} />\n                                    </span>\n                                    <span onClick={() => getDocumentFile(item.id, item.fileName, true)}>\n                                        <FontAwesomeIcon className=\"icon\" icon={faDownload} />\n                                    </span>\n                                    <Link to={`/documents/${item.id}`}>\n                                        <FontAwesomeIcon className=\"icon\" icon={faEdit} />\n                                    </Link>\n                                    <span onClick={() => deleteDocument(item.id)}>\n                                        <FontAwesomeIcon className=\"icon\" icon={faTrash} />\n                                    </span>\n                                </div>\n                            </td>\n                            <td className=\"title\"><p>{item.title}</p></td>\n                            <td className=\"summary\"><p>{item.summary}</p>\n                            </td>\n                            <td className=\"category\"><p className=\"center\">{item.fullCategoryHierarchy}</p></td>\n                            <td className=\"date\"><p className=\"center\">{item.formattedDate}</p></td>\n                            <td className=\"status\"><p className=\"center\">{getStatusBadge(item.status)}</p></td>\n                            <td className=\"user\"><p className=\"center\">{item.registeredBy}</p></td>\n                        </tr>\n                    ))}\n                </tbody>\n            </Table>\n            <TablePagination numPages={numPages} activePage={currentPage} onSearch={onSearch} />\n        </div>\n    )\n}","import React from 'react'\nimport { useTranslation } from 'react-i18next'\n\nconst NoResultMessage = ({ currentQueryString }) => {\n    const { t } = useTranslation();\n\n    return (\n        <div className=\"no-result-message-box\">\n            <p>\n                {t('search.noResultFound.message.p1')}\n                {currentQueryString.length ? t('search.noResultFound.message.p2') : ''}\n                <b style={{ display: currentQueryString.length ? 'inline-block' : 'none' }}>{currentQueryString}</b>\n                {t('search.noResultFound.message.p3')}\n            </p>\n            <div>\n                <p style={{ marginBottom: 0 }}>{t('search.noResultFound.searchTips.title')}</p>\n                <ul>\n                    <li>{t('search.noResultFound.searchTips.item1')}</li>\n                    <li>{t('search.noResultFound.searchTips.item2')}</li>\n                    <li>{t('search.noResultFound.searchTips.item3')}</li>\n                    <li>{t('search.noResultFound.searchTips.item4')}</li>\n                </ul>\n            </div>\n        </div>\n    )\n}\n\nexport default NoResultMessage;\n","import React, { useContext, useEffect, useRef, useState } from 'react'\nimport { UserContext } from '../../contexts/UserContext'\nimport { useTranslation } from 'react-i18next'\nimport rq from '../../services/api'\nimport SearchBar from './SearchBar'\nimport SearchResultTable from './SearchResultTable'\nimport NoResultMessage from './NoResultMessage'\nimport '../../style/search/Search.css'\n\nexport default function Search() {\n    const { t } = useTranslation();\n    const tableRef = useRef(null);\n    const { checkPermission, department } = useContext(UserContext);\n    const [canSearchDocs] = useState(checkPermission('SEARCH_DOCS'));\n    const [isSearching, setSearching] = useState(false);\n    const [isSearchSuccess, setSearchSuccess] = useState(false);\n    const [docs, setDocs] = useState([]);\n    const [currentQuery, setCurrentQuery] = useState('');\n    const [currentQueryString, setCurrentQueryString] = useState('');\n    const [currentPage, setCurrentPage] = useState(1);\n    const [pageSize] = useState(10);\n    const [totalResults, setTotalResults] = useState(0);\n\n    const searchDocs = (queryString, filters) => {\n        setCurrentQueryString(queryString);\n        setSearching(true);\n\n        let url = '/documents/search?';\n        for (const filter in filters) {\n            let value = filters[filter];\n            if (!!value)\n                url += `${filter}=${encodeURI(value)}&`;\n        }\n        url += `q=${encodeURI(queryString)}`;\n\n        rq(url, { method: \"GET\" }\n        ).then(res => { if (res.ok) { setCurrentQuery(url); return res.json() } else { window.alert('Error searching documents') } }\n        ).then(result => {\n            if (result) {\n                setCurrentPage(result.page || 0);\n                setTotalResults(result.totalHits || 0);\n                setDocs(result.results || []);\n                setSearchSuccess(true);\n\n                if (result.totalHits)\n                    tableRef.current.scrollIntoView({ block: 'start', behavior: 'smooth' });\n            }\n        }\n        ).catch(err => { setSearchSuccess(false); window.alert(t('search.error')); }\n        ).finally(() => setSearching(false));\n    }\n\n    const searchPage = page => {\n        setSearching(true);\n\n        rq(`${currentQuery}&page=${page}&pageSize=${pageSize}`, { method: \"GET\" }\n        ).then(res => { if (res.ok) { return res.json() } else { window.alert('Error searching documents') } }\n        ).then(result => {\n            if (result) {\n                setCurrentPage(result.page || 0);\n                setTotalResults(result.totalHits || 0);\n                setDocs(result.results || []);\n                setSearchSuccess(true);\n\n                if (result.totalHits)\n                    tableRef.current.scrollIntoView({ block: 'start', behavior: 'smooth' });\n            }\n        }\n        ).catch(err => { setSearchSuccess(false); window.alert(t('search.error')); }\n        ).finally(() => setSearching(false));\n    }\n\n    const handleDelete = docId => {\n        rq(`/documents/${docId}`, { method: 'DELETE' })\n            .then(res => {\n                if (!res.ok) return\n                window.alert(`Document '${docId}' deleted`)\n                setDocs(docs.filter(x => x.id !== docId))\n            });\n    }\n\n    const expandResult = docId => {\n        const doc = docs.find(x => x.id === docId);\n\n        doc['expand'] = !doc['expand']\n\n        setDocs([...docs]);\n    }\n\n    useEffect(() => { setDocs([]); setSearching(null); setSearchSuccess(false); }, [department]);\n\n    return (\n        <div className=\"search-page\">\n            <div className={`search-result ${isSearchSuccess ? 'active' : ''}`}>\n                {canSearchDocs &&\n                    <div>\n                        {isSearchSuccess && docs.length\n                            ? <SearchResultTable\n                                refProp={tableRef}\n                                documents={docs}\n                                currentPage={currentPage}\n                                numPages={Math.ceil(totalResults / pageSize)}\n                                deleteDocument={handleDelete}\n                                onSearch={searchPage}\n                                expandResult={expandResult}\n                            />\n                            : isSearchSuccess && !docs.length\n                                ? <NoResultMessage currentQueryString={currentQueryString} />\n                                : ''\n                        }\n                    </div>\n                }\n            </div>\n            <div className=\"search-bar\">\n                {canSearchDocs && <SearchBar isSearching={isSearching} onSearch={searchDocs} />}\n            </div>\n            <div className=\"search-header\">\n                <h1>UNIRIO GED App</h1>\n            </div>\n        </div>\n    )\n}","import React from 'react'\nimport { useTranslation } from 'react-i18next'\nimport '../../style/PageNotFound.css'\n\nexport default function PageNotFound() {\n    const { t } = useTranslation();\n\n    return (\n        <div className=\"page-not-found\">\n            <h1>{t('pageNotFound.title')}</h1>\n            <h2>{t('pageNotFound.subtitle')}</h2>\n\n            <p className=\"message\">\n                {t('pageNotFound.message')}\n            </p>\n            <a href=\"/\">{t('pageNotFound.home')}</a>\n            <p className=\"contactUs\">\n                {t('pageNotFound.contactUs')}\n            </p>\n        </div>\n    )\n}\n","import React from 'react'\nimport '../../style/PageNotFound.css'\n\nexport default function Categories() {\n    return (\n        <div className=\"page-not-found\">\n            <h2>MANAGE CATEGORIES</h2>\n        </div>\n    )\n}\n","import rq from '../../services/api'\n\nconst getDepartments = async () =>\n    await rq('/departments/', { method: 'GET' });\n\nconst insertDepartment = async (acronym, name) =>\n    await rq('/departments/', {\n        method: 'POST',\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ acronym: acronym, name: name })\n    });\n\nconst updateDepartment = async (departmentId, acronym, name) =>\n    await rq(`/departments/${departmentId}`, {\n        method: 'PATCH',\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ acronym: acronym, name: name })\n    })\n\nconst batchUpdateDepartments = async departmentList =>\n    await rq(`/departments/`, {\n        method: 'PATCH',\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(departmentList)\n    })\n\nconst deleteDepartment = async departmentId =>\n    await rq(`/departments/${departmentId}`, { method: 'DELETE' })\n\nexport {\n    batchUpdateDepartments,\n    deleteDepartment,\n    getDepartments,\n    insertDepartment,\n    updateDepartment\n};","import React from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { v4 as uuid } from 'uuid';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faBan, faCheckCircle, faPen, faFilter, faTimes, faTrash, faPlusCircle } from '@fortawesome/free-solid-svg-icons';\nimport ReactTooltip from 'react-tooltip'\n\nconst Button = ({ icon, tooltip = '', active = false, onClick, append }) => {\n    const tooltipId = uuid();\n    return (\n        <span\n            className={`icon ${active ? 'active' : ''}`}\n            data-for={tooltipId}\n            data-tip={tooltip}\n            onClick={dataId => onClick(dataId)}>\n            <FontAwesomeIcon className=\"icon\" icon={icon} />\n            {append}\n            <ReactTooltip id={tooltipId} />\n        </span>\n    )\n}\n\nconst AddButton = ({ icon = faPlusCircle, i18nTooltipKey, active, onClick }) => {\n    const { t } = useTranslation();\n\n    return (\n        <Button\n            icon={icon}\n            tooltip={t(i18nTooltipKey, t('customButtons.add.tooltip'))}\n            active={active}\n            onClick={onClick}\n        />)\n}\n\nconst EditButton = ({ icon = faPen, i18nTooltipKey, onClick }) => {\n    const { t } = useTranslation();\n\n    return (\n        <Button\n            icon={icon}\n            tooltip={t(i18nTooltipKey, t('customButtons.edit.tooltip'))}\n            onClick={dataId => onClick(dataId)}\n        />)\n}\n\nconst ConfirmButton = ({ icon = faCheckCircle, i18nTooltipKey, onClick }) => {\n    const { t } = useTranslation();\n\n    return (\n        <Button\n            icon={icon}\n            tooltip={t(i18nTooltipKey, t('customButtons.confirm.tooltip'))}\n            onClick={dataId => onClick(dataId)}\n        />)\n}\nconst CancelButton = ({ icon = faBan, i18nTooltipKey, onClick }) => {\n    const { t } = useTranslation();\n\n    return (\n        <Button\n            icon={icon}\n            tooltip={t(i18nTooltipKey, t('customButtons.cancel.tooltip'))}\n            onClick={dataId => onClick(dataId)}\n        />)\n}\n\nconst FilterButton = ({ icon = faFilter, i18nTooltipKey, active, onClick, activeFilterCount }) => {\n    const { t } = useTranslation();\n\n    return (\n        <Button\n            icon={icon}\n            tooltip={t(i18nTooltipKey, t('customButtons.filter.tooltip'))}\n            active={active}\n            onClick={onClick}\n            append={\n                <span className=\"activeFilterCount\">\n                    {!!activeFilterCount && `(${activeFilterCount})`}\n                </span>\n            }\n        />)\n}\n\nconst DeleteButton = ({ icon = faTrash, i18nTooltipKey, onClick }) => {\n    const { t } = useTranslation();\n\n    return (\n        <Button\n            icon={icon}\n            tooltip={t(i18nTooltipKey, t('customButtons.delete.tooltip'))}\n            onClick={dataId => onClick(dataId)}\n        />)\n}\n\nconst ClearButton = ({ icon = faTimes, i18nTooltipKey, onClick }) => {\n    const { t } = useTranslation();\n\n    return (<Button\n        icon={icon}\n        tooltip={t(i18nTooltipKey, t('customButtons.clear.tooltip'))}\n        onClick={onClick}\n    />)\n}\n\nexport {\n    Button as BasicButton,\n    AddButton,\n    EditButton,\n    ConfirmButton,\n    CancelButton,\n    FilterButton,\n    DeleteButton,\n    ClearButton\n}","import React from 'react'\nimport { AddButton, EditButton, FilterButton, ConfirmButton, CancelButton, DeleteButton } from '../CustomButtons'\n\nexport const CustomTableHeaderActions = ({\n    activeFilterCount,\n    actions,\n    domain,\n    isAdding,\n    isFiltering,\n    isBatchEditing,\n    onClickAddBtn,\n    onClickEditBtn,\n    onClickCancelEditBtn,\n    onClickConfirmEditBtn,\n    onClickFilterBtn\n}) => {\n    const enableAdd = !actions.add?.disabled && actions.add?.callbackFn;\n    const enableBatchEdit = !actions.batchEdit?.disabled && actions.batchEdit?.callbackFn;\n    const enableFilter = !actions.filter?.disabled;\n\n    return (\n        <>\n            {!isBatchEditing\n                ? (<>\n                    {enableAdd &&\n                        <AddButton\n                            active={isAdding}\n                            icon={actions.add?.icon}\n                            onClick={() => onClickAddBtn()}\n                            i18nTooltipKey={`${domain}.customTable.actions.addBtn.tooltip`}\n                        />}\n                    {enableBatchEdit &&\n                        <EditButton\n                            icon={actions.batchEdit?.icon}\n                            onClick={() => onClickEditBtn()}\n                            i18nTooltipKey={`${domain}.customTable.actions.batchEditBtn.tooltip`}\n                        />}\n                    {enableFilter &&\n                        <FilterButton\n                            active={isFiltering}\n                            activeFilterCount={activeFilterCount}\n                            icon={actions.filter?.icon}\n                            onClick={() => onClickFilterBtn()}\n                            i18nTooltipKey={`${domain}.customTable.actions.filterBtn.tooltip`}\n                        />}\n                </>)\n                : (<>\n                    <ConfirmButton\n                        icon={actions.batchEdit?.confirm?.icon}\n                        onClick={() => onClickConfirmEditBtn()}\n                        i18nTooltipKey={`${domain}.customTable.actions.batchEdit.confirmBtn.tooltip`}\n                    />\n                    <CancelButton\n                        icon={actions.batchEdit?.cancel?.icon}\n                        onClick={() => onClickCancelEditBtn()}\n                        i18nTooltipKey={`${domain}.customTable.actions.batchEdit.cancelBtn.tooltip`}\n                    />\n                </>)}\n        </>\n    )\n}\n\nexport const CustomTableBodyActions = ({\n    actions,\n    domain,\n    dataId,\n    isBatchEditing,\n    isEditingRow,\n    onClickEditBtn,\n    onClickConfirmEditBtn,\n    onClickCancelEditBtn,\n    onClickDeleteBtn\n}) => {\n    const enableEdit = !actions.edit?.disabled && actions.edit?.callbackFn;\n    const disabledelete = !actions.delete?.disabled && actions.delete?.callbackFn;\n\n    return (<>\n        {!isBatchEditing &&\n            (!isEditingRow\n                ? (<>\n                    {enableEdit &&\n                        <EditButton\n                            icon={actions.edit?.icon}\n                            onClick={() => onClickEditBtn(dataId)}\n                            i18nTooltipKey={`${domain}.customTable.actions.editBtn.tooltip`}\n                        />}\n                    {disabledelete &&\n                        <DeleteButton\n                            icon={actions.delete?.icon}\n                            onClick={() => onClickDeleteBtn(dataId)}\n                            i18nTooltipKey={`${domain}.customTable.actions.deleteBtn.tooltip`}\n                        />}\n                </>)\n                : (<>\n                    <ConfirmButton\n                        icon={actions.edit?.confirm?.icon}\n                        onClick={() => onClickConfirmEditBtn(dataId)}\n                        i18nTooltipKey={`${domain}.customTable.actions.edit.confirmBtn.tooltip`}\n                    />\n                    <CancelButton\n                        icon={actions.edit?.cancel?.icon}\n                        onClick={() => onClickCancelEditBtn(dataId)}\n                        i18nTooltipKey={`${domain}.customTable.actions.edit.cancelBtn.tooltip`}\n                    />\n                </>)\n            )}\n    </>)\n}","const validateFile = file =>\n    !file\n        ? 'fileRequired'\n        : !file.size\n            ? 'emptyContentFile'\n            : !file.name.match(/^.*?\\.(doc|docx|docm|eml|epub|odf|odt|pdf|rtf|rtx|txt|text)$/gi)\n                ? 'invalidFileType'\n                : ''\n\nconst validateTitle = title =>\n    !title.length\n        ? 'titleRequired'\n        : ''\n\nconst validateCategory = categoryId =>\n    categoryId <= 0\n        ? 'categoryRequired'\n        : ''\n\nconst validateEmail = email =>\n    !email.match(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/g)\n        ? 'invalidEmailFormat'\n        : !['@edu.unirio.br', '@uniriotec.br'].some(domain => email.includes(domain)) //TODO read valid domains from config file\n            ? 'invalidDomain'\n            : ''\n\nconst validateDeptAcronym = acronym =>\n    acronym.includes(' ')\n        ? 'cantContainWhitespaces'\n        : acronym.length > 5\n            ? 'acronymMaxLength'\n            : ''\n\nexport const validateField = (field, value) => {\n    switch (field) {\n        case 'file':\n            return validateFile(value);\n        case 'title':\n            return validateTitle(value);\n        case 'category':\n            return validateCategory(value);\n        case 'userPermissions.email':\n            return validateEmail(value);\n        case 'departments.acronym':\n            return validateDeptAcronym(value);\n        default:\n            return '';\n    }\n}\n\nexport const validateObject = (document, setValidationState) => {\n    let validationObj = {};\n\n    Object.entries(document).forEach(([field, value]) =>\n        validationObj[field] = validateField(field, value)\n    );\n\n    if (setValidationState)\n        setValidationState(validationObj);\n\n    return Object.values(validationObj).every(i => !i);\n}","import React from 'react'\nimport { Form } from 'react-bootstrap'\nimport { useTranslation } from 'react-i18next'\n\nexport const CustomTableBooleanFilter = ({ domain, disabled, property, value, onChange }) => {\n    const { t } = useTranslation();\n\n    const CustomFormCheck = ({ label, checkBoolType }) =>\n        <Form.Check\n            custom\n            type='checkbox'\n            id={`${property}-${checkBoolType}`}\n            label={label || t(`customTable.filterRow.boolean.${checkBoolType}`)}\n            disabled={disabled || (value && value !== checkBoolType)}\n            onChange={e => onChange(e.currentTarget.checked ? checkBoolType : '')}\n            checked={value === checkBoolType}\n        />\n\n    return (\n        <div className=\"center\">\n            <div className=\"boolean-filter\">\n                <CustomFormCheck\n                    checkBoolType=\"y\"\n                    label={t(`${domain}.customTable.filterRow.${property}.y`, '')}\n                />\n                <CustomFormCheck\n                    checkBoolType=\"n\"\n                    label={t(`${domain}.customTable.filterRow.${property}.n`, '')}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport const CustomTableTextFilter = ({ domain, disabled, property, value, onChange }) => {\n    const { t } = useTranslation();\n\n    return (\n        <div>\n            <Form.Control\n                type=\"text\"\n                disabled={disabled}\n                onChange={e => onChange(e.target.value)}\n                placeholder={\n                    t(`${domain}.customTable.filterRow.${property}.placeholder`, '')\n                    || t('customTable.filterRow.text.placeholder')\n                }\n                value={value || ''}\n                size=\"sm\" />\n        </div>\n    );\n}","import React, { useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { Form } from 'react-bootstrap'\nimport { AddButton, ClearButton } from '../CustomButtons'\nimport { validateField } from '../Validation'\nimport { CustomTableBooleanFilter, CustomTableTextFilter } from './CustomTableFilters'\n\nconst CustomTableAddRow = ({\n    columns,\n    domain,\n    disabled = false,\n    addBtnIcon,\n    onAdd\n}) => {\n    const { t } = useTranslation();\n    const [newDataRow, setNewDataRow] = useState({});\n    const [newDataRowValidation, setNewDataRowValidation] = useState({});\n\n    const defaultTextFieldPlaceholder = t('customTable.addRow.text.placeholder')\n    const i18nAddButtonTooltipKey = t(`${domain}.customTable.addRow.addBtn.tooltip`, '')\n        ? `${domain}.customTable.addRow.addBtn.tooltip`\n        : 'customTable.addRow.addBtn.tooltip'\n\n    const updateNewRowData = (key, value) => {\n        setNewDataRow(\n            key\n                ? value\n                    ? { ...newDataRow, [key]: value }\n                    : () => { const { [key]: _, ...newDataRow2 } = newDataRow; return newDataRow2 }\n                : {}\n        )\n\n        setNewDataRowValidation({ ...newDataRowValidation, [key]: validateField(`${domain}.${key}`, value) })\n    }\n\n    const addNewDataRow = newDataRow => {\n        const emptyValuesForRequiredFields = Object.entries(columns)\n            .filter(([key, config]) => config?.requiredOnAdd && !newDataRow[key]?.length)\n\n        if (emptyValuesForRequiredFields.length > 0) {\n            let newDataRowValidationObj = {}\n            emptyValuesForRequiredFields.forEach(([key]) => {\n                newDataRowValidationObj = { ...newDataRowValidationObj, [key]: 'mandatoryField' }\n            })\n            setNewDataRowValidation({ ...newDataRowValidation, ...newDataRowValidationObj })\n\n        } else if (Object.entries(columns)\n            .filter(([key, config]) => config?.requiredOnAdd)\n            .every(([key, config]) => newDataRowValidation[key] === '')\n        ) {\n            onAdd(newDataRow);\n\n            setNewDataRow({});\n            setNewDataRowValidation({});\n        }\n    }\n\n    return (\n        <tr key=\"0\" className=\"extra-row add-row\">\n            {Object.entries(columns).map(([key, config], i, arr) => {\n                const isFieldRequiredOnAdd = config?.requiredOnAdd;\n                const indexOfPreviousRequiredOnAddField = arr.findIndex(([k, v], j) => j < i && v.requiredOnAdd);\n                const indexOfNextRequiredOnAddField = arr.findIndex(([k, v], j) => j > i && v.requiredOnAdd);\n                const colSpanUntilNextRequiredOnAddField = arr.slice(i,\n                    indexOfNextRequiredOnAddField === -1\n                        ? arr.length\n                        : indexOfNextRequiredOnAddField\n                ).length;\n                const shouldRender = isFieldRequiredOnAdd || indexOfPreviousRequiredOnAddField === -1;\n\n                return (shouldRender &&\n                    <td key={key} colSpan={colSpanUntilNextRequiredOnAddField}>\n                        {config?.requiredOnAdd &&\n                            <div className={config.class}>\n                                <Form.Group className=\"textbox\">\n                                    <Form.Control\n                                        disabled={disabled}\n                                        placeholder={t(`${domain}.customTable.addRow.${key}.placeholder`, defaultTextFieldPlaceholder)}\n                                        onChange={e => updateNewRowData(key, e.target.value)}\n                                        onKeyPress={e => e.code === 'Enter' && addNewDataRow(newDataRow)}\n                                        isValid={newDataRow?.[key]?.trim().length > 0 && !newDataRowValidation[key]}\n                                        isInvalid={newDataRowValidation[key]}\n                                        value={newDataRow?.[key] || ''}\n                                        type=\"text\"\n                                        size=\"sm\" />\n\n                                    <Form.Control.Feedback type=\"invalid\" tooltip>\n                                        {t(`${domain}.customTable.addRow.validation.${newDataRowValidation[key]}`,\n                                            t(`customTable.addRow.validation.${newDataRowValidation[key]}`)\n                                        )}\n                                    </Form.Control.Feedback>\n                                </Form.Group>\n                            </div>\n                        }\n                    </td>\n                )\n            }\n            )}\n            <td>\n                {!disabled &&\n                    <div className=\"actions spaced\">\n                        <AddButton\n                            icon={addBtnIcon}\n                            i18nTooltipKey={i18nAddButtonTooltipKey}\n                            onClick={() => addNewDataRow(newDataRow)}\n                        />\n                    </div>\n                }\n            </td>\n        </tr >\n    )\n}\n\nconst customFilterForType = type => {\n    switch (type) {\n        case 'boolean':\n            return CustomTableBooleanFilter\n        case 'text':\n        default:\n            return CustomTableTextFilter\n    }\n}\n\nconst CustomTableFilter = ({ domain, disabled, property, onChange, type, value }) =>\n    React.createElement(customFilterForType(type), {\n        domain: domain,\n        disabled: disabled,\n        property: property,\n        onChange: onChange,\n        value: value\n    })\n\nconst CustomTableFilterRow = ({\n    clearBtnIcon,\n    columns,\n    domain,\n    disabled = false,\n    filterMap,\n    onFilter\n}) => {\n    const { t } = useTranslation();\n    const i18nClearButtonTooltipKey = t(`${domain}.customTable.filterRow.clearBtn.tooltip`, '')\n        ? `${domain}.customTable.filterRow.clearBtn.tooltip`\n        : 'customTable.filterRow.clearBtn.tooltip'\n\n    return (\n        <tr key=\"0\" className=\"extra-row filter-row\">\n            {Object.entries(columns).map(([key, config]) =>\n                <td key={key}>\n                    {config?.filterable &&\n                        <div className={config.class}>\n                            <CustomTableFilter\n                                domain={domain}\n                                disabled={disabled}\n                                onChange={value => onFilter(key, value)}\n                                property={key}\n                                type={config?.type}\n                                value={filterMap?.[key]}\n                            />\n                        </div>\n                    }\n                </td>\n            )}\n            <td>\n                {!disabled &&\n                    <div className=\"actions spaced\">\n                        <ClearButton\n                            icon={clearBtnIcon}\n                            i18nTooltipKey={i18nClearButtonTooltipKey}\n                            onClick={() => onFilter()}\n                        />\n                    </div>\n                }\n            </td>\n        </tr>\n    )\n}\n\nexport { CustomTableAddRow, CustomTableFilterRow };","import React from 'react'\nimport { Form } from 'react-bootstrap'\n\nconst CustomTableBooleanField = ({\n    isEditing,\n    onChange,\n    value,\n    disguise\n}) =>\n    (!isEditing && disguise)\n    || <Form.Check\n        checked={!!value || false}\n        className='check-input'\n        disabled={!isEditing}\n        onChange={e => onChange(e.currentTarget.checked)}\n        type='checkbox'\n    />\n\nconst CustomTableTextField = ({\n    isEditing,\n    onChange,\n    value\n}) =>\n    isEditing\n        ? <Form.Control\n            onChange={e => onChange(e.target.value)}\n            defaultValue={value || ''}\n            type='text'\n            size='sm'\n        />\n        : (value?.trim() || '')\n\nconst dataFieldForType = type => {\n    switch (type) {\n        case 'boolean':\n            return CustomTableBooleanField\n        case 'text':\n        default:\n            return CustomTableTextField\n    }\n}\n\nexport const CustomTableDataField = ({\n    isEditing,\n    onChange,\n    type,\n    value,\n    disguise\n}) => React.createElement(dataFieldForType(type), {\n    isEditing: isEditing,\n    onChange: onChange,\n    value: value,\n    disguise: disguise\n});","import React from 'react'\nimport { v4 as uuid } from 'uuid';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport ReactTooltip from 'react-tooltip'\n\nexport const Icon = ({ icon, tooltip = '' }) => {\n    const tooltipId = uuid();\n    return (\n        <span\n            data-for={tooltipId}\n            data-tip={tooltip}>\n            <FontAwesomeIcon className=\"icon\" icon={icon} />\n            <ReactTooltip id={tooltipId} />\n        </span>\n    )\n}","import React, { useEffect, useState } from 'react'\nimport { Table } from 'react-bootstrap'\nimport { CustomTableHeaderActions, CustomTableBodyActions } from './CustomTableActions'\nimport { CustomTableAddRow, CustomTableFilterRow } from './CustomTableExtraRows'\nimport { CustomTableDataField } from './CustomTableDataField'\nimport TablePagination from '../TablePagination'\nimport { Icon } from '../CustomIcon'\nimport { faSortAlphaDown, faSortAlphaDownAlt, faSortAmountDown, faSortAmountDownAlt } from '@fortawesome/free-solid-svg-icons'\nimport '../../../style/utils/CustomTable.css'\n\nconst CustomTable = ({ actions = { filter: {} }, columns = {}, data = [], domain, pageSize = 10 }) => {\n    const [showAddRow, setShowAddRow] = useState(false);\n    const [showFilterRow, setShowFilterRow] = useState(false);\n    const [isBatchEditing, setBatchEditing] = useState(false);\n    const [editingRows, setEditingRows] = useState({});\n    const [filteredRowIds, setFilteredRowIds] = useState([]);\n    const [filterMap, setFilterMap] = useState({});\n    const [sortProperty, setSortProperty] = useState();\n    const [sortDirection, setSortDirection] = useState('ASC');\n    const [currentPage, setCurrentPage] = useState(1);\n\n    useEffect(() => {\n        const columnToSortBy = Object.entries(columns).find(([key, value]) => value.sort)\n        if (columnToSortBy) setSortProperty(columnToSortBy[0])\n    }, [columns])\n\n    useEffect(() => {\n        if (!data.length)\n            return;\n\n        const evalBooleanIsBooleanFilter = (booleanValue, filter) =>\n            !filter || (filter === 'y' && booleanValue) || (filter === 'n' && !booleanValue)\n\n        const evalStringContainsStringFilter = (string, filter) =>\n            !filter || string.toLowerCase().includes(filter.toLowerCase())\n\n        const evaluateFilter = (dataRow, [key, value]) => {\n            switch (columns?.[key]?.type) {\n                case 'boolean':\n                    return evalBooleanIsBooleanFilter(dataRow[key], value);\n                case 'text':\n                default:\n                    return evalStringContainsStringFilter(dataRow[key], value);\n            }\n        }\n        setFilteredRowIds(\n            data.filter(dataRow =>\n                Object.entries(filterMap)\n                    .some(filterEntry =>\n                        !evaluateFilter(dataRow, filterEntry)\n                    ))\n                .map(dataRow => dataRow.id)\n        );\n    }, [columns, data, filterMap]);\n\n    useEffect(() => {\n        const numPages = Math.ceil((data.length - filteredRowIds.length) / pageSize) || 1;\n        if (currentPage > numPages) setCurrentPage(numPages);\n    }, [filteredRowIds, currentPage, data, pageSize]);\n\n    const toggleShowAddRow = () => {\n        if (!showAddRow && showFilterRow) setShowFilterRow(false);\n        setShowAddRow(!showAddRow);\n    }\n\n    const toggleShowFilterRow = () => {\n        if (!showFilterRow && showAddRow) setShowAddRow(false);\n        if (showFilterRow) filterData();\n        setShowFilterRow(!showFilterRow);\n    }\n\n    const toggleEditData = dataId => {\n        if (Object.keys(editingRows).includes(dataId.toString())) {\n            const { [dataId]: _, ...newEditingFields } = editingRows\n            setEditingRows(newEditingFields)\n        }\n        else\n            setEditingRows({ ...editingRows, [dataId]: {} })\n    }\n\n    const setEditData = (dataId, field, value) =>\n        setEditingRows({ ...editingRows, [dataId]: { ...editingRows[dataId], [field]: value } })\n\n    const confirmEditData = async dataId => {\n        if (!actions.edit?.disabled && actions.edit?.callbackFn) {\n            const dataRow = editingRows[dataId];\n            const dataRowEntries = Object.entries(dataRow);\n            const result =\n                dataRowEntries.length\n                    && dataRowEntries.some(([key, value]) =>\n                        (typeof value === 'string'\n                            ? value.trim()\n                            : value) !== data.find(d => d.id === dataId)[key]\n                    )\n                    ? await actions.edit?.callbackFn(dataId, dataRow)\n                    : true;\n\n            if (result) {\n                const { [dataId]: _, ...newEditingFields } = editingRows\n                setEditingRows(newEditingFields)\n\n                if (result) console.log('Edit successful')\n            } else console.log('Edit failed')\n        }\n    }\n\n    const toggleBatchEdit = () => {\n        if (isBatchEditing) setEditingRows({});\n        setBatchEditing(!isBatchEditing);\n    }\n\n    const confirmBatchEdit = async () => {\n        if (!actions.batchEdit?.disabled && actions.batchEdit?.callbackFn) {\n            const dataRows = Object.entries(editingRows);\n            const result =\n                dataRows.length\n                    && dataRows.some(([key, value]) =>\n                        Object.entries(value).some(([k, v]) =>\n                        (typeof value === 'string'\n                            ? value.trim()\n                            : value) !== data.find(d => d.id === Number(key))[k]\n                        )\n                    )\n                    ? await actions.batchEdit?.callbackFn(dataRows)\n                    : true;\n\n            if (result) {\n                setEditingRows({});\n                setBatchEditing(false);\n\n                if (result) console.log('Batch edit successful')\n            } else console.log('Batch edit failed')\n        }\n    }\n\n    const addData = async newData => {\n        if (!actions.add?.disabled && actions.add.callbackFn) {\n            const result = await actions.add.callbackFn(newData)\n            if (result) console.log('Add successful')\n            else console.log('Add failed')\n        }\n    }\n\n    const deleteData = async dataId => {\n        if (!actions.delete?.disabled && actions.delete.callbackFn) {\n            const result = await actions.delete.callbackFn(dataId)\n            if (result) console.log('Delete successful')\n            else console.log('Delete failed')\n        }\n    }\n\n    const filterData = (filter, value) => setFilterMap(\n        filter\n            ? value\n                ? { ...filterMap, [filter]: value }\n                : () => { const { [filter]: _, ...newFilterMap } = filterMap; return newFilterMap }\n            : {}\n    )\n\n    const getSortIcon = type =>\n        type === 'text'\n            ? sortDirection === 'ASC'\n                ? faSortAlphaDown\n                : faSortAlphaDownAlt\n            : sortDirection === 'ASC'\n                ? faSortAmountDown\n                : faSortAmountDownAlt\n\n    const toggleSortByColumn = key =>\n        setSortDirection(key === sortProperty\n            ? sortDirection === 'DESC' ? 'ASC' : 'DESC'\n            : () => { setSortProperty(key); return 'ASC' }\n        )\n\n    return (<>\n        <Table className=\"customTable\" striped size=\"sm\">\n            <thead>\n                <tr>\n                    {Object.entries(columns).map(([key, config]) =>\n                        <th key={key} width={config.width}>\n                            <div className={config.class}>\n                                <span\n                                    className='sort-header'\n                                    onClick={() => toggleSortByColumn(key)}\n                                >\n                                    {config.header}\n                                    {key === sortProperty && <Icon icon={getSortIcon(config.type)} />}\n                                </span>\n                            </div>\n                        </th>\n                    )}\n                    {!!Object.keys(actions).some(k => !actions[k]?.disabled) &&\n                        <th width=\"120px\">\n                            <div className=\"actions spaced\">\n                                <CustomTableHeaderActions\n                                    actions={actions}\n                                    activeFilterCount={Object.keys(filterMap).length}\n                                    domain={domain}\n\n                                    isAdding={showAddRow}\n                                    onClickAddBtn={toggleShowAddRow}\n\n                                    isFiltering={showFilterRow}\n                                    onClickFilterBtn={() => toggleShowFilterRow()}\n\n                                    isBatchEditing={isBatchEditing}\n                                    onClickEditBtn={() => toggleBatchEdit()}\n                                    onClickConfirmEditBtn={() => confirmBatchEdit()}\n                                    onClickCancelEditBtn={() => toggleBatchEdit()}\n                                />\n                            </div>\n                        </th>\n                    }\n                </tr>\n            </thead>\n            <tbody>\n                {showAddRow &&\n                    <CustomTableAddRow\n                        columns={columns}\n                        domain={domain}\n                        disabled={isBatchEditing}\n                        addBtnIcon={actions?.add?.rowActionIcon}\n                        onAdd={newData => addData(newData)}\n                    />}\n                {showFilterRow &&\n                    <CustomTableFilterRow\n                        clearBtnIcon={actions?.filter?.rowActionIcon}\n                        columns={columns}\n                        domain={domain}\n                        disabled={isBatchEditing}\n                        filterMap={filterMap}\n                        onFilter={(filter, value) => filterData(filter, value)}\n                    />}\n                {data\n                    .filter(dataRow => !filteredRowIds.includes(dataRow.id))\n                    .sort((a, b) => {\n                        switch (columns?.[sortProperty]?.type) {\n                            case 'boolean':\n                                return (a[sortProperty] === b[sortProperty])\n                                    ? 0 : a[sortProperty]\n                                        ? sortDirection === 'ASC' ? -1 : 1\n                                        : sortDirection === 'ASC' ? 1 : -1;\n                            case 'text':\n                                return sortDirection === 'ASC'\n                                    ? a[sortProperty].localeCompare(b[sortProperty])\n                                    : b[sortProperty].localeCompare(a[sortProperty]);\n                            case 'number':\n                                return sortDirection === 'ASC'\n                                    ? a[sortProperty] - b[sortProperty]\n                                    : b[sortProperty] - a[sortProperty]\n                            default:\n                                return sortDirection === 'ASC'\n                                    ? a.id - b.id\n                                    : b.id - a.id\n                        }\n                    })\n                    .slice(\n                        (currentPage - 1) * pageSize,\n                        (currentPage * pageSize) < (data.length - filteredRowIds.length)\n                            ? (currentPage * pageSize)\n                            : (data.length - filteredRowIds.length)\n                    )\n                    .map(dataRow => {\n                        const editingRow = editingRows[dataRow.id?.toString()];\n\n                        return (\n                            <tr key={dataRow.id}>\n                                {Object.entries(columns).map(([key, config]) =>\n                                    <td key={key}>\n                                        <div className={config?.class}>\n                                            <CustomTableDataField\n                                                disguise={config?.disguise?.[dataRow[key]]}\n                                                isEditing={(isBatchEditing || !!editingRow) && config?.editable !== false}\n                                                onChange={value => setEditData(dataRow.id, key, value)}\n                                                type={config?.type}\n                                                value={editingRow?.[key] === undefined ? dataRow[key] : editingRow[key]}\n                                            />\n                                        </div>\n                                    </td>\n                                )}\n                                {!!Object.keys(actions).some(k => !actions[k]?.disabled) &&\n                                    <td>\n                                        <div className=\"actions spaced\">\n                                            <CustomTableBodyActions\n                                                actions={actions}\n                                                dataId={dataRow.id}\n                                                isBatchEditing={isBatchEditing}\n                                                isEditingRow={!!editingRow}\n                                                onClickEditBtn={dataId => toggleEditData(dataId)}\n                                                onClickConfirmEditBtn={dataId => confirmEditData(dataId)}\n                                                onClickCancelEditBtn={dataId => toggleEditData(dataId)}\n                                                onClickDeleteBtn={dataId => deleteData(dataId)}\n                                            />\n                                        </div>\n                                    </td>\n                                }\n                            </tr>\n                        )\n                    })}\n            </tbody>\n        </Table>\n        <TablePagination\n            numPages={Math.ceil((data.length - filteredRowIds.length) / pageSize) || 1}\n            activePage={currentPage}\n            onSearch={page => setCurrentPage(page)}\n        />\n    </>)\n}\n\nexport default CustomTable;","import React, { useCallback, useContext, useEffect, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { UserContext } from '../../contexts/UserContext'\nimport {\n    batchUpdateDepartments,\n    deleteDepartment,\n    getDepartments,\n    insertDepartment,\n    updateDepartment\n} from '../../services/departments/api'\nimport CustomTable from '../util/CustomTable/CustomTable'\nimport { Icon } from '../util/CustomIcon'\nimport { faChevronRight, faEdit } from '@fortawesome/free-solid-svg-icons'\n\nconst DepartmentsTable = ({ canAddDept, canEditDept, canDeleteDept }) => {\n    const { t } = useTranslation();\n    const [departments, setDepartments] = useState([]);\n    const { department, user, setLoggedUserInfo } = useContext(UserContext);\n\n    const loadDepartments = useCallback(async () => {\n        const res = await getDepartments();\n\n        if (res.ok) setDepartments(await res.json());\n    }, [])\n\n    useEffect(() => loadDepartments(), [loadDepartments])\n\n    const addNewDepartment = useCallback(async departmentData => {\n        const res = await insertDepartment(\n            departmentData.acronym?.trim(),\n            departmentData.name?.trim()\n        );\n\n        if (res.ok) {\n            await loadDepartments();\n            setLoggedUserInfo();\n        }\n\n        return res.ok;\n    }, [loadDepartments, setLoggedUserInfo])\n\n    const editDepartment = useCallback(async (departmentId, departmentData) => {\n        const res = await updateDepartment(\n            departmentId,\n            departmentData.acronym?.trim(),\n            departmentData.name?.trim()\n        );\n\n        if (res.ok) {\n            await loadDepartments();\n            if (user?.departments?.some(dept => dept.id === Number(departmentId)))\n                setLoggedUserInfo();\n        }\n\n        return res.ok;\n    }, [user, loadDepartments, setLoggedUserInfo])\n\n    const batchEditDepartments = useCallback(async editedDepartmentEntries => {\n        const res = await batchUpdateDepartments(\n            editedDepartmentEntries\n                .map(([deptId, deptData]) => {\n                    return {\n                        id: deptId,\n                        acronym: deptData.acronym?.trim(),\n                        name: deptData.name?.trim()\n                    }\n                }));\n\n        if (res.ok) {\n            await loadDepartments();\n            if (editedDepartmentEntries\n                .some(([deptId]) =>\n                    user?.departments?.some(dept => dept.id === Number(deptId))\n                ))\n                setLoggedUserInfo();\n        }\n\n        return res.ok;\n    }, [user, loadDepartments, setLoggedUserInfo])\n\n    const removeDepartment = useCallback(async departmentId => {\n        const res = await deleteDepartment(departmentId);\n\n        if (res.ok) {\n            await loadDepartments();\n\n            if (user?.departments?.some(dept => dept.id === Number(departmentId)))\n                setLoggedUserInfo();\n        }\n\n        return res.ok;\n    }, [user, loadDepartments, setLoggedUserInfo])\n\n    const actions = {\n        add: {\n            disabled: !canAddDept,\n            callbackFn: addNewDepartment\n        },\n        batchEdit: {\n            disabled: !canEditDept,\n            icon: faEdit,\n            callbackFn: batchEditDepartments\n        },\n        edit: {\n            disabled: !canEditDept,\n            callbackFn: editDepartment\n        },\n        delete: {\n            disabled: !canDeleteDept,\n            callbackFn: removeDepartment\n        },\n        filter: {}\n    }\n\n    const columns = {\n        isCurrentDept: {\n            class: 'text-align-end',\n            editable: false,\n            type: 'boolean',\n            width: '32px',\n            disguise: {\n                true: <Icon\n                    icon={faChevronRight}\n                    tooltip={t('departments.table.data.isCurrentDept.y')}\n                />,\n                false: <></>\n            }\n        },\n        acronym: {\n            class: 'center',\n            header: t('departments.table.headers.acronym'),\n            filterable: true,\n            requiredOnAdd: true,\n            sort: true,\n            type: 'text',\n            width: '150px'\n        },\n        name: {\n            header: t('departments.table.headers.name'),\n            filterable: true,\n            requiredOnAdd: true,\n            type: 'text'\n        }\n    }\n\n    const data = departments.map(dept => {\n        return {\n            ...dept,\n            isCurrentDept: dept.id === department.id\n        }\n    })\n\n    return (<CustomTable\n        actions={actions}\n        columns={columns}\n        data={data}\n        domain=\"departments\"\n    />)\n}\n\nexport default DepartmentsTable;","import React, { useContext } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { UserContext } from '../../contexts/UserContext'\nimport DepartmentsTable from './DepartmentsTable'\nimport '../../style/TablePage.css'\n\nexport default function Departments() {\n    const { t } = useTranslation();\n    const { checkPermission } = useContext(UserContext);\n    const canManageDepts = checkPermission('MANAGE_DEPARTMENTS');\n\n    return (\n        <div className=\"header-n-table-div\">\n            <h1>{t('departments.page.header')}</h1>\n            <DepartmentsTable\n                canAddDept={canManageDepts}\n                canEditDept={canManageDepts}\n                canDeleteDept={false}\n            />\n        </div>\n    )\n}\n","import rq from '../../services/api'\n\nconst getUsers = async () =>\n    await rq('/users', { method: 'GET' });\n\nconst getPermissions = async type =>\n    await rq(`/permissions/${type}`, { method: 'GET' });\n\nconst insertUser = async email =>\n    await rq('/users/invite', {\n        method: 'POST',\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: `email=${email}`\n    })\n\nconst updateUserPermissions = async (userId, permissionsArray) =>\n    await rq(`/users/${userId}/permission`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(permissionsArray)\n    })\n\nconst batchUpdateUsersPermissions = async permissionsUpdateMap =>\n    await rq(`/users/permission`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(permissionsUpdateMap)\n    })\n\nconst deleteUser = async userId =>\n    await rq(`/users/${userId}`, { method: 'DELETE' })\n\nexport {\n    batchUpdateUsersPermissions,\n    deleteUser,\n    getPermissions,\n    getUsers,\n    insertUser,\n    updateUserPermissions\n};","import React, { useCallback, useContext, useEffect, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { UserContext } from '../../contexts/UserContext'\nimport {\n    batchUpdateUsersPermissions,\n    deleteUser,\n    getPermissions,\n    getUsers,\n    insertUser,\n    updateUserPermissions\n} from '../../services/users/api'\nimport CustomTable from '../util/CustomTable/CustomTable'\nimport { Icon } from '../util/CustomIcon'\nimport { faUserCheck, faQuestion, faPaperPlane, faUserPlus, faEdit } from '@fortawesome/free-solid-svg-icons'\n\nconst UserPermissionsTable = ({ canInviteUsers, canEditUserPermissions, canDeleteUsers, type }) => {\n    const { t } = useTranslation();\n    const [users, setUsers] = useState([]);\n    const [permissions, setPermissions] = useState([]);\n    const { department, user, setLoggedUserInfo } = useContext(UserContext);\n\n    const loadUsers = useCallback(async () => {\n        const res = await getUsers();\n\n        if (res.ok) setUsers(await res.json());\n    }, [])\n\n    useEffect(() => loadUsers(), [loadUsers, department])\n\n    const loadPermissions = useCallback(async () => {\n        const res = await getPermissions(type);\n\n        if (res.ok) setPermissions(await res.json());\n    }, [type])\n\n    useEffect(() => loadPermissions(), [loadPermissions])\n\n    const addNewUser = useCallback(async userData => {\n        const res = await insertUser(userData.email);\n\n        if (res.ok) await loadUsers();\n\n        return res.ok;\n    }, [loadUsers])\n\n    const getSpecificUserPermissions = (allUsers, userId, possiblePermissions) =>\n        allUsers\n            ?.find(u => u.id === Number(userId))\n            ?.permissions\n            ?.filter(p => possiblePermissions.includes(p))\n\n    const addOrRemoveFromArray = (array, key, keyShouldBeInArray) =>\n        array.includes(key)\n            ? keyShouldBeInArray\n                ? array\n                : array.filter(k => k !== key)\n            : [...array, key]\n\n    const editUserPermissionsWithNewUserData = useCallback((userPermissions, userNewData) =>\n        Object\n            .entries(userNewData)\n            .reduce((array, [key, value]) =>\n                addOrRemoveFromArray(array, key, value),\n                userPermissions\n            )\n        , []);\n\n    const editUserPermissions = useCallback(async (userId, userNewData) => {\n        const res = await updateUserPermissions(\n            userId,\n            editUserPermissionsWithNewUserData(\n                getSpecificUserPermissions(users, userId, permissions),\n                userNewData\n            )\n        );\n\n        if (res.ok) {\n            await loadUsers();\n            if (user?.id === Number(userId)) setLoggedUserInfo();\n        }\n\n        return res.ok;\n    }, [permissions, user, users, loadUsers, setLoggedUserInfo, editUserPermissionsWithNewUserData])\n\n    const batchEditUsersPermissions = useCallback(async editedUserEntries => {\n        const res = await batchUpdateUsersPermissions(\n            Object.fromEntries(\n                editedUserEntries.map(([userId, userNewData]) => [\n                    userId,\n                    editUserPermissionsWithNewUserData(\n                        getSpecificUserPermissions(users, userId, permissions),\n                        userNewData\n                    )\n                ]))\n        );\n        \n        if (res.ok) {\n            await loadUsers();\n\n            if (editedUserEntries.some(([userId]) => user?.id === Number(userId)))\n                setLoggedUserInfo();\n        }\n\n        return res.ok;\n    }, [permissions, user, users, loadUsers, setLoggedUserInfo, editUserPermissionsWithNewUserData])\n\n    const removeUserFromDepartment = useCallback(async userId => {\n        const res = await deleteUser(userId)\n\n        if (res.ok) {\n            await loadUsers();\n            if (user?.id === Number(userId)) setLoggedUserInfo();\n        }\n\n        return res.ok;\n    }, [user, loadUsers, setLoggedUserInfo])\n\n    const actions = {\n        add: {\n            disabled: !canInviteUsers,\n            callbackFn: addNewUser,\n            icon: faUserPlus,\n            rowActionIcon: faPaperPlane,\n        },\n        batchEdit: {\n            disabled: !canEditUserPermissions,\n            callbackFn: batchEditUsersPermissions,\n            icon: faEdit,\n        },\n        edit: {\n            disabled: !canEditUserPermissions,\n            callbackFn: editUserPermissions,\n        },\n        delete: {\n            disabled: !canDeleteUsers,\n            callbackFn: removeUserFromDepartment,\n        },\n        filter: {}\n    }\n\n    const columns = {\n        status: {\n            class: 'center',\n            disguise: {\n                true: <Icon\n                    icon={faUserCheck}\n                    tooltip={t('user.table.data.status.y.tooltip')}\n                />,\n                false: <Icon\n                    icon={faQuestion}\n                    tooltip={t('user.table.data.status.n.tooltip')}\n                />\n            },\n            editable: false,\n            filterable: true,\n            header: t('user.table.headers.status'),\n            type: 'boolean',\n            width: '104px'\n        },\n        email: {\n            header: t('user.table.headers.email'),\n            editable: false,\n            filterable: true,\n            requiredOnAdd: true,\n            sort: true,\n            type: 'text',\n            width: '240px'\n        },\n        fullName: {\n            header: t('user.table.headers.username'),\n            editable: false,\n            filterable: true,\n            type: 'text',\n            width: '280px'\n        },\n        ...Object.fromEntries(\n            permissions.map(perm => [perm, {\n                class: 'center',\n                header: t(`user.table.headers.permission.${perm.toLowerCase()}`),\n                filterable: true,\n                type: 'boolean'\n            }])\n        )\n    }\n\n    const data = users.map(user => {\n        return {\n            ...user,\n            status: user.fullName?.trim().length > 0,\n            ...Object.fromEntries(\n                permissions.map(perm =>\n                    [perm, user.permissions.includes(perm)]\n                )\n            )\n        }\n    })\n\n    return (<CustomTable\n        actions={actions}\n        columns={columns}\n        data={data}\n        domain={`userPermissions`}\n    />)\n\n}\n\nexport default UserPermissionsTable;","import React, { useContext } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { UserContext } from '../../contexts/UserContext'\nimport UserPermissionsTable from './UserPermissionsTable'\nimport '../../style/TablePage.css'\n\nexport default function Users({ permissionType }) {\n    const { t } = useTranslation();\n    const { checkPermission, department } = useContext(UserContext);\n\n    return (\n        <div className=\"header-n-table-div\">\n            <h1>{t(`users.${permissionType}.page.header`)} - {department?.acronym}</h1>\n            <UserPermissionsTable\n                canInviteUsers={permissionType === 'department' && checkPermission('INVITE_USERS')}\n                canEditUserPermissions={\n                    (permissionType === 'department' && checkPermission('MANAGE_DEPT_PERM'))\n                    || (permissionType === 'system' && checkPermission('MANAGE_SYSTEM_PERM'))\n                }\n                canDeleteUsers={false}\n                type={permissionType}\n            />\n        </div>\n    )\n}\n","import React, { useContext, useEffect, useMemo, useState } from 'react'\nimport { useTranslation } from 'react-i18next'\nimport { UserContext } from '../../contexts/UserContext'\nimport rq from '../../services/api'\nimport DatePicker from '../util/DatePicker'\nimport CategorySelect from '../util/CategorySelect'\nimport { getStatusBadge } from '../util/StatusBadge'\nimport { Button, Col, Form } from 'react-bootstrap'\nimport { Redirect, Route, Switch, useParams, useRouteMatch } from 'react-router-dom'\nimport { validateField, validateObject } from '../util/Validation.js'\nimport '../../style/documents/DocumentDetails.css'\n\nconst DocumentForm = () => {\n    const { t } = useTranslation();\n    const { docId } = useParams();\n    const { user, department, checkPermission } = useContext(UserContext);\n    const [redirect, setRedirect] = useState(null);\n    const [validation, setValidation] = useState({});\n    const initialDocumentValues = useMemo(() => ({\n        title: '',\n        summary: '',\n        category: 0,\n        date: new Date().toISOString().split('T')[0],\n        file: undefined\n    }), []);\n    const [document, setDocument] = useState(initialDocumentValues);\n\n    useEffect(() => { if (redirect) setRedirect(null) }, [redirect]);\n\n    useEffect(() => setDocument(doc => ({ ...doc, category: 0 })), [department]);\n\n    useEffect(() => {\n        if (docId && docId !== document.id) {\n            rq(`/documents/${docId}`, { method: 'GET' })\n                .then(res => { if (res.ok) return res.json(); else setRedirect('/404'); })\n                .then(doc => { if (doc) setDocument({ ...doc, file: { name: doc.fileName, size: -1 } }) });\n\n        } else if (!docId && document.id) {\n            setDocument(initialDocumentValues);\n            setValidation({});\n\n        } else if (document.tenant && document.tenant !== department.acronym.toLowerCase()) {\n            setRedirect('/documents');\n        }\n    }, [docId, document.id, document.tenant, department, initialDocumentValues]);\n\n    const setDocumentValue = (key, value) => {\n        setValidation({ ...validation, [key]: validateField(key, value) });\n        setDocument({ ...document, [key]: value });\n    }\n\n    const handleDocChange = e => {\n        let doc = document\n        let val = validation\n\n        let name = e.target.name\n        let value = e.target.value\n\n        if (name === 'uploadFile') {\n            let files = e.target.files;\n\n            if (!files.length) return\n            name = 'file';\n            value = files[0];\n\n            if (!document['title']) {\n                let docName = files[0].name.replace(/\\.\\w+?$/g, '');\n                doc = { ...doc, title: docName };\n                val = { ...val, title: validateField('title', docName) };\n            }\n        }\n\n        setValidation({ ...val, [name]: validateField(name, value) });\n        setDocument({ ...doc, [name]: value });\n    }\n\n    const handleSubmit = e => {\n        e.preventDefault()\n        e.stopPropagation()\n\n        if (validateObject(document, setValidation))\n            submitDocumentForm();\n    }\n\n    const submitDocumentForm = () => {\n        let { file, ...doc } = document;\n        doc = {\n            ...doc,\n            tenant: department.acronym.toLowerCase(),\n            registeredBy: user.id,\n            registeredAt: new Date().toISOString()\n        };\n\n        if (document['id'] && document['file']['name'] === document['fileName'] && document['file']['size'] === -1)\n            file = undefined;\n\n        updateDocument(doc, file, !!document['id']);\n    }\n\n    const updateDocument = (docInfo, file, isEdit) => {\n        var formData = new FormData();\n        formData.append('file', file);\n        formData.append('document', new Blob([JSON.stringify(docInfo)], { type: 'application/json' }));\n\n        rq(`/documents${isEdit ? `/${docId}` : ''}`, {\n            method: isEdit ? 'PATCH' : 'POST',\n            headers: { 'Accept': 'application/json' },\n            body: formData\n        }).then(res => {\n            if (res.ok) return res.json()\n        }).then(doc => { if (doc) setRedirect(`/documents/${doc.id}`) });\n    }\n\n    const handleDelete = () => {\n        rq(`/documents/${docId}`, { method: 'DELETE' })\n            .then(res => {\n                if (!res.ok) return;\n                window.alert(`Document '${docId}' deleted`);\n                setRedirect('/documents');\n            });\n    }\n\n    return (\n        redirect\n            ? <Redirect to={redirect} />\n            : (!docId && !checkPermission('ADD_DOCS')) || (docId && document.registeredBy !== user.id && !checkPermission('EDIT_DOCS_OTHERS'))\n                ? <div>Unauthorized page here</div>\n                : <div className=\"document-details-page\">\n                    <Form className=\"document-form\" noValidate onSubmit={handleSubmit}>\n\n                        <h1>{t(`document.form.${docId ? 'edit' : 'add'}.title`)}</h1>\n\n                        <Form.Row>\n                            <Form.Group as={Col} controlId=\"docForm.fileName\">\n                                <Form.Label>{t('document.form.file')}</Form.Label>\n\n                                <Form.File id=\"doc\" custom>\n                                    <Form.File.Input\n                                        name=\"uploadFile\" required\n                                        onChange={handleDocChange}\n                                        isInvalid={validation['file']} />\n\n                                    <Form.File.Label data-browse={t('document.form.file.choose')}>\n                                        {document.file?.name || t('document.form.file.placeholder')}\n                                    </Form.File.Label>\n\n                                    <Form.Control.Feedback type=\"invalid\">\n                                        {t(`document.form.validation.${validation['file']}`)}\n                                    </Form.Control.Feedback>\n                                </Form.File>\n                            </Form.Group>\n                        </Form.Row>\n\n                        <Form.Row>\n                            <Form.Group as={Col} controlId=\"docForm.title\">\n                                <Form.Label>{t('document.title')}</Form.Label>\n\n                                <Form.Control\n                                    type=\"text\" name=\"title\" required\n                                    onChange={handleDocChange}\n                                    isInvalid={validation['title']}\n                                    value={document['title']} />\n\n                                <Form.Control.Feedback type=\"invalid\">\n                                    {t(`document.form.validation.${validation['title']}`)}\n                                </Form.Control.Feedback>\n                            </Form.Group>\n\n                            <Form.Group as={Col} xs={2} controlId=\"docForm.status\"\n                                style={{ display: document['id'] ? 'block' : 'none' }}>\n                                <Form.Label>{t('document.status')}</Form.Label>\n\n                                <Form.Text as=\"p\">\n                                    {getStatusBadge(document['status'])}\n                                </Form.Text>\n                            </Form.Group>\n                        </Form.Row>\n\n                        <Form.Row>\n                            <Form.Group as={Col} controlId=\"docForm.summary\">\n                                <Form.Label>{t('document.summary')}</Form.Label>\n\n                                <Form.Control\n                                    as=\"textarea\" name=\"summary\" rows={5}\n                                    onChange={handleDocChange}\n                                    value={document['summary']}\n                                />\n\n                                <Form.Text className=\"text-muted\">\n                                    {t('document.form.summary.mutedText')}\n                                </Form.Text>\n                            </Form.Group>\n                        </Form.Row>\n\n                        <Form.Row>\n                            <Form.Group as={Col} controlId=\"docForm.category\">\n                                <Form.Label>{t('document.category')}</Form.Label>\n\n                                <CategorySelect\n                                    onChange={setDocumentValue}\n                                    isInvalid={validation['category']}\n                                    validationMessage={t(`document.form.validation.${validation['category']}`)}\n                                    value={document['category']}\n                                />\n                            </Form.Group>\n\n                            <Form.Group as={Col} controlId=\"docForm.date\">\n                                <Form.Label>{t('document.date')}</Form.Label>\n\n                                <DatePicker name=\"date\"\n                                    onChange={setDocumentValue}\n                                    value={document['date']}\n                                />\n                            </Form.Group>\n                        </Form.Row>\n\n                        <div className=\"buttons\">\n                            <Button\n                                variant=\"danger\"\n                                onClick={handleDelete}\n                                style={{ display: docId ? 'block' : 'none' }}\n                            >\n                                {t('document.form.deleteButton')}\n                            </Button>\n\n                            <Button\n                                className=\"border-color-blue bg-color-blue\"\n                                variant=\"primary\"\n                                type=\"submit\"\n                            >\n                                {t(`document.form.${docId ? 'updateButton' : 'submitButton'}`)}\n                            </Button>\n                        </div>\n                    </Form>\n                </div>\n    )\n}\n\nexport default function DocumentDetails() {\n    let match = useRouteMatch();\n\n    return (\n        <Switch>\n            <Route path={`${match.path}/:docId`} component={DocumentForm} />\n            <Route path={match.path} component={DocumentForm} />\n        </Switch>\n    )\n}\n","import React from 'react'\nimport { Route, Switch } from 'react-router-dom';\nimport NavBar from './NavBar'\nimport Search from './search/Search'\nimport PageNotFound from './invalid/PageNotFound';\nimport Categories from './categories/Categories'\nimport Departments from './departments/Departments'\nimport Users from './users/Users'\nimport DocumentDetails from './documents/DocumentDetails'\n\nexport default function Home() {\n    return (\n        <div className=\"home-container\">\n            <NavBar />\n            <Switch>\n                <Route exact path=\"/\">\n                    <Search />\n                </Route>\n                <Route path=\"/documents\">\n                    <DocumentDetails />\n                </Route>\n                <Route path=\"/categories\">\n                    <Categories />\n                </Route>\n                <Route path=\"/departments\">\n                    <Departments />\n                </Route>\n                <Route path=\"/users/department\">\n                    <Users permissionType=\"department\" />\n                </Route>\n                <Route path=\"/users/system\">\n                    <Users permissionType=\"system\" />\n                </Route>\n                <Route path=\"*\">\n                    <PageNotFound />\n                </Route>\n            </Switch>\n        </div>\n    )\n}","import React from 'react'\nimport { UserProvider } from '../contexts/UserContext';\nimport { AuthProvider } from '../contexts/AuthContext';\nimport { HashRouter as Router, Route } from 'react-router-dom'\nimport PrivateRoute from './PrivateRoute'\nimport Login from './Login';\nimport Home from './Home'\nimport '../style/App.css'\n\nexport default function App() {\n\treturn (\n\t\t<AuthProvider>\n\t\t\t<UserProvider>\n\t\t\t\t<Router>\n\t\t\t\t\t<Route path=\"/login\" component={Login} />\n\t\t\t\t\t<PrivateRoute path=\"*\" component={Home} />\n\t\t\t\t</Router>\n\t\t\t</UserProvider>\n\t\t</AuthProvider>\n\t)\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './i18n'\nimport App from './components/App.js'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);"],"sourceRoot":""}