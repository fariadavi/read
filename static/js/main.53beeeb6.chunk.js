(this["webpackJsonpunirio-ged-app-frontend"]=this["webpackJsonpunirio-ged-app-frontend"]||[]).push([[0],{54:function(e,t,n){},83:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n.n(c),r=n(27),s=n.n(r),i=n(52),l=n(38),d={"en-US":{translation:{language:"Language","language.en-US.shortName":"English","language.en-US.fullName":"American English","language.pt-BR.shortName":"Portuguese","language.pt-BR.fullName":"Brazilian Portuguese",document:"Document",document_plural:"Documents","document.title":"Title","document.status":"Status","document.summary":"Summary","document.category":"$t(category)","document.registeredBy":"Registered by","document.date":"Document Date","document.add":"Add New","document.search":"Search","document.form.add.title":"New Document","document.form.edit.title":"Edit Document","document.form.summary.mutedText":"A brief description of the document being uploaded.","document.form.category.choose":"Choose a category...","document.form.category.zeroOptions":"No categories on current department","document.form.file":"File","document.form.file.choose":"Choose file","document.form.file.placeholder":"No file selected","document.form.deleteButton":"Delete","document.form.updateButton":"Update","document.form.submitButton":"Submit","document.form.validation.fileRequired":"You must attach a file","document.form.validation.invalidFileType":"File selected does not have a valid type","document.form.validation.titleRequired":"Title is required","document.form.validation.categoryRequired":"You must select a category",management:"Management",category:"Category",category_plural:"Categories",department:"Department",department_plural:"Departments",user:"User",users_plural:"Users","user.invite":"Invite New Users","user.permissions":"User Permissions",logout:"Logout","loginWithGoogle.buttonText":"Sign in with Google","table.actions":"Actions",none:"None","searchBar.filters.category":"$t(category)","searchBar.filters.date.from":"Date from","searchBar.filters.date.until":"until","searchBar.searchButton":"Search Documents","searchBar.moreFiltersButton":"More filters","searchBar.lessFiltersButton":"Less filters","searchBar.filters.registeredByMe":"Only documents registered by me","search.noResultFound.message.p1":"No results found","search.noResultFound.message.p2":" for ","search.noResultFound.message.p3":" with the specified filters.","search.noResultFound.searchTips.title":"Suggestions:","search.noResultFound.searchTips.item1":"Make sure all words are spelled correctly.","search.noResultFound.searchTips.item2":"Try using different/fewer keywords.","search.noResultFound.searchTips.item3":"Make sure all the optional filters are correctly filled up.","search.noResultFound.searchTips.item4":"Try removing the filters and re-add them gradually.","search.error":"There was an error performing the requested search. Please try again later.","pageNotFound.title":"404","pageNotFound.subtitle":"Oops! Seems like this webpage doesn't exist...","pageNotFound.message":"Either the link you have is broken or this page refers to a content that has been moved or deleted.","pageNotFound.home":"Click here to go to the homepage","pageNotFound.contactUs":"If you believe that should be something here, please contact system administration."}},"pt-BR":{translation:{language:"Linguagem","language.en-US.shortName":"Ingl\xeas","language.en-US.fullName":"Ingl\xeas Americano","language.pt-BR.shortName":"Portugu\xeas","language.pt-BR.fullName":"Portugu\xeas Brasileiro",document:"Documento",document_plural:"Documentos","document.title":"T\xedtulo","document.status":"Status","document.summary":"Resumo","document.category":"$t(category)","document.registeredBy":"Cadastrado por","document.date":"Data do Documento","document.add":"Adicionar","document.search":"Pesquisar","document.form.add.title":"Novo Documento","document.form.edit.title":"Editar Documento","document.form.summary.mutedText":"Uma breve descri\xe7\xe3o do documento sendo enviado.","document.form.category.choose":"Escolha uma categoria...","document.form.category.zeroOptions":"Nenhuma categoria no departamento atual","document.form.file":"Arquivo","document.form.file.choose":"Escolha o arquivo","document.form.file.placeholder":"Nenhum arquivo selecionado","document.form.deleteButton":"Excluir","document.form.updateButton":"Atualizar","document.form.submitButton":"Enviar","document.form.validation.fileRequired":"Deve anexar um arquivo","document.form.validation.invalidFileType":"O tipo de arquivo enviado n\xe3o \xe9 v\xe1lido","document.form.validation.titleRequired":"Titulo \xe9 obrigat\xf3rio","document.form.validation.categoryRequired":"Deve selecionar uma categoria",management:"Gerenciamento",category:"Categoria",category_plural:"Categorias",department:"Departmento",department_plural:"Departmentos",user:"Usu\xe1rio",users_plural:"Usu\xe1rios","user.invite":"Convidar Novo Usu\xe1rio","user.permissions":"Permiss\xf5es de Usu\xe1rio",logout:"Sair","loginWithGoogle.buttonText":"Entre com Google","table.actions":"A\xe7\xf5es",none:"Nenhuma","searchBar.filters.category":"$t(category)","searchBar.filters.date.from":"Data de","searchBar.filters.date.until":"at\xe9","searchBar.searchButton":"Pesquisar documentos","searchBar.moreFiltersButton":"Mais filtros","searchBar.lessFiltersButton":"Menos filtros","searchBar.filters.registeredByMe":"Apenas documentos cadastrados por mim","search.noResultFound.message.p1":"Nenhum resultado encontrado","search.noResultFound.message.p2":" para ","search.noResultFound.message.p3":" com os filtros especificados.","search.noResultFound.searchTips.title":"Sugest\xf5es:","search.noResultFound.searchTips.item1":"Certifique-se de que todas as palavras est\xe3o escritas corretamente.","search.noResultFound.searchTips.item2":"Tente usar outras/menos palavras-chave.","search.noResultFound.searchTips.item3":"Certifique-se de que todas os filtros opcionais est\xe3o preenchidos corretamente.","search.noResultFound.searchTips.item4":"Tente remover os filtros e readicion\xe1-los gradualmente.","search.error":"Houve um erro realizando a busca desejada. Por favor, tente novamente mais tarde.","pageNotFound.title":"404","pageNotFound.subtitle":"Oops! Parece que essa p\xe1gina n\xe3o existe...","pageNotFound.message":"O link que voc\xea possui est\xe1 errado ou esta p\xe1gina se refere a um conte\xfado que foi movido ou exclu\xeddo.","pageNotFound.home":"Clique aqui para voltar a p\xe1gina inicial","pageNotFound.contactUs":"Se voc\xea acredita que deveria haver algo aqui, entre em contato com os administradores do sistema."}}};i.a.use(l.e).init({resources:d,lng:"en-US",keySeparator:!1,interpolation:{escapeValue:!1}});i.a;var u=n(21),j=n.n(u),m=n(31),h=n(7),b="@gedapp-auth-token",O=function(){return localStorage.getItem(b)},f=function(e){return localStorage.setItem(b,e)};function p(e,t){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=O())&&(n.headers||(n.headers={}),n.headers.Authorization="Bearer ".concat(a)),e.abrupt("return",fetch("".concat("https://unirio-ged-app.herokuapp.com").concat(t),n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=Object(c.createContext)();function v(e){var t=e.children,n=Object(c.useState)(O()),o=Object(h.a)(n,2),r=o[0],s=o[1],i=Object(c.useState)(!1),l=Object(h.a)(i,2),d=l[0],u=l[1],x=function(){u(!0),s(null),localStorage.removeItem(b),u(!1)},v=function(){u(!0),x(),console.log("login failed"),u(!1)},y=function(){var e=Object(m.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,p("/api/auth/google/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.tokenId});case 3:if(!(n=e.sent).ok){e.next=12;break}return e.next=7,n.text();case 7:a=e.sent,f(a),s(a),e.next=13;break;case 12:v();case 13:u(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(g.Provider,{value:{authenticated:null!==r,token:r,authLoading:d,handleAuthentication:y,handleAuthenticationFail:v,handleAuthLogout:x},children:t})}var y=Object(c.createContext)();function N(e){var t=e.children,n=Object(c.useContext)(g),o=n.token,r=n.handleAuthLogout,s=Object(c.useState)(),i=Object(h.a)(s,2),l=i[0],d=i[1],u=Object(c.useState)(!1),b=Object(h.a)(u,2),O=b[0],f=b[1];Object(c.useEffect)((function(){!l&&o&&x()}),[l,o]);var x=function(){var e=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,p("/users/loggedUserInfo",{method:"GET"});case 3:if(!(t=e.sent).ok){e.next=10;break}return e.t0=d,e.next=8,t.json();case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:f(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(m.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,p("/users/".concat(l.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentDepartment:{id:t}})});case 3:if(!(n=e.sent).ok){e.next=10;break}return e.t0=d,e.next=8,n.json();case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:f(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(y.Provider,{value:{user:l,userLoading:O,setLoggedUserInfo:x,changeDepartment:v,logoutUser:function(){f(!0),d(null),r(),f(!1)}},children:t})}var w=n(15),S=n(12),F=n(11),k=n(35);function C(e){var t=e.component,n=Object(k.a)(e,["component"]),o=Object(c.useContext)(y),r=o.user,s=o.logoutUser;return Object(c.useContext)(g).token?r?Object(a.jsx)(S.b,Object(F.a)(Object(F.a)({},n),{},{component:t})):Object(a.jsx)("h1",{children:"Loading User..."}):(r&&s(),Object(a.jsx)(S.a,{to:"/login"}))}var R=n(103),B=n(58),D=n.n(B),T=n(95);function E(){var e=Object(R.a)().t,t=Object(c.useContext)(g),n=t.authLoading,o=t.authenticated,r=t.handleAuthentication,s=t.handleAuthenticationFail;return n?Object(a.jsx)("h1",{children:"Loading..."}):o?Object(a.jsx)(S.a,{to:"/"}):Object(a.jsx)(T.a,{className:"d-flex align-item justify-content-center",style:{minHeight:"100vh"},children:Object(a.jsxs)("div",{className:"d-flex flex-column align-item justify-content-center",children:[Object(a.jsx)("h1",{children:"UNIRIO GED App"}),Object(a.jsx)("div",{className:"d-flex align-item justify-content-center",children:Object(a.jsx)(D.a,{clientId:"363171374429-j2ucgraghs57fudoi2e8qml1ji1dv4n8.apps.googleusercontent.com",buttonText:e("loginWithGoogle.buttonText"),onSuccess:r,onFailure:s,cookiePolicy:"single_host_origin"})})]})})}var I=n(100),q=n(102),U=n(99),L="@user_lang",P=n(9),A=n(10);n(83);function G(){var e,t=Object(R.a)(),n=t.t,o=t.i18n,r=Object(c.useContext)(y),s=r.user,i=r.changeDepartment,l=r.logoutUser,d=Object(c.useState)(localStorage.getItem(L)),u=Object(h.a)(d,2),j=u[0],m=u[1],b=Object.keys(o.store.data);Object(c.useEffect)((function(){var e;o.changeLanguage(j),e=j||navigator.language||navigator.userLanguage,localStorage.setItem(L,e)}),[o,j]);return Object(a.jsxs)(I.a,{fixed:"top",bg:"dark",variant:"dark",expand:"sm",children:[Object(a.jsx)(I.a.Brand,{children:Object(a.jsxs)(w.b,{to:"/",children:[Object(a.jsx)("img",{height:"28px",alt:"",src:"/images/logo_unirio.svg",style:{margin:"-6px 6px 0 0"}}),"UNIRIO GED App"]})}),Object(a.jsxs)(q.a,{className:"mr-auto",children:[Object(a.jsxs)(U.a,{title:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P.a,{icon:A.h}),Object(a.jsx)("span",{children:n("document")})]}),children:[Object(a.jsxs)(w.b,{to:"/documents/",className:"dropdown-item",children:[Object(a.jsx)(P.a,{className:"icon",icon:A.m}),n("document.add")]}),Object(a.jsxs)(w.b,{to:"/",className:"dropdown-item",children:[Object(a.jsx)(P.a,{className:"icon",icon:A.n}),n("document.search")]})]}),Object(a.jsxs)(U.a,{title:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P.a,{icon:A.d}),Object(a.jsx)("span",{children:n("management")})]}),children:[Object(a.jsxs)(w.b,{to:"/categories",className:"dropdown-item",children:[Object(a.jsx)(P.a,{className:"icon",icon:A.p}),n("category_plural")]}),Object(a.jsxs)(w.b,{to:"/departments",className:"dropdown-item",children:[Object(a.jsx)(P.a,{className:"icon",icon:A.j}),n("department_plural")]}),Object(a.jsxs)(w.b,{to:"/users",className:"dropdown-item",children:[Object(a.jsx)(P.a,{className:"icon",icon:A.s}),n("user.invite")]}),Object(a.jsxs)(w.b,{to:"/permissions",className:"dropdown-item",children:[Object(a.jsx)(P.a,{className:"icon",icon:A.k}),n("user.permissions")]})]})]}),Object(a.jsx)(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(I.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsx)(q.a,{className:"ml-auto",children:Object(a.jsxs)("div",{className:"nav-link menu-user-box",children:[Object(a.jsx)("span",{children:"".concat(null===s||void 0===s?void 0:s.firstName," ").concat(null===s||void 0===s?void 0:s.surname)}),Object(a.jsx)(P.a,{icon:A.r})]})}),Object(a.jsx)(q.a,{children:Object(a.jsx)(U.a,{title:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:n("language")}),Object(a.jsx)(P.a,{icon:A.l})]}),children:b.map((function(e,t){return Object(a.jsxs)(U.a.Item,{onClick:function(){var t;(t=e)!==j&&m(t)},className:"".concat(j===e?"active":""),children:[Object(a.jsx)("img",{className:"icon flag",alt:n("language.".concat(e,".fullName")),src:"/images/".concat(e,".svg")}),Object(a.jsx)("span",{children:n("language.".concat(e,".shortName"))})]},t)}))})}),Object(a.jsx)(q.a,{children:Object(a.jsx)(U.a,{title:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"".concat(n("department"),": ").concat(null===s||void 0===s||null===(e=s.currentDepartment)||void 0===e?void 0:e.acronym)}),Object(a.jsx)(P.a,{icon:A.g})]}),children:(s?s.departments:[]).map((function(e){var t;return Object(a.jsx)(U.a.Item,{onClick:function(){i(e.id)},className:"".concat(e.id===(null===s||void 0===s||null===(t=s.currentDepartment)||void 0===t?void 0:t.id)?"active":""),children:"".concat(e.name," (").concat(e.acronym,")")},e.id)}))})}),Object(a.jsx)(q.a,{children:Object(a.jsxs)(q.a.Link,{onClick:l,children:[Object(a.jsx)("span",{children:n("logout")}),Object(a.jsx)(P.a,{icon:A.o})]})})]})]})}var _=n(32),M=n(101),z=n(64);function H(e){var t=e.name,n=e.min,c=e.max,o=e.value,r=e.onChange,s=e.onClear;return Object(a.jsxs)("div",{className:"dateFilter",children:[Object(a.jsx)(M.a.Control,{type:"date",name:t,required:!0,onChange:r,min:n,max:c,value:o}),Object(a.jsx)("span",{className:"clear-input",onClick:s,children:Object(a.jsx)(P.a,{icon:z.a})})]})}var W=n(96),$=n(62);function J(e){var t,n=e.isSearching,o=e.onSearch,r=Object(R.a)().t,s=Object(c.useState)({text:"",minDate:void 0,maxDate:void 0,category:"",myDocuments:!1}),i=Object(h.a)(s,2),l=i[0],d=i[1],u=Object(c.useState)([]),j=Object(h.a)(u,2),m=j[0],b=j[1],O=Object(c.useState)(!1),f=Object(h.a)(O,2),x=f[0],g=f[1];Object(c.useEffect)((function(){p("/categories",{method:"GET"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return b((null===e||void 0===e?void 0:e.length)?e:[{id:0,fullName:r("document.form.category.zeroOptions")}])}))}),[r]);var v=function(e){var t=e.target.name,n=e.target.value;"category"===t&&"-1"===e.target.value?n=0:"myDocuments"===t&&(n="false"===e.target.value),d(Object(F.a)(Object(F.a)({},l),{},Object(_.a)({},t,n)))},y=function(e){if(e.preventDefault(),(a=l).text.trim().length>0||a.category||a.minDate||a.maxDate||a.myDocuments){var t=l.text,n=Object(k.a)(l,["text"]);o(t.trim(),n)}else window.alert("fill at least one input");var a};return Object(a.jsxs)(M.a,{noValidate:!0,onSubmit:y,style:{width:"100%",maxWidth:"900px"},children:[Object(a.jsx)(M.a.Group,{children:Object(a.jsx)(M.a.Row,{children:Object(a.jsxs)(W.a,{children:[Object(a.jsx)(W.a.Prepend,{children:Object(a.jsx)(W.a.Text,{id:"inputGroupPrepend",children:Object(a.jsx)(P.a,{icon:A.n})})}),Object(a.jsx)(M.a.Control,{disabled:n,onChange:function(e){return d(Object(F.a)(Object(F.a)({},l),{},{text:e.target.value}))},onKeyPress:n?null:function(e){"Enter"===e.code&&y(e)},value:l.text,type:"text"})]})})}),Object(a.jsxs)(M.a.Group,{id:"btnsGroup",children:[Object(a.jsxs)(M.a.Row,{className:"searchOptions ".concat(x?"":"hide"),children:[Object(a.jsxs)(M.a.Row,{children:[Object(a.jsx)(M.a.Label,{children:r("searchBar.filters.category")}),Object(a.jsxs)(M.a.Control,{as:"select",name:"category",onChange:v,value:l.category,children:[Object(a.jsx)("option",{style:{display:"none"},children:r("document.form.category.choose")}),0===(null===(t=m[0])||void 0===t?void 0:t.id)?Object(a.jsx)(a.Fragment,{}):Object(a.jsxs)("option",{value:"-1",children:["-- ",r("none")," --"]}),m.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.fullName},e.id)}))]})]}),Object(a.jsxs)(M.a.Row,{children:[Object(a.jsx)(M.a.Label,{children:r("searchBar.filters.date.from")}),Object(a.jsx)(H,{name:"minDate",required:!0,onChange:v,onClear:function(){return d(Object(F.a)(Object(F.a)({},l),{},{minDate:""}))},max:l.maxDate,value:l.minDate}),Object(a.jsx)(M.a.Label,{children:r("searchBar.filters.date.until")}),Object(a.jsx)(H,{name:"maxDate",required:!0,onChange:v,onClear:function(){return d(Object(F.a)(Object(F.a)({},l),{},{maxDate:""}))},min:l.minDate,value:l.maxDate})]}),Object(a.jsx)(M.a.Row,{children:Object(a.jsx)(M.a.Check,{type:"checkbox",name:"myDocuments",custom:!0,id:"filterMyDocuments",onClick:v,label:r("searchBar.filters.registeredByMe"),value:l.myDocuments})})]}),Object(a.jsxs)(M.a.Row,{children:[Object(a.jsxs)($.a,{id:"searchOptionsBtn",className:"searchBtn",onClick:function(){return g(!x)},variant:"link",children:[r("searchBar.".concat(x?"less":"more","FiltersButton")),Object(a.jsx)(P.a,{className:"append",icon:x?A.b:A.a})]}),Object(a.jsx)($.a,{className:"searchBtn",disabled:n,variant:"primary",type:"submit",children:n?Object(a.jsx)(P.a,{icon:A.c,className:"faSpin"}):r("searchBar.searchButton")})]})]})]})}var V=n(104);function Y(e){var t=e.numPages,n=e.activePage,o=e.onSearch,r=Object(c.useState)([]),s=Object(h.a)(r,2),i=s[0],l=s[1];return Object(c.useEffect)((function(){var e=[],c=n-2,r=n+2;r>t&&(r=t,c=t-4),c<=1&&(c=1),e.push(Object(a.jsx)(V.a.First,{onClick:function(){return o(1)},disabled:1===n},"first")),e.push(Object(a.jsx)(V.a.Prev,{onClick:function(){return o(n-1)},disabled:1===n},"-"));for(var s=function(t){e.push(Object(a.jsx)(V.a.Item,{onClick:function(){t!==n&&o(t)},active:t===n,children:t},t))},i=c;i<=r;i++)s(i);e.push(Object(a.jsx)(V.a.Next,{onClick:function(){return o(n+1)},disabled:n===t},"+")),e.push(Object(a.jsx)(V.a.Last,{onClick:function(){return o(t)},disabled:n===t},"last")),l(e)}),[t,n,o]),Object(a.jsx)(V.a,{className:"tablePagination justify-content-end",children:i})}var K=n(97),Q=function(e){var t;switch(e=e||""){case"SUCCESS":t="success";break;case"FAILED":t="danger";break;case"PROCESSING":t="info";break;default:case"NOT_PROCESSED":t="secondary"}return Object(a.jsx)(K.a,{className:"capitalize",variant:t,children:e.toLowerCase()})},X=n(98);n(54);function Z(e){var t=e.documents,n=e.currentPage,c=e.numPages,o=e.deleteDocument,r=e.onSearch,s=Object(R.a)().t,i=function(e){switch(e){case"application/pdf":return A.i;default:case"text/plain":return A.h}},l=function(e,t,n){p("/documents/".concat(e,"/download"),{method:"GET"}).then((function(e){if(e.ok)return e.blob()})).then((function(e){var a=window.URL.createObjectURL(e);if(n){var c=document.createElement("a");c.download=t,c.target="_blank",c.href=a,c.click()}else window.open(a,"_blank");window.URL.revokeObjectURL(a)}))};return Object(a.jsxs)("div",{className:"flex-column",style:{width:"100%"},children:[Object(a.jsxs)(X.a,{striped:!0,bordered:!0,hover:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:Object(a.jsx)("div",{className:"center",children:s("table.actions")})}),Object(a.jsx)("th",{width:"15%",children:Object(a.jsx)("div",{className:"center",children:s("document.title")})}),Object(a.jsx)("th",{width:"50%",children:Object(a.jsx)("div",{className:"center",children:s("document.summary")})}),Object(a.jsx)("th",{width:"15%",children:Object(a.jsx)("div",{className:"center",children:s("document.category")})}),Object(a.jsx)("th",{children:Object(a.jsx)("div",{className:"center",children:s("document.date")})}),Object(a.jsx)("th",{children:Object(a.jsx)("div",{className:"center",children:s("document.status")})}),Object(a.jsx)("th",{children:Object(a.jsx)("div",{className:"center",children:s("document.registeredBy")})})]})}),Object(a.jsx)("tbody",{children:t.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsxs)("div",{className:"actions center",children:[Object(a.jsx)("span",{onClick:function(){return l(e.id,e.fileName,!1)},children:Object(a.jsx)(P.a,{className:"icon",icon:i(e.mediaType)})}),Object(a.jsx)("span",{onClick:function(){return l(e.id,e.fileName,!0)},children:Object(a.jsx)(P.a,{className:"icon",icon:A.e})}),Object(a.jsx)(w.b,{to:"/documents/".concat(e.id),children:Object(a.jsx)(P.a,{className:"icon",icon:A.f})}),Object(a.jsx)("span",{onClick:function(){return o(e.id)},children:Object(a.jsx)(P.a,{className:"icon",icon:A.q})})]})}),Object(a.jsx)("td",{children:Object(a.jsx)("div",{children:e.title})}),Object(a.jsx)("td",{children:Object(a.jsx)("div",{className:"heightOverflow",children:e.summary})}),Object(a.jsx)("td",{children:Object(a.jsx)("div",{className:"center",children:e.fullCategoryHierarchy})}),Object(a.jsx)("td",{children:Object(a.jsx)("div",{className:"center",children:e.formattedDate})}),Object(a.jsx)("td",{children:Object(a.jsx)("div",{className:"center",children:Q(e.status)})}),Object(a.jsx)("td",{children:Object(a.jsx)("div",{className:"center",children:e.registeredBy})})]},e.id)}))})]}),Object(a.jsx)(Y,{numPages:c,activePage:n,onSearch:r})]})}function ee(){var e=Object(R.a)().t,t=Object(c.useState)(null),n=Object(h.a)(t,2),o=n[0],r=n[1],s=Object(c.useState)(!1),i=Object(h.a)(s,2),l=i[0],d=i[1],u=Object(c.useState)([]),j=Object(h.a)(u,2),m=j[0],b=j[1],O=Object(c.useState)(""),f=Object(h.a)(O,2),x=f[0],g=f[1],v=Object(c.useState)(""),y=Object(h.a)(v,2),N=y[0],w=y[1],S=Object(c.useState)(1),F=Object(h.a)(S,2),k=F[0],C=F[1],B=Object(c.useState)(5),D=Object(h.a)(B,1)[0],T=Object(c.useState)(0),E=Object(h.a)(T,2),I=E[0],q=E[1];return Object(a.jsxs)("div",{className:"search",children:[Object(a.jsx)("div",{className:"d-flex align-item justify-content-center searchBox",children:Object(a.jsx)("h1",{style:{userSelect:"none"},children:"UNIRIO GED App"})}),Object(a.jsx)("div",{className:"d-flex align-item justify-content-center searchBox",children:Object(a.jsx)(J,{isSearching:o,onSearch:function(t,n){w(t),d(!1),r(!0);var a="/documents/search?";for(var c in n){var o=n[c];o&&(a+="".concat(c,"=").concat(encodeURI(o),"&"))}p(a+="q=".concat(encodeURI(t)),{method:"GET"}).then((function(e){if(e.ok)return d(!0),g(a),e.json();window.alert("Error searching documents")})).then((function(e){e&&(C(e.page||0),q(e.totalHits||0),b(e.results||[]))})).catch((function(t){d(!1),window.alert(e("search.error"))})).finally((function(){return r(!1)}))}})}),Object(a.jsx)("div",{id:"docsTable",className:"d-flex align-item justify-content-center searchBox ".concat(null!==o?"active":""),children:!o&&l&&m.length?Object(a.jsx)(Z,{documents:m,currentPage:k,numPages:Math.ceil(I/D),deleteDocument:function(e){p("/documents/".concat(e),{method:"DELETE"}).then((function(t){t.ok&&(window.alert("Document '".concat(e,"' deleted")),b(m.filter((function(t){return t.id!==e}))))}))},onSearch:function(t){d(!1),r(!0),p("".concat(x,"&page=").concat(t,"&pageSize=").concat(D),{method:"GET"}).then((function(e){if(e.ok)return d(!0),e.json();window.alert("Error searching documents")})).then((function(e){e&&(C(e.page||0),q(e.totalHits||0),b(e.results||[]))})).catch((function(t){d(!1),window.alert(e("search.error"))})).finally((function(){return r(!1)}))}}):!o&&l&&!m.length||!o&&!l?Object(a.jsxs)("div",{style:{width:"100%",maxWidth:"900px"},children:[Object(a.jsxs)("p",{children:[e("search.noResultFound.message.p1"),N.length?e("search.noResultFound.message.p2"):"",Object(a.jsx)("b",{style:{display:N.length?"inline-block":"none"},children:N}),e("search.noResultFound.message.p3")]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{style:{marginBottom:0},children:e("search.noResultFound.searchTips.title")}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:e("search.noResultFound.searchTips.item1")}),Object(a.jsx)("li",{children:e("search.noResultFound.searchTips.item2")}),Object(a.jsx)("li",{children:e("search.noResultFound.searchTips.item3")}),Object(a.jsx)("li",{children:e("search.noResultFound.searchTips.item4")})]})]})]}):""})]})}n(86);function te(){var e=Object(R.a)().t;return Object(a.jsxs)("div",{className:"pageNotFound",children:[Object(a.jsx)("h1",{children:e("pageNotFound.title")}),Object(a.jsx)("h2",{children:e("pageNotFound.subtitle")}),Object(a.jsx)("p",{className:"message",children:e("pageNotFound.message")}),Object(a.jsx)("a",{href:"/",children:e("pageNotFound.home")}),Object(a.jsx)("p",{className:"contactUs",children:e("pageNotFound.contactUs")})]})}function ne(){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"MANAGE CATEGORIES"})})}function ae(){return Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"MANAGE USER PERMISSIONS"})})}var ce=n(63),oe=(n(87),function(){var e,t=Object(R.a)().t,n=Object(S.g)().docId,o=Object(c.useContext)(g).user,r=Object(c.useState)(null),s=Object(h.a)(r,2),i=s[0],l=s[1],d=Object(c.useState)([]),u=Object(h.a)(d,2),j=u[0],m=u[1],b=Object(c.useState)({}),O=Object(h.a)(b,2),f=O[0],x=O[1],v=Object(c.useMemo)((function(){return{title:"",summary:"",category:0,date:(new Date).toISOString().split("T")[0],file:void 0}}),[]),y=Object(c.useState)(v),N=Object(h.a)(y,2),w=N[0],C=N[1];Object(c.useEffect)((function(){i&&l(null)}),[i]),Object(c.useEffect)((function(){p("/categories",{method:"GET"}).then((function(e){if(e.ok)return e.json()})).then((function(e){return m((null===e||void 0===e?void 0:e.length)?e:[{id:0,fullName:t("document.form.category.zeroOptions")}])}))}),[t]),Object(c.useEffect)((function(){n&&n!==w.id?p("/documents/".concat(n),{method:"GET"}).then((function(e){if(e.ok)return e.json();l("/documents")})).then((function(e){e&&C(Object(F.a)(Object(F.a)({},e),{},{file:{name:e.fileName,size:-1}}))})):!n&&w.id&&(C(v),x({}))}),[n,w.id,v]);var B=function(e,t,n){n=n||f;var a=!1;switch(e){case"file":t?t.size?t.name.match(/^.*?\.(doc|docx|docm|eml|epub|odf|odt|pdf|rtf|rtx|txt|text)$/gi)||(a="invalidFileType"):a="emptyContentFile":a="fileRequired";break;case"title":t.length||(a="titleRequired");break;case"category":t<=0&&(a="categoryRequired")}return n=Object(F.a)(Object(F.a)({},n),{},Object(_.a)({},e,a)),x(n),n},D=function(e){var t=w,n=e.target.name,a=e.target.value,c=void 0;if("uploadFile"===n){if(!e.target.files.length)return;if(n="file",a=e.target.files[0],!t.title){var o=e.target.files[0].name.replace(/\.\w+?$/g,"");t=Object(F.a)(Object(F.a)({},t),{},{title:o}),c=B("title",o)}}B(n,a,c),C(Object(F.a)(Object(F.a)({},t),{},Object(_.a)({},n,a)))},T=function(e,t,a){var c=new FormData;c.append("file",t),c.append("document",new Blob([JSON.stringify(e)],{type:"application/json"})),p("/documents".concat(a?"/".concat(n):""),{method:a?"PATCH":"POST",headers:{Accept:"application/json"},body:c}).then((function(e){if(e.ok)return e.json()})).then((function(e){e&&l("/documents/".concat(e.id))}))};return i?Object(a.jsx)(S.a,{to:i}):Object(a.jsxs)(M.a,{id:"docForm",noValidate:!0,onSubmit:function(e){e.preventDefault(),e.stopPropagation();var t=f;if(Object.entries(w).forEach((function(e){return t=B(e[0],e[1],t)})),Object.values(t).every((function(e){return!1===e}))){var n=w.file,a=Object(k.a)(w,["file"]);a=Object(F.a)(Object(F.a)({},a),{},{tenant:o.currentDepartment.acronym.toLowerCase(),registeredBy:o.id,registeredAt:(new Date).toISOString()}),w.id&&w.file.name===w.fileName&&-1===w.file.size&&(n=void 0),T(a,n,!!w.id)}},children:[Object(a.jsx)("h1",{children:t("document.form.".concat(n?"edit":"add",".title"))}),Object(a.jsx)(M.a.Row,{children:Object(a.jsxs)(M.a.Group,{as:ce.a,controlId:"docForm.fileName",children:[Object(a.jsx)(M.a.Label,{children:t("document.form.file")}),Object(a.jsxs)(M.a.File,{id:"doc",custom:!0,children:[Object(a.jsx)(M.a.File.Input,{name:"uploadFile",onChange:D,required:!0,isInvalid:f.file}),Object(a.jsx)(M.a.File.Label,{"data-browse":t("document.form.file.choose"),children:(null===(e=w.file)||void 0===e?void 0:e.name)||t("document.form.file.placeholder")}),Object(a.jsx)(M.a.Control.Feedback,{type:"invalid",children:t("document.form.validation.".concat(f.file))})]})]})}),Object(a.jsxs)(M.a.Row,{children:[Object(a.jsxs)(M.a.Group,{as:ce.a,controlId:"docForm.title",children:[Object(a.jsx)(M.a.Label,{children:t("document.title")}),Object(a.jsx)(M.a.Control,{type:"text",name:"title",required:!0,onChange:D,isInvalid:f.title,value:w.title}),Object(a.jsx)(M.a.Control.Feedback,{type:"invalid",children:t("document.form.validation.".concat(f.title))})]}),Object(a.jsxs)(M.a.Group,{as:ce.a,xs:2,controlId:"docForm.status",style:{display:w.id?"block":"none"},children:[Object(a.jsx)(M.a.Label,{children:t("document.status")}),Object(a.jsx)(M.a.Text,{as:"p",children:Q(w.status)})]})]}),Object(a.jsx)(M.a.Row,{children:Object(a.jsxs)(M.a.Group,{as:ce.a,controlId:"docForm.summary",children:[Object(a.jsx)(M.a.Label,{children:t("document.summary")}),Object(a.jsx)(M.a.Control,{as:"textarea",rows:5,name:"summary",onChange:D,value:w.summary}),Object(a.jsx)(M.a.Text,{className:"text-muted",children:t("document.form.summary.mutedText")})]})}),Object(a.jsxs)(M.a.Row,{children:[Object(a.jsxs)(M.a.Group,{as:ce.a,controlId:"docForm.category",children:[Object(a.jsx)(M.a.Label,{children:t("document.category")}),Object(a.jsxs)(M.a.Control,{as:"select",name:"category",required:!0,onChange:D,isInvalid:f.category,value:w.category,children:[Object(a.jsx)("option",{style:{display:"none"},children:t("document.form.category.choose")}),j.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.fullName},e.id)}))]}),Object(a.jsx)(M.a.Control.Feedback,{type:"invalid",children:t("document.form.validation.".concat(f.category))})]}),Object(a.jsxs)(M.a.Group,{as:ce.a,controlId:"docForm.date",children:[Object(a.jsx)(M.a.Label,{children:t("document.date")}),Object(a.jsx)(H,{name:"date",onChange:D,value:w.date,onClear:function(){return D({target:{name:"date",value:""}})}})]})]}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[Object(a.jsx)($.a,{variant:"danger",onClick:function(){p("/documents/".concat(n),{method:"DELETE"}).then((function(e){e.ok&&(window.alert("Document '".concat(n,"' deleted")),l("/documents"))}))},style:{display:n?"block":"none"},children:t("document.form.deleteButton")}),Object(a.jsx)($.a,{variant:"primary",type:"submit",style:{marginLeft:"6px"},disabled:!Object.values(f).every((function(e){return!1===e})),children:t("document.form.".concat(n?"updateButton":"submitButton"))})]})]})});function re(){var e=Object(S.h)();return Object(a.jsxs)(S.d,{children:[Object(a.jsx)(S.b,{path:"".concat(e.path,"/:docId"),component:oe}),Object(a.jsx)(S.b,{path:e.path,component:oe})]})}function se(){return Object(a.jsxs)(T.a,{className:"d-flex flex-column align-item justify-content-center",style:{minHeight:"100vh",minWidth:"95vw"},children:[Object(a.jsx)(G,{}),Object(a.jsxs)(S.d,{children:[Object(a.jsx)(S.b,{exact:!0,path:"/",component:ee}),Object(a.jsx)(S.b,{path:"/documents",component:re}),Object(a.jsx)(S.b,{path:"/categories",component:ne}),Object(a.jsx)(S.b,{path:"/users",component:ae}),Object(a.jsx)(S.b,{path:"*",component:te})]})]})}n(88);function ie(){return Object(a.jsx)(v,{children:Object(a.jsx)(N,{children:Object(a.jsxs)(w.a,{children:[Object(a.jsx)(S.b,{path:"/login",component:E}),Object(a.jsx)(C,{path:"*",component:se})]})})})}n(89);s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(ie,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.53beeeb6.chunk.js.map